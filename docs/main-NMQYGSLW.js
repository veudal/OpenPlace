import{$ as hr,$a as de,A as je,Aa as Qs,Ab as vo,B as ft,Ba as Ks,Bb as yo,C as gt,Ca as Zt,Cb as wo,D as rr,Da as ee,Db as bo,E as mt,Ea as te,Eb as qi,F as Ns,Fa as $i,Fb as _o,G as sr,Ga as Zs,Gb as Co,H as Ni,Ha as Bi,Hb as pe,I as Xe,Ia as wt,Ib as So,J as or,Ja as Js,Jb as xr,K as Hs,Ka as eo,Kb as Eo,L as Fs,La as gr,Lb as xo,M as Us,Ma as to,Mb as ti,N as Re,Na as mr,Nb as Oo,O as $s,Oa as Ke,Ob as Do,P as J,Pa as io,Pb as Mo,Q as ar,Qa as Jt,Qb as ii,R as Y,Ra as K,Rb as Ao,S as Qe,Sa as vr,Sb as Ro,T as lr,Ta as bt,Tb as Yi,U as H,Ua as ne,Ub as Io,V as Pe,Va as le,Vb as Or,W as Bs,Wa as Z,Wb as To,X as G,Xa as yr,Xb as Po,Y as cr,Ya as wr,Z as U,Za as no,_ as A,_a as _t,a as b,aa as js,ab as ro,b as z,ba as qt,bb as br,c as pt,ca as nt,cb as ye,da as ke,db as ce,e as ml,ea as vt,eb as he,f as vl,fa as Hi,fb as ei,g as T,ga as zs,gb as so,h as Ts,ha as Yt,hb as oo,i as Ps,ia as Le,ib as ao,j as Jn,ja as Fi,jb as lo,k as er,ka as Xt,kb as co,l as tr,la as Qt,lb as ho,m as Oe,ma as ur,mb as uo,n as De,na as dr,nb as po,o as Ye,oa as Ws,ob as ji,p as me,pa as Me,pb as fo,q as R,qa as ue,qb as zi,r as Gt,ra as pr,rb as Wi,s as ks,sa as yt,sb as _r,t as Ls,ta as Gs,tb as Cr,u as W,ua as Ui,ub as Sr,v as Vi,va as qs,vb as go,w as ve,wa as Kt,wb as Er,x as ir,xa as Ys,xb as Gi,y as Vs,ya as fr,yb as mo,z as nr,za as Xs,zb as ze}from"./chunk-FSDRVHKQ.js";var Va=ml((wn,ys)=>{"use strict";(function(r,e){typeof wn=="object"&&typeof ys=="object"?ys.exports=e():typeof define=="function"&&define.amd?define([],e):typeof wn=="object"?wn.Pickr=e():r.Pickr=e()})(self,()=>(()=>{"use strict";var r={d:(S,w)=>{for(var h in w)r.o(w,h)&&!r.o(S,h)&&Object.defineProperty(S,h,{enumerable:!0,get:w[h]})},o:(S,w)=>Object.prototype.hasOwnProperty.call(S,w),r:S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}},e={};r.d(e,{default:()=>nl});var i={};function t(S,w,h,p,g={}){w instanceof HTMLCollection||w instanceof NodeList?w=Array.from(w):Array.isArray(w)||(w=[w]),Array.isArray(h)||(h=[h]);for(let u of w)for(let m of h)u[S](m,p,b({capture:!1},g));return Array.prototype.slice.call(arguments,1)}r.r(i),r.d(i,{adjustableInputNumbers:()=>d,createElementFromString:()=>o,createFromTemplate:()=>a,eventPath:()=>l,off:()=>s,on:()=>n,resolveElement:()=>c});let n=t.bind(null,"addEventListener"),s=t.bind(null,"removeEventListener");function o(S){let w=document.createElement("div");return w.innerHTML=S.trim(),w.firstElementChild}function a(S){let w=(p,g)=>{let u=p.getAttribute(g);return p.removeAttribute(g),u},h=(p,g={})=>{let u=w(p,":obj"),m=w(p,":ref"),y=u?g[u]={}:g;m&&(g[m]=p);for(let _ of Array.from(p.children)){let M=w(_,":arr"),D=h(_,M?{}:y);M&&(y[M]||(y[M]=[])).push(Object.keys(D).length?D:_)}return g};return h(o(S))}function l(S){let w=S.path||S.composedPath&&S.composedPath();if(w)return w;let h=S.target.parentElement;for(w=[S.target,h];h=h.parentElement;)w.push(h);return w.push(document,window),w}function c(S){return S instanceof Element?S:typeof S=="string"?S.split(/>>/g).reduce((w,h,p,g)=>(w=w.querySelector(h),p<g.length-1?w.shadowRoot:w),document):null}function d(S,w=h=>h){function h(p){let g=[.001,.01,.1][Number(p.shiftKey||2*p.ctrlKey)]*(p.deltaY<0?1:-1),u=0,m=S.selectionStart;S.value=S.value.replace(/[\d.]+/g,(y,_)=>_<=m&&_+y.length>=m?(m=_,w(Number(y),g,u)):(u++,y)),S.focus(),S.setSelectionRange(m,m),p.preventDefault(),S.dispatchEvent(new Event("input"))}n(S,"focus",()=>n(window,"wheel",h,{passive:!1})),n(S,"blur",()=>s(window,"wheel",h))}let{min:C,max:O,floor:k,round:oe}=Math;function Ee(S,w,h){w/=100,h/=100;let p=k(S=S/360*6),g=S-p,u=h*(1-w),m=h*(1-g*w),y=h*(1-(1-g)*w),_=p%6;return[255*[h,m,u,u,y,h][_],255*[y,h,h,m,u,u][_],255*[u,u,y,h,h,m][_]]}function fe(S,w,h){let p=(2-(w/=100))*(h/=100)/2;return p!==0&&(w=p===1?0:p<.5?w*h/(2*p):w*h/(2-2*p)),[S,100*w,100*p]}function Be(S,w,h){let p=C(S/=255,w/=255,h/=255),g=O(S,w,h),u=g-p,m,y;if(u===0)m=y=0;else{y=u/g;let _=((g-S)/6+u/2)/u,M=((g-w)/6+u/2)/u,D=((g-h)/6+u/2)/u;S===g?m=D-M:w===g?m=1/3+_-D:h===g&&(m=2/3+M-_),m<0?m+=1:m>1&&(m-=1)}return[360*m,100*y,100*g]}function $t(S,w,h,p){return w/=100,h/=100,[...Be(255*(1-C(1,(S/=100)*(1-(p/=100))+p)),255*(1-C(1,w*(1-p)+p)),255*(1-C(1,h*(1-p)+p)))]}function ut(S,w,h){w/=100;let p=2*(w*=(h/=100)<.5?h:1-h)/(h+w)*100,g=100*(h+w);return[S,isNaN(p)?0:p,g]}function Za(S){return Be(...S.match(/.{2}/g).map(w=>parseInt(w,16)))}function Ja(S){S=S.match(/^[a-zA-Z]+$/)?function(g){if(g.toLowerCase()==="black")return"#000";let u=document.createElement("canvas").getContext("2d");return u.fillStyle=g,u.fillStyle==="#000"?null:u.fillStyle}(S):S;let w={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},h=g=>g.map(u=>/^(|\d+)\.\d+|\d+$/.test(u)?Number(u):void 0),p;e:for(let g in w)if(p=w[g].exec(S))switch(g){case"cmyk":{let[,u,m,y,_]=h(p);if(u>100||m>100||y>100||_>100)break e;return{values:$t(u,m,y,_),type:g}}case"rgba":{let[,u,,m,,y,,,_]=h(p);if(u=p[2]==="%"?u/100*255:u,m=p[4]==="%"?m/100*255:m,y=p[6]==="%"?y/100*255:y,_=p[9]==="%"?_/100:_,u>255||m>255||y>255||_<0||_>1)break e;return{values:[...Be(u,m,y),_],a:_,type:g}}case"hexa":{let[,u]=p;u.length!==4&&u.length!==3||(u=u.split("").map(_=>_+_).join(""));let m=u.substring(0,6),y=u.substring(6);return y=y?parseInt(y,16)/255:void 0,{values:[...Za(m),y],a:y,type:g}}case"hsla":{let[,u,m,y,,_]=h(p);if(_=p[6]==="%"?_/100:_,u>360||m>100||y>100||_<0||_>1)break e;return{values:[...ut(u,m,y),_],a:_,type:g}}case"hsva":{let[,u,m,y,,_]=h(p);if(_=p[6]==="%"?_/100:_,u>360||m>100||y>100||_<0||_>1)break e;return{values:[u,m,y,_],a:_,type:g}}}return{values:null,type:null}}function Bt(S=0,w=0,h=0,p=1){let g=(m,y)=>(_=-1)=>y(~_?m.map(M=>Number(M.toFixed(_))):m),u={h:S,s:w,v:h,a:p,toHSVA(){let m=[u.h,u.s,u.v,u.a];return m.toString=g(m,y=>`hsva(${y[0]}, ${y[1]}%, ${y[2]}%, ${u.a})`),m},toHSLA(){let m=[...fe(u.h,u.s,u.v),u.a];return m.toString=g(m,y=>`hsla(${y[0]}, ${y[1]}%, ${y[2]}%, ${u.a})`),m},toRGBA(){let m=[...Ee(u.h,u.s,u.v),u.a];return m.toString=g(m,y=>`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${u.a})`),m},toCMYK(){let m=function(y,_,M){let D=Ee(y,_,M),E=D[0]/255,V=D[1]/255,N=D[2]/255,L=C(1-E,1-V,1-N);return[100*(L===1?0:(1-E-L)/(1-L)),100*(L===1?0:(1-V-L)/(1-L)),100*(L===1?0:(1-N-L)/(1-L)),100*L]}(u.h,u.s,u.v);return m.toString=g(m,y=>`cmyk(${y[0]}%, ${y[1]}%, ${y[2]}%, ${y[3]}%)`),m},toHEXA(){let m=function(_,M,D){return Ee(_,M,D).map(E=>oe(E).toString(16).padStart(2,"0"))}(u.h,u.s,u.v),y=u.a>=1?"":Number((255*u.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return y&&m.push(y),m.toString=()=>`#${m.join("").toUpperCase()}`,m},clone:()=>Bt(u.h,u.s,u.v,u.a)};return u}let ki=S=>Math.max(Math.min(S,1),0);function zn(S){let w={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},S),_keyboard(u){let{options:m}=w,{type:y,key:_}=u;if(document.activeElement===m.wrapper){let{lock:M}=w.options,D=_==="ArrowUp",E=_==="ArrowRight",V=_==="ArrowDown",N=_==="ArrowLeft";if(y==="keydown"&&(D||E||V||N)){let L=0,ie=0;M==="v"?L=D||E?1:-1:M==="h"?L=D||E?-1:1:(ie=D?-1:V?1:0,L=N?-1:E?1:0),w.update(ki(w.cache.x+.01*L),ki(w.cache.y+.01*ie)),u.preventDefault()}else _.startsWith("Arrow")&&(w.options.onstop(),u.preventDefault())}},_tapstart(u){n(document,["mouseup","touchend","touchcancel"],w._tapstop),n(document,["mousemove","touchmove"],w._tapmove),u.cancelable&&u.preventDefault(),w._tapmove(u)},_tapmove(u){let{options:m,cache:y}=w,{lock:_,element:M,wrapper:D}=m,E=D.getBoundingClientRect(),V=0,N=0;if(u){let ge=u&&u.touches&&u.touches[0];V=u?(ge||u).clientX:0,N=u?(ge||u).clientY:0,V<E.left?V=E.left:V>E.left+E.width&&(V=E.left+E.width),N<E.top?N=E.top:N>E.top+E.height&&(N=E.top+E.height),V-=E.left,N-=E.top}else y&&(V=y.x*E.width,N=y.y*E.height);_!=="h"&&(M.style.left=`calc(${V/E.width*100}% - ${M.offsetWidth/2}px)`),_!=="v"&&(M.style.top=`calc(${N/E.height*100}% - ${M.offsetHeight/2}px)`),w.cache={x:V/E.width,y:N/E.height};let L=ki(V/E.width),ie=ki(N/E.height);switch(_){case"v":return m.onchange(L);case"h":return m.onchange(ie);default:return m.onchange(L,ie)}},_tapstop(){w.options.onstop(),s(document,["mouseup","touchend","touchcancel"],w._tapstop),s(document,["mousemove","touchmove"],w._tapmove)},trigger(){w._tapmove()},update(u=0,m=0){let{left:y,top:_,width:M,height:D}=w.options.wrapper.getBoundingClientRect();w.options.lock==="h"&&(m=u),w._tapmove({clientX:y+M*u,clientY:_+D*m})},destroy(){let{options:u,_tapstart:m,_keyboard:y}=w;s(document,["keydown","keyup"],y),s([u.wrapper,u.element],"mousedown",m),s([u.wrapper,u.element],"touchstart",m,{passive:!1})}},{options:h,_tapstart:p,_keyboard:g}=w;return n([h.wrapper,h.element],"mousedown",p),n([h.wrapper,h.element],"touchstart",p,{passive:!1}),n(document,["keydown","keyup"],g),w}function el(S={}){S=Object.assign({onchange:()=>0,className:"",elements:[]},S);let w=n(S.elements,"click",h=>{S.elements.forEach(p=>p.classList[h.target===p?"add":"remove"](S.className)),S.onchange(h),h.stopPropagation()});return{destroy:()=>s(...w)}}let tl={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},il=(S,w,h)=>{let p=typeof S!="object"||S instanceof HTMLElement?b({reference:S,popper:w},h):S;return{update(g=p){let{reference:u,popper:m}=Object.assign(p,g);if(!m||!u)throw new Error("Popper- or reference-element missing.");return((y,_,M)=>{let{container:D,arrow:E,margin:V,padding:N,position:L,variantFlipOrder:ie,positionFlipOrder:ge}=b(b({container:document.documentElement.getBoundingClientRect()},tl),M),{left:Wn,top:Gn}=_.style;_.style.left="0",_.style.top="0";let ae=y.getBoundingClientRect(),xe=_.getBoundingClientRect(),rl={t:ae.top-xe.height-V,b:ae.bottom+V,r:ae.right+V,l:ae.left-xe.width-V},sl={vs:ae.left,vm:ae.left+ae.width/2-xe.width/2,ve:ae.left+ae.width-xe.width,hs:ae.top,hm:ae.bottom-ae.height/2-xe.height/2,he:ae.bottom-xe.height},[ol,al="middle"]=L.split("-"),ll=ge[ol],cl=ie[al],{top:Ds,left:Ms,bottom:As,right:Rs}=D;for(let jt of ll){let dt=jt==="t"||jt==="b",zt=rl[jt],[qn,Yn]=dt?["top","left"]:["left","top"],[Xn,Qn]=dt?[xe.height,xe.width]:[xe.width,xe.height],[hl,ul]=dt?[As,Rs]:[Rs,As],[dl,pl]=dt?[Ds,Ms]:[Ms,Ds];if(!(zt<dl||zt+Xn+N>hl))for(let Kn of cl){let Wt=sl[(dt?"v":"h")+Kn];if(!(Wt<pl||Wt+Qn+N>ul)){if(Wt-=xe[Yn],zt-=xe[qn],_.style[Yn]=`${Wt}px`,_.style[qn]=`${zt}px`,E){let Zn=dt?ae.width/2:ae.height/2,Li=Qn/2,Is=Zn>Li,fl=Wt+{s:Is?Li:Zn,m:Li,e:Is?Li:Qn-Zn}[Kn],gl=zt+{t:Xn,b:0,r:0,l:Xn}[jt];E.style[Yn]=`${fl}px`,E.style[qn]=`${gl}px`}return jt+Kn}}}return _.style.left=Wn,_.style.top=Gn,null})(u,m,p)}}},nl=(()=>{class S{static utils=i;static version="1.9.1";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=Bt();_lastColor=Bt();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(h){this.options=h=Object.assign(b({},S.DEFAULT_OPTIONS),h);let{swatches:p,components:g,theme:u,sliders:m,lockOpacity:y,padding:_}=h;["nano","monolith"].includes(u)&&!m&&(h.sliders="h"),g.interaction||(g.interaction={});let{preview:M,opacity:D,hue:E,palette:V}=g;g.opacity=!y&&D,g.palette=V||M||D||E,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),p&&p.length&&p.forEach(ge=>this.addSwatch(ge));let{button:N,app:L}=this._root;this._nanopop=il(N,L,{margin:_}),N.setAttribute("role","button"),N.setAttribute("aria-label",this._t("btn:toggle"));let ie=this;this._setupAnimationFrame=requestAnimationFrame(function ge(){if(!L.offsetWidth)return requestAnimationFrame(ge);ie.setColor(h.default),ie._rePositioningPicker(),h.defaultRepresentation&&(ie._representation=h.defaultRepresentation,ie.setColorRepresentation(ie._representation)),h.showAlways&&ie.show(),ie._initializingActive=!1,ie._emit("init")})}static create=h=>new S(h);_preBuild(){let{options:h}=this;for(let p of["el","container"])h[p]=c(h[p]);this._root=(p=>{let{components:g,useAsButton:u,inline:m,appClass:y,theme:_,lockOpacity:M}=p.options,D=L=>L?"":'style="display:none" hidden',E=L=>p._t(L),V=a(`
      <div :ref="root" class="pickr">

        ${u?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${y||""}" data-theme="${_}" ${m?'style="position: unset"':""} aria-label="${E("ui:dialog")}" role="window">
          <div class="pcr-selection" ${D(g.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${D(g.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${E("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${E("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${D(g.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${E("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${D(g.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${E("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${g.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${D(Object.keys(g.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${D(g.interaction.input)} aria-label="${E("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${M?"HEX":"HEXA"}" type="button" ${D(g.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${M?"RGB":"RGBA"}" type="button" ${D(g.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${M?"HSL":"HSLA"}" type="button" ${D(g.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${M?"HSV":"HSVA"}" type="button" ${D(g.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${D(g.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${E("btn:save")}" type="button" ${D(g.interaction.save)} aria-label="${E("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${E("btn:cancel")}" type="button" ${D(g.interaction.cancel)} aria-label="${E("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${E("btn:clear")}" type="button" ${D(g.interaction.clear)} aria-label="${E("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),N=V.interaction;return N.options.find(L=>!L.hidden&&!L.classList.add("active")),N.type=()=>N.options.find(L=>L.classList.contains("active")),V})(this),h.useAsButton&&(this._root.button=h.el),h.container.appendChild(this._root.root)}_finalBuild(){let h=this.options,p=this._root;if(h.container.removeChild(p.root),h.inline){let g=h.el.parentElement;h.el.nextSibling?g.insertBefore(p.app,h.el.nextSibling):g.appendChild(p.app)}else h.container.appendChild(p.app);h.useAsButton?h.inline&&h.el.remove():h.el.parentNode.replaceChild(p.root,h.el),h.disabled&&this.disable(),h.comparison||(p.button.style.transition="none",h.useAsButton||(p.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){let h=this,p=this.options.components,g=(h.options.sliders||"v").repeat(2),[u,m]=g.match(/^[vh]+$/g)?g:[],y=()=>this._color||(this._color=this._lastColor.clone()),_={palette:zn({element:h._root.palette.picker,wrapper:h._root.palette.palette,onstop:()=>h._emit("changestop","slider",h),onchange(M,D){if(!p.palette)return;let E=y(),{_root:V,options:N}=h,{lastColor:L,currentColor:ie}=V.preview;h._recalc&&(E.s=100*M,E.v=100-100*D,E.v<0&&(E.v=0),h._updateOutput("slider"));let ge=E.toRGBA().toString(0);this.element.style.background=ge,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${E.a}), transparent),
                        linear-gradient(to left, hsla(${E.h}, 100%, 50%, ${E.a}), rgba(255, 255, 255, ${E.a}))
                    `,N.comparison?N.useAsButton||h._lastColor||L.style.setProperty("--pcr-color",ge):(V.button.style.setProperty("--pcr-color",ge),V.button.classList.remove("clear"));let Wn=E.toHEXA().toString();for(let{el:Gn,color:ae}of h._swatchColors)Gn.classList[Wn===ae.toHEXA().toString()?"add":"remove"]("pcr-active");ie.style.setProperty("--pcr-color",ge)}}),hue:zn({lock:m==="v"?"h":"v",element:h._root.hue.picker,wrapper:h._root.hue.slider,onstop:()=>h._emit("changestop","slider",h),onchange(M){if(!p.hue||!p.palette)return;let D=y();h._recalc&&(D.h=360*M),this.element.style.backgroundColor=`hsl(${D.h}, 100%, 50%)`,_.palette.trigger()}}),opacity:zn({lock:u==="v"?"h":"v",element:h._root.opacity.picker,wrapper:h._root.opacity.slider,onstop:()=>h._emit("changestop","slider",h),onchange(M){if(!p.opacity||!p.palette)return;let D=y();h._recalc&&(D.a=Math.round(100*M)/100),this.element.style.background=`rgba(0, 0, 0, ${D.a})`,_.palette.trigger()}}),selectable:el({elements:h._root.interaction.options,className:"active",onchange(M){h._representation=M.target.getAttribute("data-type").toUpperCase(),h._recalc&&h._updateOutput("swatch")}})};this._components=_}_bindEvents(){let{_root:h,options:p}=this,g=[n(h.interaction.clear,"click",()=>this._clearColor()),n([h.interaction.cancel,h.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),n(h.interaction.save,"click",()=>{!this.applyColor()&&!p.showAlways&&this.hide()}),n(h.interaction.result,["keyup","input"],u=>{this.setColor(u.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),u.stopImmediatePropagation()}),n(h.interaction.result,["focus","blur"],u=>{this._recalc=u.type==="blur",this._recalc&&this._updateOutput(null)}),n([h.palette.palette,h.palette.picker,h.hue.slider,h.hue.picker,h.opacity.slider,h.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!p.showAlways){let u=p.closeWithKey;g.push(n(h.button,"click",()=>this.isOpen()?this.hide():this.show()),n(document,"keyup",m=>this.isOpen()&&(m.key===u||m.code===u)&&this.hide()),n(document,["touchstart","mousedown"],m=>{this.isOpen()&&!l(m).some(y=>y===h.app||y===h.button)&&this.hide()},{capture:!0}))}if(p.adjustableNumbers){let u={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};d(h.interaction.result,(m,y,_)=>{let M=u[this.getColorRepresentation().toLowerCase()];if(M){let D=M[_],E=m+(D>=100?1e3*y:y);return E<=0?0:Number((E<D?E:D).toPrecision(3))}return m})}if(p.autoReposition&&!p.inline){let u=null,m=this;g.push(n(window,["scroll","resize"],()=>{m.isOpen()&&(p.closeOnScroll&&m.hide(),u===null?(u=setTimeout(()=>u=null,100),requestAnimationFrame(function y(){m._rePositioningPicker(),u!==null&&requestAnimationFrame(y)})):(clearTimeout(u),u=setTimeout(()=>u=null,100)))},{capture:!0}))}this._eventBindings=g}_rePositioningPicker(){let{options:h}=this;if(!h.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:h.position})){let p=this._root.app,g=p.getBoundingClientRect();p.style.top=(window.innerHeight-g.height)/2+"px",p.style.left=(window.innerWidth-g.width)/2+"px"}}_updateOutput(h){let{_root:p,_color:g,options:u}=this;if(p.interaction.type()){let m=`to${p.interaction.type().getAttribute("data-type")}`;p.interaction.result.value=typeof g[m]=="function"?g[m]().toString(u.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",g,h,this)}_clearColor(h=!1){let{_root:p,options:g}=this;g.useAsButton||p.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),p.button.classList.add("clear"),g.showAlways||this.hide(),this._lastColor=null,this._initializingActive||h||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(h){let{values:p,type:g,a:u}=Ja(h),{lockOpacity:m}=this.options,y=u!==void 0&&u!==1;return p&&p.length===3&&(p[3]=void 0),{values:!p||m&&y?null:p,type:g}}_t(h){return this.options.i18n[h]||S.I18N_DEFAULTS[h]}_emit(h,...p){this._eventListener[h].forEach(g=>g(...p,this))}on(h,p){return this._eventListener[h].push(p),this}off(h,p){let g=this._eventListener[h]||[],u=g.indexOf(p);return~u&&g.splice(u,1),this}addSwatch(h){let{values:p}=this._parseLocalColor(h);if(p){let{_swatchColors:g,_root:u}=this,m=Bt(...p),y=o(`<button type="button" style="--pcr-color: ${m.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return u.swatches.appendChild(y),g.push({el:y,color:m}),this._eventBindings.push(n(y,"click",()=>{this.setHSVA(...m.toHSVA(),!0),this._emit("swatchselect",m),this._emit("change",m,"swatch",this)})),!0}return!1}removeSwatch(h){let p=this._swatchColors[h];if(p){let{el:g}=p;return this._root.swatches.removeChild(g),this._swatchColors.splice(h,1),!0}return!1}applyColor(h=!1){let{preview:p,button:g}=this._root,u=this._color.toRGBA().toString(0);return p.lastColor.style.setProperty("--pcr-color",u),this.options.useAsButton||g.style.setProperty("--pcr-color",u),g.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||h||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(h=>s(...h)),Object.keys(this._components).forEach(h=>this._components[h].destroy())}destroyAndRemove(){this.destroy();let{root:h,app:p}=this._root;h.parentElement&&h.parentElement.removeChild(h),p.parentElement.removeChild(p),Object.keys(this).forEach(g=>this[g]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(h=360,p=0,g=0,u=1,m=!1){let y=this._recalc;if(this._recalc=!1,h<0||h>360||p<0||p>100||g<0||g>100||u<0||u>1)return!1;this._color=Bt(h,p,g,u);let{hue:_,opacity:M,palette:D}=this._components;return _.update(h/360),M.update(u),D.update(p/100,1-g/100),m||this.applyColor(),y&&this._updateOutput(),this._recalc=y,!0}setColor(h,p=!1){if(h===null)return this._clearColor(p),!0;let{values:g,type:u}=this._parseLocalColor(h);if(g){let m=u.toUpperCase(),{options:y}=this._root.interaction,_=y.find(M=>M.getAttribute("data-type")===m);if(_&&!_.hidden)for(let M of y)M.classList[M===_?"add":"remove"]("active");return!!this.setHSVA(...g,p)&&this.setColorRepresentation(m)}return!1}setColorRepresentation(h){return h=h.toUpperCase(),!!this._root.interaction.options.find(p=>p.getAttribute("data-type").startsWith(h)&&!p.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return S})();return e=e.default})())});var Ar=class extends Co{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Rr=class r extends Ar{static makeCurrent(){_o(new r)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.remove()}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=wl();return i==null?null:bl(i)}resetBaseElement(){ni=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Oo(document.cookie,e)}},ni=null;function wl(){return ni=ni||document.querySelector("base"),ni?ni.getAttribute("href"):null}function bl(r){return new URL(r,document.baseURI).pathname}var Ir=class{addToWindow(e){Qe.getAngularTestability=(t,n=!0)=>{let s=e.findTestabilityInTree(t,n);if(s==null)throw new Y(5103,!1);return s},Qe.getAllAngularTestabilities=()=>e.getAllTestabilities(),Qe.getAllAngularRootElements=()=>e.getAllRootElements();let i=t=>{let n=Qe.getAllAngularTestabilities(),s=n.length,o=function(){s--,s==0&&t()};n.forEach(a=>{a.whenStable(o)})};Qe.frameworkStabilizers||(Qe.frameworkStabilizers=[]),Qe.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,t){if(i==null)return null;let n=e.getTestability(i);return n??(t?qi().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},_l=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Xi=new G(""),No=(()=>{let e=class e{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,s){return this._findPluginFor(n).addEventListener(t,n,s)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(o=>o.supports(t)),!n)throw new Y(5101,!1);return this._eventNameToPlugin.set(t,n),n}};e.\u0275fac=function(n){return new(n||e)(U(Xi),U(ue))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),ri=class{constructor(e){this._doc=e}},Dr="ng-app-id",Ho=(()=>{let e=class e{constructor(t,n,s,o={}){this.doc=t,this.appId=n,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Or(o),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(s=>s.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Dr}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(s=>{s.textContent!=null&&n.set(s.textContent,s)}),n}return null}changeUsageCount(t,n){let s=this.styleRef;if(s.has(t)){let o=s.get(t);return o.usage+=n,o.usage}return s.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let s=this.styleNodesInDOM,o=s?.get(n);if(o?.parentNode===t)return s.delete(n),o.removeAttribute(Dr),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=n,this.platformIsServer&&a.setAttribute(Dr,this.appId),t.appendChild(a),a}}addStyleToHost(t,n){let s=this.getStyleElement(t,n),o=this.styleRef,a=o.get(n)?.elements;a?a.push(s):o.set(n,{elements:[s],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(n){return new(n||e)(U(pe),U(Ui),U(fr,8),U(Kt))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Mr={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Pr=/%COMP%/g,Fo="%COMP%",Cl=`_nghost-${Fo}`,Sl=`_ngcontent-${Fo}`,El=!0,xl=new G("",{providedIn:"root",factory:()=>El});function Ol(r){return Sl.replace(Pr,r)}function Dl(r){return Cl.replace(Pr,r)}function Uo(r,e){return e.map(i=>i.replace(Pr,r))}var Qi=(()=>{let e=class e{constructor(t,n,s,o,a,l,c,d=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=Or(l),this.defaultRenderer=new si(t,a,c,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===qt.ShadowDom&&(n=z(b({},n),{encapsulation:qt.Emulated}));let s=this.getOrCreateRenderer(t,n);return s instanceof Ki?s.applyToHost(t):s instanceof oi&&s.applyStyles(),s}getOrCreateRenderer(t,n){let s=this.rendererByCompId,o=s.get(n.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,d=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(n.encapsulation){case qt.Emulated:o=new Ki(c,d,n,this.appId,C,a,l,O);break;case qt.ShadowDom:return new Tr(c,d,t,n,a,l,this.nonce,O);default:o=new oi(c,d,n,C,a,l,O);break}s.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(n){return new(n||e)(U(No),U(Ho),U(Ui),U(xl),U(pe),U(Kt),U(ue),U(fr))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),si=class{constructor(e,i,t,n){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(Mr[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(ko(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(ko(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){i.remove()}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new Y(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,n){if(n){i=n+":"+i;let s=Mr[n];s?e.setAttributeNS(s,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let n=Mr[t];n?e.removeAttributeNS(n,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,n){n&(Zt.DashCase|Zt.Important)?e.style.setProperty(i,t,n&Zt.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&Zt.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=qi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function ko(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Tr=class extends si{constructor(e,i,t,n,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Uo(n.id,n.styles);for(let d of c){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=d,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(null,i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},oi=class extends si{constructor(e,i,t,n,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=n,this.styles=l?Uo(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ki=class extends oi{constructor(e,i,t,n,s,o,a,l){let c=n+"-"+t.id;super(e,i,t,s,o,a,l,c),this.contentAttr=Ol(c),this.hostAttr=Dl(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},Ml=(()=>{let e=class e extends ri{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,s){return t.addEventListener(n,s,!1),()=>this.removeEventListener(t,n,s)}removeEventListener(t,n,s){return t.removeEventListener(n,s)}};e.\u0275fac=function(n){return new(n||e)(U(pe))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Al=(()=>{let e=class e extends ri{constructor(t){super(t),this.delegate=A(wo,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,n,s){return this.delegate.addEventListener(t,n,s)}removeEventListener(t,n,s){return this.delegate.removeEventListener(t,n,s)}};e.\u0275fac=function(n){return new(n||e)(U(pe))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Lo=["alt","control","meta","shift"],Rl={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Il={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},Tl=(()=>{let e=class e extends ri{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,n,s){let o=e.parseEventName(n),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>qi().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let n=t.toLowerCase().split("."),s=n.shift();if(n.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(n.pop()),a="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),a="code."),Lo.forEach(d=>{let C=n.indexOf(d);C>-1&&(n.splice(C,1),a+=d+".")}),a+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(t,n){let s=Rl[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(s=t.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Lo.forEach(a=>{if(a!==s){let l=Il[a];l(t)&&(o+=a+".")}}),o+=s,o===n)}static eventCallback(t,n,s){return o=>{e.matchEventFullKeyCode(o,t)&&s.runGuarded(()=>n(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(n){return new(n||e)(U(pe))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function Pl(){Rr.makeCurrent()}function kl(){return new pr}function Ll(){return Gs(document),document}var Vl=[{provide:Kt,useValue:Io},{provide:qs,useValue:Pl,multi:!0},{provide:pe,useFactory:Ll,deps:[]}],$o=mo(vo,"browser",Vl),Nl=new G(""),Hl=[{provide:zi,useClass:Ir,deps:[]},{provide:fo,useClass:Wi,deps:[ue,_r,zi]},{provide:Wi,useClass:Wi,deps:[ue,_r,zi]}],Fl=[{provide:zs,useValue:"root"},{provide:pr,useFactory:kl,deps:[]},{provide:Xi,useClass:Ml,multi:!0,deps:[pe,ue,Kt]},{provide:Xi,useClass:Tl,multi:!0,deps:[pe]},{provide:Xi,useClass:Al,multi:!0},Qi,Ho,No,{provide:Bi,useExisting:Qi},{provide:Po,useClass:_l,deps:[]},[]],Bo=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Ui,useValue:t.appId}]}}};e.\u0275fac=function(n){return new(n||e)(U(Nl,12))},e.\u0275mod=ke({type:e}),e.\u0275inj=Pe({providers:[...Fl,...Hl],imports:[Yi,yo]});let r=e;return r})();var jo=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(n){return new(n||e)(U(pe))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var P="primary",_i=Symbol("RouteTitle"),Hr=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Dt(r){return new Hr(r)}function $l(r,e,i){let t=i.path.split("/");if(t.length>r.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<r.length))return null;let n={};for(let s=0;s<t.length;s++){let o=t[s],a=r[s];if(o[0]===":")n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,t.length),posParams:n}}function Bl(r,e){if(r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(!Ve(r[i],e[i]))return!1;return!0}function Ve(r,e){let i=r?Fr(r):void 0,t=e?Fr(e):void 0;if(!i||!t||i.length!=t.length)return!1;let n;for(let s=0;s<i.length;s++)if(n=i[s],!ta(r[n],e[n]))return!1;return!0}function Fr(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function ta(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let i=[...r].sort(),t=[...e].sort();return i.every((n,s)=>t[s]===n)}else return r===e}function ia(r){return r.length>0?r[r.length-1]:null}function Je(r){return ks(r)?r:Cr(r)?me(Promise.resolve(r)):R(r)}var jl={exact:ra,subset:sa},na={exact:zl,subset:Wl,ignored:()=>!0};function Wo(r,e,i){return jl[i.paths](r.root,e.root,i.matrixParams)&&na[i.queryParams](r.queryParams,e.queryParams)&&!(i.fragment==="exact"&&r.fragment!==e.fragment)}function zl(r,e){return Ve(r,e)}function ra(r,e,i){if(!ot(r.segments,e.segments)||!en(r.segments,e.segments,i)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!r.children[t]||!ra(r.children[t],e.children[t],i))return!1;return!0}function Wl(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(i=>ta(r[i],e[i]))}function sa(r,e,i){return oa(r,e,e.segments,i)}function oa(r,e,i,t){if(r.segments.length>i.length){let n=r.segments.slice(0,i.length);return!(!ot(n,i)||e.hasChildren()||!en(n,i,t))}else if(r.segments.length===i.length){if(!ot(r.segments,i)||!en(r.segments,i,t))return!1;for(let n in e.children)if(!r.children[n]||!sa(r.children[n],e.children[n],t))return!1;return!0}else{let n=i.slice(0,r.segments.length),s=i.slice(r.segments.length);return!ot(r.segments,n)||!en(r.segments,n,t)||!r.children[P]?!1:oa(r.children[P],e,s,t)}}function en(r,e,i){return e.every((t,n)=>na[i](r[n].parameters,t.parameters))}var Ge=class{constructor(e=new F([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Dt(this.queryParams),this._queryParamMap}toString(){return Yl.serialize(this)}},F=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return tn(this)}},st=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=Dt(this.parameters),this._parameterMap}toString(){return la(this)}};function Gl(r,e){return ot(r,e)&&r.every((i,t)=>Ve(i.parameters,e[t].parameters))}function ot(r,e){return r.length!==e.length?!1:r.every((i,t)=>i.path===e[t].path)}function ql(r,e){let i=[];return Object.entries(r.children).forEach(([t,n])=>{t===P&&(i=i.concat(e(n,t)))}),Object.entries(r.children).forEach(([t,n])=>{t!==P&&(i=i.concat(e(n,t)))}),i}var Ci=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>new Mt,providedIn:"root"});let r=e;return r})(),Mt=class{parse(e){let i=new $r(e);return new Ge(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${ai(e.root,!0)}`,t=Kl(e.queryParams),n=typeof e.fragment=="string"?`#${Xl(e.fragment)}`:"";return`${i}${t}${n}`}},Yl=new Mt;function tn(r){return r.segments.map(e=>la(e)).join("/")}function ai(r,e){if(!r.hasChildren())return tn(r);if(e){let i=r.children[P]?ai(r.children[P],!1):"",t=[];return Object.entries(r.children).forEach(([n,s])=>{n!==P&&t.push(`${n}:${ai(s,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=ql(r,(t,n)=>n===P?[ai(r.children[P],!1)]:[`${n}:${ai(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[P]!=null?`${tn(r)}/${i[0]}`:`${tn(r)}/(${i.join("//")})`}}function aa(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Zi(r){return aa(r).replace(/%3B/gi,";")}function Xl(r){return encodeURI(r)}function Ur(r){return aa(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function nn(r){return decodeURIComponent(r)}function Go(r){return nn(r.replace(/\+/g,"%20"))}function la(r){return`${Ur(r.path)}${Ql(r.parameters)}`}function Ql(r){return Object.entries(r).map(([e,i])=>`;${Ur(e)}=${Ur(i)}`).join("")}function Kl(r){let e=Object.entries(r).map(([i,t])=>Array.isArray(t)?t.map(n=>`${Zi(i)}=${Zi(n)}`).join("&"):`${Zi(i)}=${Zi(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var Zl=/^[^\/()?;#]+/;function kr(r){let e=r.match(Zl);return e?e[0]:""}var Jl=/^[^\/()?;=#]+/;function ec(r){let e=r.match(Jl);return e?e[0]:""}var tc=/^[^=?&#]+/;function ic(r){let e=r.match(tc);return e?e[0]:""}var nc=/^[^&#]+/;function rc(r){let e=r.match(nc);return e?e[0]:""}var $r=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new F([],{}):new F([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[P]=new F(e,i)),t}parseSegment(){let e=kr(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Y(4009,!1);return this.capture(e),new st(nn(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=ec(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let n=kr(this.remaining);n&&(t=n,this.capture(t))}e[nn(i)]=nn(t)}parseQueryParam(e){let i=ic(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let o=rc(this.remaining);o&&(t=o,this.capture(t))}let n=Go(i),s=Go(t);if(e.hasOwnProperty(n)){let o=e[n];Array.isArray(o)||(o=[o],e[n]=o),o.push(s)}else e[n]=s}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=kr(this.remaining),n=this.remaining[t.length];if(n!=="/"&&n!==")"&&n!==";")throw new Y(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=P);let o=this.parseChildren();i[s]=Object.keys(o).length===1?o[P]:new F([],o),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Y(4011,!1)}};function ca(r){return r.segments.length>0?new F([],{[P]:r}):r}function ha(r){let e={};for(let[t,n]of Object.entries(r.children)){let s=ha(n);if(t===P&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[t]=s)}let i=new F(r.segments,e);return sc(i)}function sc(r){if(r.numberOfChildren===1&&r.children[P]){let e=r.children[P];return new F(r.segments.concat(e.segments),e.children)}return r}function pi(r){return r instanceof Ge}function oc(r,e,i=null,t=null){let n=ua(r);return da(n,e,i,t)}function ua(r){let e;function i(s){let o={};for(let l of s.children){let c=i(l);o[l.outlet]=c}let a=new F(s.url,o);return s===r&&(e=a),a}let t=i(r.root),n=ca(t);return e??n}function da(r,e,i,t){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return Lr(n,n,n,i,t);let s=ac(e);if(s.toRoot())return Lr(n,n,new F([],{}),i,t);let o=lc(s,n,r),a=o.processChildren?hi(o.segmentGroup,o.index,s.commands):fa(o.segmentGroup,o.index,s.commands);return Lr(n,o.segmentGroup,a,i,t)}function rn(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function fi(r){return typeof r=="object"&&r!=null&&r.outlets}function Lr(r,e,i,t,n){let s={};t&&Object.entries(t).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(d=>`${d}`):`${c}`});let o;r===e?o=i:o=pa(r,e,i);let a=ca(ha(o));return new Ge(a,s,n)}function pa(r,e,i){let t={};return Object.entries(r.children).forEach(([n,s])=>{s===e?t[n]=i:t[n]=pa(s,e,i)}),new F(r.segments,t)}var sn=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&rn(t[0]))throw new Y(4003,!1);let n=t.find(fi);if(n&&n!==ia(t))throw new Y(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ac(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new sn(!0,0,r);let e=0,i=!1,t=r.reduce((n,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return typeof s!="string"?[...n,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&n.push(a))}),n):[...n,s]},[]);return new sn(i,e,t)}var Et=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function lc(r,e,i){if(r.isAbsolute)return new Et(e,!0,0);if(!i)return new Et(e,!1,NaN);if(i.parent===null)return new Et(i,!0,0);let t=rn(r.commands[0])?0:1,n=i.segments.length-1+t;return cc(i,n,r.numberOfDoubleDots)}function cc(r,e,i){let t=r,n=e,s=i;for(;s>n;){if(s-=n,t=t.parent,!t)throw new Y(4005,!1);n=t.segments.length}return new Et(t,!1,n-s)}function hc(r){return fi(r[0])?r[0].outlets:{[P]:r}}function fa(r,e,i){if(r??=new F([],{}),r.segments.length===0&&r.hasChildren())return hi(r,e,i);let t=uc(r,e,i),n=i.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let s=new F(r.segments.slice(0,t.pathIndex),{});return s.children[P]=new F(r.segments.slice(t.pathIndex),r.children),hi(s,0,n)}else return t.match&&n.length===0?new F(r.segments,{}):t.match&&!r.hasChildren()?Br(r,e,i):t.match?hi(r,0,n):Br(r,e,i)}function hi(r,e,i){if(i.length===0)return new F(r.segments,{});{let t=hc(i),n={};if(Object.keys(t).some(s=>s!==P)&&r.children[P]&&r.numberOfChildren===1&&r.children[P].segments.length===0){let s=hi(r.children[P],e,i);return new F(r.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[s]=fa(r.children[s],e,o))}),Object.entries(r.children).forEach(([s,o])=>{t[s]===void 0&&(n[s]=o)}),new F(r.segments,n)}}function uc(r,e,i){let t=0,n=e,s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(t>=i.length)return s;let o=r.segments[n],a=i[t];if(fi(a))break;let l=`${a}`,c=t<i.length-1?i[t+1]:null;if(n>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Yo(l,c,o))return s;t+=2}else{if(!Yo(l,{},o))return s;t++}n++}return{match:!0,pathIndex:n,commandIndex:t}}function Br(r,e,i){let t=r.segments.slice(0,e),n=0;for(;n<i.length;){let s=i[n];if(fi(s)){let l=dc(s.outlets);return new F(t,l)}if(n===0&&rn(i[0])){let l=r.segments[e];t.push(new st(l.path,qo(i[0]))),n++;continue}let o=fi(s)?s.outlets[P]:`${s}`,a=n<i.length-1?i[n+1]:null;o&&a&&rn(a)?(t.push(new st(o,qo(a))),n+=2):(t.push(new st(o,{})),n++)}return new F(t,{})}function dc(r){let e={};return Object.entries(r).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=Br(new F([],{}),0,t))}),e}function qo(r){let e={};return Object.entries(r).forEach(([i,t])=>e[i]=`${t}`),e}function Yo(r,e,i){return r==i.path&&Ve(e,i.parameters)}var ui="imperative",re=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(re||{}),Ae=class{constructor(e,i){this.id=e,this.url=i}},At=class extends Ae{constructor(e,i,t="imperative",n=null){super(e,i),this.type=re.NavigationStart,this.navigationTrigger=t,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qe=class extends Ae{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},be=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(be||{}),on=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(on||{}),We=class extends Ae{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ze=class extends Ae{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=re.NavigationSkipped}},gi=class extends Ae{constructor(e,i,t,n){super(e,i),this.error=t,this.target=n,this.type=re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},an=class extends Ae{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jr=class extends Ae{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zr=class extends Ae{constructor(e,i,t,n,s){super(e,i),this.urlAfterRedirects=t,this.state=n,this.shouldActivate=s,this.type=re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wr=class extends Ae{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gr=class extends Ae{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qr=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Yr=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Xr=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qr=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kr=class{constructor(e){this.snapshot=e,this.type=re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zr=class{constructor(e){this.snapshot=e,this.type=re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ln=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=re.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},mi=class{},Rt=class{constructor(e,i){this.url=e,this.navigationBehaviorOptions=i}};function pc(r,e){return r.providers&&!r._injector&&(r._injector=mr(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Ie(r){return r.outlet||P}function fc(r,e){let i=r.filter(t=>Ie(t)===e);return i.push(...r.filter(t=>Ie(t)!==e)),i}function Si(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var Jr=class{get injector(){return Si(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ei(this.rootInjector),this.attachRef=null}},Ei=(()=>{let e=class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,n){let s=this.getOrCreateContext(t);s.outlet=n,this.contexts.set(t,s)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Jr(this.rootInjector),this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(n){return new(n||e)(U(Yt))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),cn=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=es(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=es(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=ts(e,this._root);return i.length<2?[]:i[i.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return ts(e,this._root).map(i=>i.value)}};function es(r,e){if(r===e.value)return e;for(let i of e.children){let t=es(r,i);if(t)return t}return null}function ts(r,e){if(r===e.value)return[e];for(let i of e.children){let t=ts(r,i);if(t.length)return t.unshift(e),t}return[]}var we=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function St(r){let e={};return r&&r.children.forEach(i=>e[i.value.outlet]=i),e}var hn=class extends cn{constructor(e,i){super(e),this.snapshot=i,hs(this,e)}toString(){return this.snapshot.toString()}};function ga(r){let e=gc(r),i=new De([new st("",{})]),t=new De({}),n=new De({}),s=new De({}),o=new De(""),a=new It(i,t,s,o,n,P,r,e.root);return a.snapshot=e.root,new hn(new we(a,[]),e)}function gc(r){let e={},i={},t={},n="",s=new xt([],e,t,n,i,P,r,null,{});return new dn("",new we(s,[]))}var It=class{constructor(e,i,t,n,s,o,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=n,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(W(c=>c[_i]))??R(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>Dt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>Dt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function un(r,e,i="emptyOnly"){let t,{routeConfig:n}=r;return e!==null&&(i==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:b(b({},e.params),r.params),data:b(b({},e.data),r.data),resolve:b(b(b(b({},r.data),e.data),n?.data),r._resolvedData)}:t={params:b({},r.params),data:b({},r.data),resolve:b(b({},r.data),r._resolvedData??{})},n&&va(n)&&(t.resolve[_i]=n.title),t}var xt=class{get title(){return this.data?.[_i]}constructor(e,i,t,n,s,o,a,l,c){this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Dt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Dt(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},dn=class extends cn{constructor(e,i){super(i),this.url=e,hs(this,i)}toString(){return ma(this._root)}};function hs(r,e){e.value._routerState=r,e.children.forEach(i=>hs(r,i))}function ma(r){let e=r.children.length>0?` { ${r.children.map(ma).join(", ")} } `:"";return`${r.value}${e}`}function Vr(r){if(r.snapshot){let e=r.snapshot,i=r._futureSnapshot;r.snapshot=i,Ve(e.queryParams,i.queryParams)||r.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&r.fragmentSubject.next(i.fragment),Ve(e.params,i.params)||r.paramsSubject.next(i.params),Bl(e.url,i.url)||r.urlSubject.next(i.url),Ve(e.data,i.data)||r.dataSubject.next(i.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function is(r,e){let i=Ve(r.params,e.params)&&Gl(r.url,e.url),t=!r.parent!=!e.parent;return i&&!t&&(!r.parent||is(r.parent,e.parent))}function va(r){return typeof r.title=="string"||r.title===null}var us=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=P,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=A(Ei),this.location=A(Js),this.changeDetector=A(ze),this.inputBinder=A(vn,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:s}=t.name;if(n)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Y(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Y(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Y(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new Y(4013,!1);this._activatedRoute=t;let s=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new ns(t,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:n}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=vt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Fi]});let r=e;return r})(),ns=class r{__ngOutletInjector(e){return new r(this.route,this.childContexts,e)}constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===It?this.route:e===Ei?this.childContexts:this.parent.get(e,i)}},vn=new G(""),Xo=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:n}=t,s=Vi([n.queryParams,n.params,n.data]).pipe(Re(([o,a,l],c)=>(l=b(b(b({},o),a),l),c===0?R(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(t);return}let a=bo(n.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,s)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function mc(r,e,i){let t=vi(r,e._root,i?i._root:void 0);return new hn(t,e)}function vi(r,e,i){if(i&&r.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let n=vc(r,e,i);return new we(t,n)}else{if(r.shouldAttach(e.value)){let s=r.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>vi(r,a)),o}}let t=yc(e.value),n=e.children.map(s=>vi(r,s));return new we(t,n)}}function vc(r,e,i){return e.children.map(t=>{for(let n of i.children)if(r.shouldReuseRoute(t.value,n.value.snapshot))return vi(r,t,n);return vi(r,t)})}function yc(r){return new It(new De(r.url),new De(r.params),new De(r.queryParams),new De(r.fragment),new De(r.data),r.outlet,r.component,r)}var yi=class{constructor(e,i){this.redirectTo=e,this.navigationBehaviorOptions=i}},ya="ngNavigationCancelingError";function pn(r,e){let{redirectTo:i,navigationBehaviorOptions:t}=pi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=wa(!1,be.Redirect);return n.url=i,n.navigationBehaviorOptions=t,n}function wa(r,e){let i=new Error(`NavigationCancelingError: ${r||""}`);return i[ya]=!0,i.cancellationCode=e,i}function wc(r){return ba(r)&&pi(r.url)}function ba(r){return!!r&&r[ya]}var bc=(r,e,i,t)=>W(n=>(new rs(e,n.targetRouterState,n.currentRouterState,i,t).activate(r),n)),rs=class{constructor(e,i,t,n,s){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=n,this.inputBindingEnabled=s}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),Vr(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let n=St(i);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,n[o],t),delete n[o]}),Object.values(n).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(n===s)if(n.component){let o=t.getContext(n.outlet);o&&this.deactivateChildRoutes(e,i,o.children)}else this.deactivateChildRoutes(e,i,t);else s&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=St(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);if(t&&t.outlet){let o=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=St(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let n=St(i);e.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],t),this.forwardEvent(new Zr(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Qr(e.value.snapshot))}activateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(Vr(n),n===s)if(n.component){let o=t.getOrCreateContext(n.outlet);this.activateChildRoutes(e,i,o.children)}else this.activateChildRoutes(e,i,t);else if(n.component){let o=t.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vr(a.route.value),this.activateChildRoutes(e,null,o.children)}else o.attachRef=null,o.route=n,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(e,null,o.children)}else this.activateChildRoutes(e,null,t)}},fn=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ot=class{constructor(e,i){this.component=e,this.route=i}};function _c(r,e,i){let t=r._root,n=e?e._root:null;return li(t,n,i,[t.value])}function Cc(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function Pt(r,e){let i=Symbol(),t=e.get(r,i);return t===i?typeof r=="function"&&!Bs(r)?r:e.get(r):t}function li(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=St(e);return r.children.forEach(o=>{Sc(o,s[o.value.outlet],i,t.concat([o.value]),n),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>di(a,i.getContext(o),n)),n}function Sc(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=e?e.value:null,a=i?i.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ec(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new fn(t)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?li(r,e,a?a.children:null,t,n):li(r,e,i,t,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new Ot(a.outlet.component,o))}else o&&di(e,a,n),n.canActivateChecks.push(new fn(t)),s.component?li(r,null,a?a.children:null,t,n):li(r,null,i,t,n);return n}function Ec(r,e,i){if(typeof i=="function")return i(r,e);switch(i){case"pathParamsChange":return!ot(r.url,e.url);case"pathParamsOrQueryParamsChange":return!ot(r.url,e.url)||!Ve(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!is(r,e)||!Ve(r.queryParams,e.queryParams);case"paramsChange":default:return!is(r,e)}}function di(r,e,i){let t=St(r),n=r.value;Object.entries(t).forEach(([s,o])=>{n.component?e?di(o,e.children.getContext(s),i):di(o,null,i):di(o,e,i)}),n.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new Ot(e.outlet.component,n)):i.canDeactivateChecks.push(new Ot(null,n)):i.canDeactivateChecks.push(new Ot(null,n))}function xi(r){return typeof r=="function"}function xc(r){return typeof r=="boolean"}function Oc(r){return r&&xi(r.canLoad)}function Dc(r){return r&&xi(r.canActivate)}function Mc(r){return r&&xi(r.canActivateChild)}function Ac(r){return r&&xi(r.canDeactivate)}function Rc(r){return r&&xi(r.canMatch)}function _a(r){return r instanceof Ls||r?.name==="EmptyError"}var Ji=Symbol("INITIAL_VALUE");function Tt(){return Re(r=>Vi(r.map(e=>e.pipe(mt(1),Us(Ji)))).pipe(W(e=>{for(let i of e)if(i!==!0){if(i===Ji)return Ji;if(i===!1||Ic(i))return i}return!0}),je(e=>e!==Ji),mt(1)))}function Ic(r){return pi(r)||r instanceof yi}function Tc(r,e){return ve(i=>{let{targetSnapshot:t,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=i;return o.length===0&&s.length===0?R(z(b({},i),{guardsResult:!0})):Pc(o,t,n,r).pipe(ve(a=>a&&xc(a)?kc(t,s,r,e):R(a)),W(a=>z(b({},i),{guardsResult:a})))})}function Pc(r,e,i,t){return me(r).pipe(ve(n=>Fc(n.component,n.route,i,e,t)),Xe(n=>n!==!0,!0))}function kc(r,e,i,t){return me(e).pipe(gt(n=>Vs(Vc(n.route.parent,t),Lc(n.route,t),Hc(r,n.path,i),Nc(r,n.route,i))),Xe(n=>n!==!0,!0))}function Lc(r,e){return r!==null&&e&&e(new Kr(r)),R(!0)}function Vc(r,e){return r!==null&&e&&e(new Xr(r)),R(!0)}function Nc(r,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return R(!0);let n=t.map(s=>nr(()=>{let o=Si(e)??i,a=Pt(s,o),l=Dc(a)?a.canActivate(e,r):Le(o,()=>a(e,r));return Je(l).pipe(Xe())}));return R(n).pipe(Tt())}function Hc(r,e,i){let t=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Cc(o)).filter(o=>o!==null).map(o=>nr(()=>{let a=o.guards.map(l=>{let c=Si(o.node)??i,d=Pt(l,c),C=Mc(d)?d.canActivateChild(t,r):Le(c,()=>d(t,r));return Je(C).pipe(Xe())});return R(a).pipe(Tt())}));return R(s).pipe(Tt())}function Fc(r,e,i,t,n){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return R(!0);let o=s.map(a=>{let l=Si(e)??n,c=Pt(a,l),d=Ac(c)?c.canDeactivate(r,e,i,t):Le(l,()=>c(r,e,i,t));return Je(d).pipe(Xe())});return R(o).pipe(Tt())}function Uc(r,e,i,t){let n=e.canLoad;if(n===void 0||n.length===0)return R(!0);let s=n.map(o=>{let a=Pt(o,r),l=Oc(a)?a.canLoad(e,i):Le(r,()=>a(e,i));return Je(l)});return R(s).pipe(Tt(),Ca(t))}function Ca(r){return Ps(J(e=>{if(typeof e!="boolean")throw pn(r,e)}),W(e=>e===!0))}function $c(r,e,i,t){let n=e.canMatch;if(!n||n.length===0)return R(!0);let s=n.map(o=>{let a=Pt(o,r),l=Rc(a)?a.canMatch(e,i):Le(r,()=>a(e,i));return Je(l)});return R(s).pipe(Tt(),Ca(t))}var wi=class{constructor(e){this.segmentGroup=e||null}},bi=class extends Error{constructor(e){super(),this.urlTree=e}};function Ct(r){return Gt(new wi(r))}function Bc(r){return Gt(new Y(4e3,!1))}function jc(r){return Gt(wa(!1,be.GuardRejected))}var ss=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],n=i.root;for(;;){if(t=t.concat(n.segments),n.numberOfChildren===0)return R(t);if(n.numberOfChildren>1||!n.children[P])return Bc(`${e.redirectTo}`);n=n.children[P]}}applyRedirectCommands(e,i,t,n,s){if(typeof i!="string"){let a=i,{queryParams:l,fragment:c,routeConfig:d,url:C,outlet:O,params:k,data:oe,title:Ee}=n,fe=Le(s,()=>a({params:k,data:oe,queryParams:l,fragment:c,routeConfig:d,url:C,outlet:O,title:Ee}));if(fe instanceof Ge)throw new bi(fe);i=fe}let o=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i[0]==="/")throw new bi(o);return o}applyRedirectCreateUrlTree(e,i,t,n){let s=this.createSegmentGroup(e,i.root,t,n);return new Ge(s,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([n,s])=>{if(typeof s=="string"&&s[0]===":"){let a=s.substring(1);t[n]=i[a]}else t[n]=s}),t}createSegmentGroup(e,i,t,n){let s=this.createSegments(e,i.segments,t,n),o={};return Object.entries(i.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,t,n)}),new F(s,o)}createSegments(e,i,t,n){return i.map(s=>s.path[0]===":"?this.findPosParam(e,s,n):this.findOrReturn(s,t))}findPosParam(e,i,t){let n=t[i.path.substring(1)];if(!n)throw new Y(4001,!1);return n}findOrReturn(e,i){let t=0;for(let n of i){if(n.path===e.path)return i.splice(t),n;t++}return e}},os={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function zc(r,e,i,t,n){let s=Sa(r,e,i);return s.matched?(t=pc(e,t),$c(t,e,i,n).pipe(W(o=>o===!0?s:b({},os)))):R(s)}function Sa(r,e,i){if(e.path==="**")return Wc(i);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||i.length>0)?b({},os):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let n=(e.matcher||$l)(i,r,e);if(!n)return b({},os);let s={};Object.entries(n.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=n.consumed.length>0?b(b({},s),n.consumed[n.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:i.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function Wc(r){return{matched:!0,parameters:r.length>0?ia(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function Qo(r,e,i,t){return i.length>0&&Yc(r,i,t)?{segmentGroup:new F(e,qc(t,new F(i,r.children))),slicedSegments:[]}:i.length===0&&Xc(r,i,t)?{segmentGroup:new F(r.segments,Gc(r,i,t,r.children)),slicedSegments:i}:{segmentGroup:new F(r.segments,r.children),slicedSegments:i}}function Gc(r,e,i,t){let n={};for(let s of i)if(yn(r,e,s)&&!t[Ie(s)]){let o=new F([],{});n[Ie(s)]=o}return b(b({},t),n)}function qc(r,e){let i={};i[P]=e;for(let t of r)if(t.path===""&&Ie(t)!==P){let n=new F([],{});i[Ie(t)]=n}return i}function Yc(r,e,i){return i.some(t=>yn(r,e,t)&&Ie(t)!==P)}function Xc(r,e,i){return i.some(t=>yn(r,e,t))}function yn(r,e,i){return(r.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Qc(r,e,i){return e.length===0&&!r.children[i]}var as=class{};function Kc(r,e,i,t,n,s,o="emptyOnly"){return new ls(r,e,i,t,n,o,s).recognize()}var Zc=31,ls=class{constructor(e,i,t,n,s,o,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=n,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ss(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Y(4002,`'${e.segmentGroup}'`)}recognize(){let e=Qo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(({children:i,rootSnapshot:t})=>{let n=new we(t,i),s=new dn("",n),o=oc(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),{state:s,tree:o}}))}match(e){let i=new xt([],Object.freeze({}),Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),P,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,P,i).pipe(W(t=>({children:t,rootSnapshot:i})),ft(t=>{if(t instanceof bi)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof wi?this.noMatchError(t):t}))}processSegmentGroup(e,i,t,n,s){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t,s):this.processSegment(e,i,t,t.segments,n,!0,s).pipe(W(o=>o instanceof we?[o]:[]))}processChildren(e,i,t,n){let s=[];for(let o of Object.keys(t.children))o==="primary"?s.unshift(o):s.push(o);return me(s).pipe(gt(o=>{let a=t.children[o],l=fc(i,o);return this.processSegmentGroup(e,l,a,o,n)}),Fs((o,a)=>(o.push(...a),o)),rr(null),Hs(),ve(o=>{if(o===null)return Ct(t);let a=Ea(o);return Jc(a),R(a)}))}processSegment(e,i,t,n,s,o,a){return me(i).pipe(gt(l=>this.processSegmentAgainstRoute(l._injector??e,i,l,t,n,s,o,a).pipe(ft(c=>{if(c instanceof wi)return R(null);throw c}))),Xe(l=>!!l),ft(l=>{if(_a(l))return Qc(t,n,s)?R(new as):Ct(t);throw l}))}processSegmentAgainstRoute(e,i,t,n,s,o,a,l){return Ie(t)!==o&&(o===P||!yn(n,s,t))?Ct(n):t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,t,s,o,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,t,s,o,l):Ct(n)}expandSegmentAgainstRouteUsingRedirect(e,i,t,n,s,o,a){let{matched:l,parameters:c,consumedSegments:d,positionalParamSegments:C,remainingSegments:O}=Sa(i,n,s);if(!l)return Ct(i);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Zc&&(this.allowRedirects=!1));let k=new xt(s,c,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(n),Ie(n),n.component??n._loadedComponent??null,n,Zo(n)),oe=un(k,a,this.paramsInheritanceStrategy);k.params=Object.freeze(oe.params),k.data=Object.freeze(oe.data);let Ee=this.applyRedirects.applyRedirectCommands(d,n.redirectTo,C,k,e);return this.applyRedirects.lineralizeSegments(n,Ee).pipe(ve(fe=>this.processSegment(e,t,i,fe.concat(O),o,!1,a)))}matchSegmentAgainstRoute(e,i,t,n,s,o){let a=zc(i,t,n,e,this.urlSerializer);return t.path==="**"&&(i.children={}),a.pipe(Re(l=>l.matched?(e=t._injector??e,this.getChildConfig(e,t,n).pipe(Re(({routes:c})=>{let d=t._loadedInjector??e,{parameters:C,consumedSegments:O,remainingSegments:k}=l,oe=new xt(O,C,Object.freeze(b({},this.urlTree.queryParams)),this.urlTree.fragment,Ko(t),Ie(t),t.component??t._loadedComponent??null,t,Zo(t)),Ee=un(oe,o,this.paramsInheritanceStrategy);oe.params=Object.freeze(Ee.params),oe.data=Object.freeze(Ee.data);let{segmentGroup:fe,slicedSegments:Be}=Qo(i,O,k,c);if(Be.length===0&&fe.hasChildren())return this.processChildren(d,c,fe,oe).pipe(W(ut=>new we(oe,ut)));if(c.length===0&&Be.length===0)return R(new we(oe,[]));let $t=Ie(t)===s;return this.processSegment(d,c,fe,Be,$t?P:s,!0,oe).pipe(W(ut=>new we(oe,ut instanceof we?[ut]:[])))}))):Ct(i)))}getChildConfig(e,i,t){return i.children?R({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?R({routes:i._loadedRoutes,injector:i._loadedInjector}):Uc(e,i,t,this.urlSerializer).pipe(ve(n=>n?this.configLoader.loadChildren(e,i).pipe(J(s=>{i._loadedRoutes=s.routes,i._loadedInjector=s.injector})):jc(i))):R({routes:[],injector:e})}};function Jc(r){r.sort((e,i)=>e.value.outlet===P?-1:i.value.outlet===P?1:e.value.outlet.localeCompare(i.value.outlet))}function eh(r){let e=r.value.routeConfig;return e&&e.path===""}function Ea(r){let e=[],i=new Set;for(let t of r){if(!eh(t)){e.push(t);continue}let n=e.find(s=>t.value.routeConfig===s.value.routeConfig);n!==void 0?(n.children.push(...t.children),i.add(n)):e.push(t)}for(let t of i){let n=Ea(t.children);e.push(new we(t.value,n))}return e.filter(t=>!i.has(t))}function Ko(r){return r.data||{}}function Zo(r){return r.resolve||{}}function th(r,e,i,t,n,s){return ve(o=>Kc(r,e,i,t,o.extractedUrl,n,s).pipe(W(({state:a,tree:l})=>z(b({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function ih(r,e){return ve(i=>{let{targetSnapshot:t,guards:{canActivateChecks:n}}=i;if(!n.length)return R(i);let s=new Set(n.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of xa(l))o.add(c);let a=0;return me(o).pipe(gt(l=>s.has(l)?nh(l,t,r,e):(l.data=un(l,l.parent,r).resolve,R(void 0))),J(()=>a++),or(1),ve(l=>a===o.size?R(i):Ye))})}function xa(r){let e=r.children.map(i=>xa(i)).flat();return[r,...e]}function nh(r,e,i,t){let n=r.routeConfig,s=r._resolve;return n?.title!==void 0&&!va(n)&&(s[_i]=n.title),rh(s,r,e,t).pipe(W(o=>(r._resolvedData=o,r.data=un(r,r.parent,i).resolve,null)))}function rh(r,e,i,t){let n=Fr(r);if(n.length===0)return R({});let s={};return me(n).pipe(ve(o=>sh(r[o],e,i,t).pipe(Xe(),J(a=>{if(a instanceof yi)throw pn(new Mt,a);s[o]=a}))),or(1),Ns(s),ft(o=>_a(o)?Ye:Gt(o)))}function sh(r,e,i,t){let n=Si(e)??t,s=Pt(r,n),o=s.resolve?s.resolve(e,i):Le(n,()=>s(e,i));return Je(o)}function Nr(r){return Re(e=>{let i=r(e);return i?me(i).pipe(W(()=>e)):R(e)})}var Oa=(()=>{let e=class e{buildTitle(t){let n,s=t.root;for(;s!==void 0;)n=this.getResolvedTitleForRoute(s)??n,s=s.children.find(o=>o.outlet===P);return n}getResolvedTitleForRoute(t){return t.data[_i]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>A(oh),providedIn:"root"});let r=e;return r})(),oh=(()=>{let e=class e extends Oa{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}};e.\u0275fac=function(n){return new(n||e)(U(jo))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Oi=new G("",{providedIn:"root",factory:()=>({})}),ah=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[ho],decls:1,vars:0,template:function(n,s){n&1&&Z(0,"router-outlet")},dependencies:[us],encapsulation:2});let r=e;return r})();function ds(r){let e=r.children&&r.children.map(ds),i=e?z(b({},r),{children:e}):b({},r);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==P&&(i.component=ah),i}var gn=new G(""),ps=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A(Gi)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return R(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=Je(t.loadComponent()).pipe(W(Da),J(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ni(()=>{this.componentLoaders.delete(t)})),s=new tr(n,()=>new Oe).pipe(er());return this.componentLoaders.set(t,s),s}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return R({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=lh(n,this.compiler,t,this.onLoadEndListener).pipe(Ni(()=>{this.childrenLoaders.delete(n)})),a=new tr(o,()=>new Oe).pipe(er());return this.childrenLoaders.set(n,a),a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function lh(r,e,i,t){return Je(r.loadChildren()).pipe(W(Da),ve(n=>n instanceof to||Array.isArray(n)?R(n):me(e.compileModuleAsync(n))),W(n=>{t&&t(r);let s,o,a=!1;return Array.isArray(n)?(o=n,a=!0):(s=n.create(i).injector,o=s.get(gn,[],{optional:!0,self:!0}).flat()),{routes:o.map(ds),injector:s}}))}function ch(r){return r&&typeof r=="object"&&"default"in r}function Da(r){return ch(r)?r.default:r}var fs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>A(hh),providedIn:"root"});let r=e;return r})(),hh=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Ma=new G(""),Aa=new G("");function uh(r,e,i){let t=r.get(Aa),n=r.get(pe);return r.get(ue).runOutsideAngular(()=>{if(!n.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=n.startViewTransition(()=>(s(),dh(r))),{onViewTransitionCreated:l}=t;return l&&Le(r,()=>l({transition:a,from:e,to:i})),o})}function dh(r){return new Promise(e=>{io({read:()=>setTimeout(e)},{injector:r})})}var ph=new G(""),gs=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Oe,this.transitionAbortSubject=new Oe,this.configLoader=A(ps),this.environmentInjector=A(Yt),this.urlSerializer=A(Ci),this.rootContexts=A(Ei),this.location=A(ti),this.inputBindingEnabled=A(vn,{optional:!0})!==null,this.titleStrategy=A(Oa),this.options=A(Oi,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(fs),this.createViewTransition=A(Ma,{optional:!0}),this.navigationErrorHandler=A(ph,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>R(void 0),this.rootComponentType=null;let t=s=>this.events.next(new qr(s)),n=s=>this.events.next(new Yr(s));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(z(b(b({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,s){return this.transitions=new De({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:ui,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(je(o=>o.id!==0),W(o=>z(b({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Re(o=>{let a=!1,l=!1;return R(o).pipe(Re(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",be.SupersededByNewNavigation),Ye;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?z(b({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),C=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&C!=="reload"){let O="";return this.events.next(new Ze(c.id,this.urlSerializer.serialize(c.rawUrl),O,on.IgnoredSameUrlNavigation)),c.resolve(!1),Ye}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return R(c).pipe(Re(O=>{let k=this.transitions?.getValue();return this.events.next(new At(O.id,this.urlSerializer.serialize(O.extractedUrl),O.source,O.restoredState)),k!==this.transitions?.getValue()?Ye:Promise.resolve(O)}),th(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),J(O=>{o.targetSnapshot=O.targetSnapshot,o.urlAfterRedirects=O.urlAfterRedirects,this.currentNavigation=z(b({},this.currentNavigation),{finalUrl:O.urlAfterRedirects});let k=new an(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(k)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:O,extractedUrl:k,source:oe,restoredState:Ee,extras:fe}=c,Be=new At(O,this.urlSerializer.serialize(k),oe,Ee);this.events.next(Be);let $t=ga(this.rootComponentType).snapshot;return this.currentTransition=o=z(b({},c),{targetSnapshot:$t,urlAfterRedirects:k,extras:z(b({},fe),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=k,R(o)}else{let O="";return this.events.next(new Ze(c.id,this.urlSerializer.serialize(c.extractedUrl),O,on.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Ye}}),J(c=>{let d=new jr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(d)}),W(c=>(this.currentTransition=o=z(b({},c),{guards:_c(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Tc(this.environmentInjector,c=>this.events.next(c)),J(c=>{if(o.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw pn(this.urlSerializer,c.guardsResult);let d=new zr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(d)}),je(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",be.GuardRejected),!1)),Nr(c=>{if(c.guards.canActivateChecks.length)return R(c).pipe(J(d=>{let C=new Wr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(C)}),Re(d=>{let C=!1;return R(d).pipe(ih(this.paramsInheritanceStrategy,this.environmentInjector),J({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(d,"",be.NoDataFromResolver)}}))}),J(d=>{let C=new Gr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(C)}))}),Nr(c=>{let d=C=>{let O=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&O.push(this.configLoader.loadComponent(C.routeConfig).pipe(J(k=>{C.component=k}),W(()=>{})));for(let k of C.children)O.push(...d(k));return O};return Vi(d(c.targetSnapshot.root)).pipe(rr(null),mt(1))}),Nr(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:c,targetSnapshot:d}=o,C=this.createViewTransition?.(this.environmentInjector,c.root,d.root);return C?me(C).pipe(W(()=>o)):R(o)}),W(c=>{let d=mc(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=z(b({},c),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),J(()=>{this.events.next(new mi)}),bc(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),mt(1),J({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),$s(this.transitionAbortSubject.pipe(J(c=>{throw c}))),Ni(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",be.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),ft(c=>{if(l=!0,ba(c))this.events.next(new We(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),wc(c)?this.events.next(new Rt(c.url,c.navigationBehaviorOptions)):o.resolve(!1);else{let d=new gi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0);try{let C=Le(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(C instanceof yi){let{message:O,cancellationCode:k}=pn(this.urlSerializer,C);this.events.next(new We(o.id,this.urlSerializer.serialize(o.extractedUrl),O,k)),this.events.next(new Rt(C.redirectTo,C.navigationBehaviorOptions))}else{this.events.next(d);let O=t.errorHandler(c);o.resolve(!!O)}}catch(C){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(C)}}return Ye}))}))}cancelNavigationTransition(t,n,s){let o=new We(t.id,this.urlSerializer.serialize(t.extractedUrl),n,s);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),n=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==n?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function fh(r){return r!==ui}var gh=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>A(mh),providedIn:"root"});let r=e;return r})(),cs=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},mh=(()=>{let e=class e extends cs{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=ur(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Ra=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>A(vh),providedIn:"root"});let r=e;return r})(),vh=(()=>{let e=class e extends Ra{constructor(){super(...arguments),this.location=A(ti),this.urlSerializer=A(Ci),this.options=A(Oi,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(fs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ge,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ga(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof At)this.stateMemento=this.createStateMemento();else if(t instanceof Ze)this.rawUrlTree=n.initialUrl;else if(t instanceof an){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(n.targetBrowserUrl??s,n)}}else t instanceof mi?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&!n.extras.skipLocationChange&&this.setBrowserUrl(n.targetBrowserUrl??this.rawUrlTree,n)):t instanceof We&&(t.code===be.GuardRejected||t.code===be.NoDataFromResolver)?this.restoreHistory(n):t instanceof gi?this.restoreHistory(n,!0):t instanceof qe&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let s=t instanceof Ge?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl){let o=this.browserPageId,a=b(b({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(s,"",a)}else{let o=b(b({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=ur(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),ci=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(ci||{});function Ia(r,e){r.events.pipe(je(i=>i instanceof qe||i instanceof We||i instanceof gi||i instanceof Ze),W(i=>i instanceof qe||i instanceof Ze?ci.COMPLETE:(i instanceof We?i.code===be.Redirect||i.code===be.SupersededByNewNavigation:!1)?ci.REDIRECTING:ci.FAILED),je(i=>i!==ci.REDIRECTING),mt(1)).subscribe(()=>{e()})}function yh(r){throw r}var wh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},bh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},at=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=A(ji),this.stateManager=A(Ra),this.options=A(Oi,{optional:!0})||{},this.pendingTasks=A(Ws),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(gs),this.urlSerializer=A(Ci),this.location=A(ti),this.urlHandlingStrategy=A(fs),this._events=new Oe,this.errorHandler=this.options.errorHandler||yh,this.navigated=!1,this.routeReuseStrategy=A(gh),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(gn,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(vn,{optional:!0}),this.eventsSubscription=new Ts,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof We&&n.code!==be.Redirect&&n.code!==be.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof qe)this.navigated=!0;else if(n instanceof Rt){let a=n.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(n.url,s.currentRawUrl),c=b({browserUrl:s.extras.browserUrl,info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:s.extras.replaceUrl||this.urlUpdateStrategy==="eager"||fh(s.source)},a);this.scheduleNavigation(l,ui,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Ch(n)&&this._events.next(n)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ui,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=b({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ds),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=n,d=c?this.currentUrlTree.fragment:a,C=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":C=b(b({},this.currentUrlTree.queryParams),o);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}C!==null&&(C=this.removeEmptyProps(C));let O;try{let k=s?s.snapshot:this.routerState.snapshot.root;O=ua(k)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),O=this.currentUrlTree.root}return da(O,t,C,d??null)}navigateByUrl(t,n={skipLocationChange:!1}){let s=pi(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ui,null,n)}navigate(t,n={skipLocationChange:!1}){return _h(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let s;if(n===!0?s=b({},wh):n===!1?s=b({},bh):s=n,pi(t))return Wo(this.currentUrlTree,t,s);let o=this.parseUrl(t);return Wo(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.entries(t).reduce((n,[s,o])=>(o!=null&&(n[s]=o),n),{})}scheduleNavigation(t,n,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,d;a?(l=a.resolve,c=a.reject,d=a.promise):d=new Promise((O,k)=>{l=O,c=k});let C=this.pendingTasks.add();return Ia(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(O=>Promise.reject(O))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function _h(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new Y(4008,!1)}function Ch(r){return!(r instanceof mi)&&!(r instanceof Rt)}var mn=class{};var Sh=(()=>{let e=class e{constructor(t,n,s,o,a){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(je(t=>t instanceof qe),gt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){let s=[];for(let o of n){o.providers&&!o._injector&&(o._injector=mr(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return me(s).pipe(ir())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let s;n.loadChildren&&n.canLoad===void 0?s=this.loader.loadChildren(t,n):s=R(null);let o=s.pipe(ve(a=>a===null?R(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(n.loadComponent&&!n._loadedComponent){let a=this.loader.loadComponent(n);return me([o,a]).pipe(ir())}else return o})}};e.\u0275fac=function(n){return new(n||e)(U(at),U(Gi),U(Yt),U(mn),U(ps))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Ta=new G(""),Eh=(()=>{let e=class e{constructor(t,n,s,o,a={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof At?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof qe?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ze&&t.code===on.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof ln&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new ln(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(n){$i()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function xh(r){return r.routerState.root}function Di(r,e){return{\u0275kind:r,\u0275providers:e}}function Oh(){let r=A(dr);return e=>{let i=r.get(Er);if(e!==i.components[0])return;let t=r.get(at),n=r.get(Pa);r.get(ms)===1&&t.initialNavigation(),r.get(ka,null,cr.Optional)?.setUpPreloading(),r.get(Ta,null,cr.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var Pa=new G("",{factory:()=>new Oe}),ms=new G("",{providedIn:"root",factory:()=>1});function Dh(){return Di(2,[{provide:ms,useValue:0},{provide:Sr,multi:!0,deps:[dr],useFactory:e=>{let i=e.get(So,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let n=e.get(at),s=e.get(Pa);Ia(n,()=>{t(!0)}),e.get(gs).afterPreactivation=()=>(t(!0),s.closed?R(void 0):s),n.initialNavigation()}))}}])}function Mh(){return Di(3,[{provide:Sr,multi:!0,useFactory:()=>{let e=A(at);return()=>{e.setUpLocationChangeListener()}}},{provide:ms,useValue:2}])}var ka=new G("");function Ah(r){return Di(0,[{provide:ka,useExisting:Sh},{provide:mn,useExisting:r}])}function Rh(){return Di(8,[Xo,{provide:vn,useExisting:Xo}])}function Ih(r){let e=[{provide:Ma,useValue:uh},{provide:Aa,useValue:b({skipNextTransition:!!r?.skipInitialTransition},r)}];return Di(9,e)}var Jo=new G("ROUTER_FORROOT_GUARD"),Th=[ti,{provide:Ci,useClass:Mt},at,Ei,{provide:It,useFactory:xh,deps:[at]},ps,[]],vs=(()=>{let e=class e{constructor(t){}static forRoot(t,n){return{ngModule:e,providers:[Th,[],{provide:gn,multi:!0,useValue:t},{provide:Jo,useFactory:Vh,deps:[[at,new hr,new js]]},{provide:Oi,useValue:n||{}},n?.useHash?kh():Lh(),Ph(),n?.preloadingStrategy?Ah(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Nh(n):[],n?.bindToComponentInputs?Rh().\u0275providers:[],n?.enableViewTransitions?Ih().\u0275providers:[],Hh()]}}static forChild(t){return{ngModule:e,providers:[{provide:gn,multi:!0,useValue:t}]}}};e.\u0275fac=function(n){return new(n||e)(U(Jo,8))},e.\u0275mod=ke({type:e}),e.\u0275inj=Pe({});let r=e;return r})();function Ph(){return{provide:Ta,useFactory:()=>{let r=A(To),e=A(ue),i=A(Oi),t=A(gs),n=A(Ci);return i.scrollOffset&&r.setOffset(i.scrollOffset),new Eh(n,t,r,e,i)}}}function kh(){return{provide:xr,useClass:xo}}function Lh(){return{provide:xr,useClass:Eo}}function Vh(r){return"guarded"}function Nh(r){return[r.initialNavigation==="disabled"?Mh().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Dh().\u0275providers:[]]}var ea=new G("");function Hh(){return[{provide:ea,useFactory:Oh},{provide:go,multi:!0,useExisting:ea}]}var Uh=[],La=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Pe({imports:[vs.forRoot(Uh),vs]});let r=e;return r})();var Ya=vl(Va());var kt=class{constructor(e,i,t,n,s){this.x=e,this.y=i,this.color=t,this.placedBy=n,this.timestamp=s}};var lt=class{constructor(e,i,t){this.x=e,this.y=i,this.color=t}};var Mi={production:!0,endpointUrl:"https://openplace.azurewebsites.net/api"};var _e=class extends Error{constructor(e,i){let t=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=t}},et=class extends Error{constructor(e="A timeout occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},se=class extends Error{constructor(e="An abort occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},bn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=t}},_n=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=t}},Cn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=t}},Ai=class extends Error{constructor(e){let i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}},Sn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=t}};var Lt=class{constructor(e,i,t){this.statusCode=e,this.statusText=i,this.content=t}},Ne=class{get(e,i){return this.send(z(b({},i),{method:"GET",url:e}))}post(e,i){return this.send(z(b({},i),{method:"POST",url:e}))}delete(e,i){return this.send(z(b({},i),{method:"DELETE",url:e}))}getCookieString(e){return""}};var f=function(r){return r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",r}(f||{});var He=class{constructor(){}log(e,i){}};He.instance=new He;var $h="8.0.7",$=class{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,t){if(!(e in i))throw new Error(`Unknown ${t} value: ${e}.`)}},B=class r{static get isBrowser(){return!r.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!r.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!r.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function tt(r,e){let i="";return Te(r)?(i=`Binary data of length ${r.byteLength}`,e&&(i+=`. Content: '${Bh(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,e&&(i+=`. Content: '${r}'`)),i}function Bh(r){let e=new Uint8Array(r),i="";return e.forEach(t=>{let n=t<16?"0":"";i+=`0x${n}${t.toString(16)} `}),i.substr(0,i.length-1)}function Te(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function xn(r,e,i,t,n,s){return T(this,null,function*(){let o={},[a,l]=Fe();o[a]=l,r.log(f.Trace,`(${e} transport) sending data. ${tt(n,s.logMessageContent)}.`);let c=Te(n)?"arraybuffer":"text",d=yield i.post(t,{content:n,headers:b(b({},o),s.headers),responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});r.log(f.Trace,`(${e} transport) request complete. Response status: ${d.statusCode}.`)})}function Na(r){return r===void 0?new ct(f.Information):r===null?He.instance:r.log!==void 0?r:new ct(r)}var En=class{constructor(e,i){this._subject=e,this._observer=i}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}},ct=class{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){let t=`[${new Date().toISOString()}] ${f[e]}: ${i}`;switch(e){case f.Critical:case f.Error:this.out.error(t);break;case f.Warning:this.out.warn(t);break;case f.Information:this.out.info(t);break;default:this.out.log(t);break}}}};function Fe(){let r="X-SignalR-User-Agent";return B.isNode&&(r="User-Agent"),[r,jh($h,zh(),Gh(),Wh())]}function jh(r,e,i,t){let n="Microsoft SignalR/",s=r.split(".");return n+=`${s[0]}.${s[1]}`,n+=` (${r}; `,e&&e!==""?n+=`${e}; `:n+="Unknown OS; ",n+=`${i}`,t?n+=`; ${t}`:n+="; Unknown Runtime Version",n+=")",n}function zh(){if(B.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Wh(){if(B.isNode)return process.versions.node}function Gh(){return B.isNode?"NodeJS":"Browser"}function On(r){return r.stack?r.stack:r.message?r.message:`${r}`}function Ha(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var Dn=class extends Ne{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||B.isNode){let i=typeof __webpack_require__=="function"?__non_webpack_require__:pt;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Ha());if(typeof AbortController>"u"){let i=typeof __webpack_require__=="function"?__non_webpack_require__:pt;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}send(e){return T(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new se;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let i=new this._abortControllerType,t;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),t=new se});let n=null;if(e.timeout){let l=e.timeout;n=setTimeout(()=>{i.abort(),this._logger.log(f.Warning,"Timeout from HTTP request."),t=new et},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Te(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:b({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw t||(this._logger.log(f.Warning,`Error from HTTP request. ${l}.`),l)}finally{n&&clearTimeout(n),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){let l=yield Fa(s,"text");throw new _e(l||s.statusText,s.status)}let a=yield Fa(s,e.responseType);return new Lt(s.status,s.statusText,a)})}getCookieString(e){let i="";return B.isNode&&this._jar&&this._jar.getCookies(e,(t,n)=>i=n.join("; ")),i}};function Fa(r,e){let i;switch(e){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=r.text();break}return i}var Mn=class extends Ne{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?new Promise((i,t)=>{let n=new XMLHttpRequest;n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Te(e.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let s=e.headers;s&&Object.keys(s).forEach(o=>{n.setRequestHeader(o,s[o])}),e.responseType&&(n.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),t(new se)}),e.timeout&&(n.timeout=e.timeout),n.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),n.status>=200&&n.status<300?i(new Lt(n.status,n.statusText,n.response||n.responseText)):t(new _e(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(f.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),t(new _e(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(f.Warning,"Timeout from HTTP request."),t(new et)},n.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var An=class extends Ne{constructor(e){if(super(),typeof fetch<"u"||B.isNode)this._httpClient=new Dn(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new Mn(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var Ce=class r{static write(e){return`${e}${r.RecordSeparator}`}static parse(e){if(e[e.length-1]!==r.RecordSeparator)throw new Error("Message is incomplete.");let i=e.split(r.RecordSeparator);return i.pop(),i}};Ce.RecordSeparatorCode=30;Ce.RecordSeparator=String.fromCharCode(Ce.RecordSeparatorCode);var Rn=class{writeHandshakeRequest(e){return Ce.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,t;if(Te(e)){let a=new Uint8Array(e),l=a.indexOf(Ce.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),t=a.byteLength>c?a.slice(c).buffer:null}else{let a=e,l=a.indexOf(Ce.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=a.substring(0,c),t=a.length>c?a.substring(c):null}let n=Ce.parse(i),s=JSON.parse(n[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[t,s]}};var I=function(r){return r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence",r}(I||{});var In=class{constructor(){this.observers=[]}next(e){for(let i of this.observers)i.next(e)}error(e){for(let i of this.observers)i.error&&i.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new En(this,e)}};var Tn=class{constructor(e,i,t){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=i,this._bufferSize=t}_send(e){return T(this,null,function*(){let i=this._protocol.writeMessage(e),t=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let n=()=>{},s=()=>{};Te(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(t=new Promise((o,a)=>{n=o,s=a})),this._messages.push(new ws(i,this._totalMessageCount,n,s))}try{this._reconnectInProgress||(yield this._connection.send(i))}catch{this._disconnected()}yield t})}_ack(e){let i=-1;for(let t=0;t<this._messages.length;t++){let n=this._messages[t];if(n._id<=e.sequenceId)i=t,Te(n._message)?this._bufferedByteCount-=n._message.byteLength:this._bufferedByteCount-=n._message.length,n._resolver();else if(this._bufferedByteCount<this._bufferSize)n._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==I.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return T(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:I.Sequence,sequenceId:e}));let i=this._messages;for(let t of i)yield this._connection.send(t._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let i of this._messages)i._rejector(e)}_isInvocationMessage(e){switch(e.type){case I.Invocation:case I.StreamItem:case I.Completion:case I.StreamInvocation:case I.CancelInvocation:return!0;case I.Close:case I.Sequence:case I.Ping:case I.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>T(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:I.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},ws=class{constructor(e,i,t,n){this._message=e,this._id=i,this._resolver=t,this._rejector=n}};var qh=30*1e3,Yh=15*1e3,Xh=1e5,j=function(r){return r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",r}(j||{}),Ri=class r{static create(e,i,t,n,s,o,a){return new r(e,i,t,n,s,o,a)}constructor(e,i,t,n,s,o,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(f.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},$.isRequired(e,"connection"),$.isRequired(i,"logger"),$.isRequired(t,"protocol"),this.serverTimeoutInMilliseconds=s??qh,this.keepAliveIntervalInMilliseconds=o??Yh,this._statefulReconnectBufferSize=a??Xh,this._logger=i,this._protocol=t,this.connection=e,this._reconnectPolicy=n,this._handshakeProtocol=new Rn,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=j.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:I.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==j.Disconnected&&this._connectionState!==j.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return T(this,null,function*(){if(this._connectionState!==j.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=j.Connecting,this._logger.log(f.Debug,"Starting HubConnection.");try{yield this._startInternal(),B.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=j.Connected,this._connectionStarted=!0,this._logger.log(f.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=j.Disconnected,this._logger.log(f.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return T(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((i,t)=>{this._handshakeResolver=i,this._handshakeRejecter=t});yield this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);let t={protocol:this._protocol.name,version:i};if(this._logger.log(f.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(f.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Tn(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(i){throw this._logger.log(f.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(i),i}})}stop(){return T(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===j.Disconnected)return this._logger.log(f.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===j.Disconnecting)return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let i=this._connectionState;return this._connectionState=j.Disconnecting,this._logger.log(f.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(f.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===j.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new se("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return T(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createStreamInvocation(e,i,n),o,a=new In;return a.cancelCallback=()=>{let l=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[s.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===I.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(s).catch(l=>{a.error(l),delete this._callbacks[s.invocationId]}),this._launchStreams(t,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._sendWithProtocol(this._createInvocation(e,i,!0,n));return this._launchStreams(t,s),s}invoke(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createInvocation(e,i,!1,n);return new Promise((a,l)=>{this._callbacks[s.invocationId]=(d,C)=>{if(C){l(C);return}else d&&(d.type===I.Completion?d.error?l(new Error(d.error)):a(d.result):l(new Error(`Unexpected message type: ${d.type}`)))};let c=this._sendWithProtocol(s).catch(d=>{l(d),delete this._callbacks[s.invocationId]});this._launchStreams(t,c)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();let t=this._methods[e];if(t)if(i){let n=t.indexOf(i);n!==-1&&(t.splice(n,1),t.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let i=this._protocol.parseMessages(e,this._logger);for(let t of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(t)))switch(t.type){case I.Invocation:this._invokeClientMethod(t).catch(n=>{this._logger.log(f.Error,`Invoke client method threw error: ${On(n)}`)});break;case I.StreamItem:case I.Completion:{let n=this._callbacks[t.invocationId];if(n){t.type===I.Completion&&delete this._callbacks[t.invocationId];try{n(t)}catch(s){this._logger.log(f.Error,`Stream callback threw error: ${On(s)}`)}}break}case I.Ping:break;case I.Close:{this._logger.log(f.Information,"Close message received from server.");let n=t.error?new Error("Server returned an error on close: "+t.error):void 0;t.allowReconnect===!0?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}case I.Ack:this._messageBuffer&&this._messageBuffer._ack(t);break;case I.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(t);break;default:this._logger.log(f.Warning,`Invalid message type: ${t.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,t;try{[t,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(n){let s="Error parsing handshake response: "+n;this._logger.log(f.Error,s);let o=new Error(s);throw this._handshakeRejecter(o),o}if(i.error){let n="Server returned handshake error: "+i.error;this._logger.log(f.Error,n);let s=new Error(n);throw this._handshakeRejecter(s),s}else this._logger.log(f.Debug,"Server handshake complete.");return this._handshakeResolver(),t}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>T(this,null,function*(){if(this._connectionState===j.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return T(this,null,function*(){let i=e.target.toLowerCase(),t=this._methods[i];if(!t){this._logger.log(f.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let n=t.slice(),s=!!e.invocationId,o,a,l;for(let c of n)try{let d=o;o=yield c.apply(this,e.arguments),s&&o&&d&&(this._logger.log(f.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(d){a=d,this._logger.log(f.Error,`A callback for the method '${i}' threw error '${d}'.`)}l?yield this._sendWithProtocol(l):s?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(l)):o&&this._logger.log(f.Error,`Result given for '${i}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(f.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new se("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===j.Disconnecting?this._completeClose(e):this._connectionState===j.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===j.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=j.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),B.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(f.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}_reconnect(e){return T(this,null,function*(){let i=Date.now(),t=0,n=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(t++,0,n);if(s===null){this._logger.log(f.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=j.Reconnecting,e?this._logger.log(f.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(f.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(f.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(f.Information,`Reconnect attempt number ${t} will start in ${s} ms.`),yield new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=j.Connected,this._logger.log(f.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(f.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(f.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===j.Disconnecting&&this._completeClose();return}n=o instanceof Error?o:new Error(o.toString()),s=this._getNextRetryDelay(t++,Date.now()-i,n)}}this._logger.log(f.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${t} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,i,t){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:t})}catch(n){return this._logger.log(f.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){let i=this._callbacks;this._callbacks={},Object.keys(i).forEach(t=>{let n=i[t];try{n(null,e)}catch(s){this._logger.log(f.Error,`Stream 'error' callback called with '${e}' threw error: ${On(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,t,n){if(t)return n.length!==0?{arguments:i,streamIds:n,target:e,type:I.Invocation}:{arguments:i,target:e,type:I.Invocation};{let s=this._invocationId;return this._invocationId++,n.length!==0?{arguments:i,invocationId:s.toString(),streamIds:n,target:e,type:I.Invocation}:{arguments:i,invocationId:s.toString(),target:e,type:I.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(let t in e)e[t].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t)))},error:n=>{let s;n instanceof Error?s=n.message:n&&n.toString?s=n.toString():s="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t,s)))},next:n=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(t,n)))}})}}_replaceStreamingParams(e){let i=[],t=[];for(let n=0;n<e.length;n++){let s=e[n];if(this._isObservable(s)){let o=this._invocationId;this._invocationId++,i[o]=s,t.push(o.toString()),e.splice(n,1)}}return[i,t]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,t){let n=this._invocationId;return this._invocationId++,t.length!==0?{arguments:i,invocationId:n.toString(),streamIds:t,target:e,type:I.StreamInvocation}:{arguments:i,invocationId:n.toString(),target:e,type:I.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:I.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:I.StreamItem}}_createCompletionMessage(e,i,t){return i?{error:i,invocationId:e,type:I.Completion}:{invocationId:e,result:t,type:I.Completion}}_createCloseMessage(){return{type:I.Close}}};var Qh=[0,2e3,1e4,3e4,null],Ii=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Qh}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var ht=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();var Pn=class extends Ne{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}send(e){return T(this,null,function*(){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let t=yield this._innerClient.send(e);return i&&t.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):t})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[ht.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[ht.Authorization]&&delete e.headers[ht.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var X=function(r){return r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",r}(X||{}),Q=function(r){return r[r.Text=1]="Text",r[r.Binary=2]="Binary",r}(Q||{});var kn=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Ti=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,i,t){this._httpClient=e,this._logger=i,this._pollAbort=new kn,this._options=t,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,i){return T(this,null,function*(){if($.isRequired(e,"url"),$.isRequired(i,"transferFormat"),$.isIn(i,Q,"transferFormat"),this._url=e,this._logger.log(f.Trace,"(LongPolling transport) Connecting."),i===Q.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[t,n]=Fe(),s=b({[t]:n},this._options.headers),o={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};i===Q.Binary&&(o.responseType="arraybuffer");let a=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${a}.`);let l=yield this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new _e(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)})}_poll(e,i){return T(this,null,function*(){try{for(;this._running;)try{let t=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${t}.`);let n=yield this._httpClient.get(t,i);n.statusCode===204?(this._logger.log(f.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):n.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),this._closeError=new _e(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(f.Trace,`(LongPolling transport) data received. ${tt(n.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(n.content)):this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof et?this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(f.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(f.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return T(this,null,function*(){return this._running?xn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return T(this,null,function*(){this._logger.log(f.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(f.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[i,t]=Fe();e[i]=t;let n={headers:b(b({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},s;try{yield this._httpClient.delete(this._url,n)}catch(o){s=o}s?s instanceof _e&&(s.statusCode===404?this._logger.log(f.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(f.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(f.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(f.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(f.Trace,e),this.onclose(this._closeError)}}};var Ln=class{constructor(e,i,t,n){this._httpClient=e,this._accessToken=i,this._logger=t,this._options=n,this.onreceive=null,this.onclose=null}connect(e,i){return T(this,null,function*(){return $.isRequired(e,"url"),$.isRequired(i,"transferFormat"),$.isIn(i,Q,"transferFormat"),this._logger.log(f.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((t,n)=>{let s=!1;if(i!==Q.Text){n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(B.isBrowser||B.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(e),l={};l.Cookie=a;let[c,d]=Fe();l[c]=d,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:b(b({},l),this._options.headers)})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(f.Trace,`(SSE transport) data received. ${tt(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{s?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(f.Information,`SSE connected to ${this._url}`),this._eventSource=o,s=!0,t()}}catch(a){n(a);return}})})}send(e){return T(this,null,function*(){return this._eventSource?xn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Vn=class{constructor(e,i,t,n,s,o){this._logger=t,this._accessTokenFactory=i,this._logMessageContent=n,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}connect(e,i){return T(this,null,function*(){$.isRequired(e,"url"),$.isRequired(i,"transferFormat"),$.isIn(i,Q,"transferFormat"),this._logger.log(f.Trace,"(WebSockets transport) Connecting.");let t;return this._accessTokenFactory&&(t=yield this._accessTokenFactory()),new Promise((n,s)=>{e=e.replace(/^http/,"ws");let o,a=this._httpClient.getCookieString(e),l=!1;if(B.isNode||B.isReactNative){let c={},[d,C]=Fe();c[d]=C,t&&(c[ht.Authorization]=`Bearer ${t}`),a&&(c[ht.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:b(b({},c),this._headers)})}else t&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(t)}`);o||(o=new this._webSocketConstructor(e)),i===Q.Binary&&(o.binaryType="arraybuffer"),o.onopen=c=>{this._logger.log(f.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,n()},o.onerror=c=>{let d=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?d=c.error:d="There was an error with the transport",this._logger.log(f.Information,`(WebSockets transport) ${d}.`)},o.onmessage=c=>{if(this._logger.log(f.Trace,`(WebSockets transport) data received. ${tt(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(d){this._close(d);return}},o.onclose=c=>{if(l)this._close(c);else{let d=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?d=c.error:d="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(d))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(f.Trace,`(WebSockets transport) sending data. ${tt(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(f.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var Ua=100,Nn=class{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,$.isRequired(e,"url"),this._logger=Na(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let t=null,n=null;if(B.isNode&&typeof pt<"u"){let s=typeof __webpack_require__=="function"?__non_webpack_require__:pt;t=s("ws"),n=s("eventsource")}!B.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:B.isNode&&!i.WebSocket&&t&&(i.WebSocket=t),!B.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:B.isNode&&!i.EventSource&&typeof n<"u"&&(i.EventSource=n),this._httpClient=new Pn(i.httpClient||new An(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}start(e){return T(this,null,function*(){if(e=e||Q.Binary,$.isIn(e,Q,"transferFormat"),this._logger.log(f.Debug,`Starting connection with transfer format '${Q[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(f.Error,i),yield this._stopPromise,Promise.reject(new se(i))}else if(this._connectionState!=="Connected"){let i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(f.Error,i),Promise.reject(new se(i))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new bs(this.transport)),this._sendQueue.send(e))}stop(e){return T(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return T(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(i){this._logger.log(f.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(f.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return T(this,null,function*(){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===X.WebSockets)this.transport=this._constructTransport(X.WebSockets),yield this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let t=null,n=0;do{if(t=yield this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new se("The connection was stopped during negotiation.");if(t.error)throw new Error(t.error);if(t.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(t.url&&(i=t.url),t.accessToken){let s=t.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}n++}while(t.url&&n<Ua);if(n===Ua&&t.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(i,this._options.transport,t,e)}this.transport instanceof Ti&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(f.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(f.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}})}_getNegotiationResponse(e){return T(this,null,function*(){let i={},[t,n]=Fe();i[t]=n;let s=this._resolveNegotiateUrl(e);this._logger.log(f.Debug,`Sending negotiation request: ${s}.`);try{let o=yield this._httpClient.post(s,{content:"",headers:b(b({},i),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));let a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ai("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof _e&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(f.Error,a),Promise.reject(new Ai(a))}})}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}_createTransport(e,i,t,n){return T(this,null,function*(){let s=this._createConnectUrl(e,t.connectionToken);if(this._isITransport(i)){this._logger.log(f.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,yield this._startTransport(s,n),this.connectionId=t.connectionId;return}let o=[],a=t.availableTransports||[],l=t;for(let c of a){let d=this._resolveTransportOrError(c,i,n,l?.useStatefulReconnect===!0);if(d instanceof Error)o.push(`${c.transport} failed:`),o.push(d);else if(this._isITransport(d)){if(this.transport=d,!l){try{l=yield this._getNegotiationResponse(e)}catch(C){return Promise.reject(C)}s=this._createConnectUrl(e,l.connectionToken)}try{yield this._startTransport(s,n),this.connectionId=l.connectionId;return}catch(C){if(this._logger.log(f.Error,`Failed to start the transport '${c.transport}': ${C}`),l=void 0,o.push(new Cn(`${c.transport} failed: ${C}`,X[c.transport])),this._connectionState!=="Connecting"){let O="Failed to select transport before stop() was called.";return this._logger.log(f.Debug,O),Promise.reject(new se(O))}}}}return o.length>0?Promise.reject(new Sn(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case X.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Vn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case X.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Ln(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case X.LongPolling:return new Ti(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=t=>T(this,null,function*(){let n=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,i),yield this.features.resend()}catch{n=!0}else{this._stopConnection(t);return}n&&this._stopConnection(t)}):this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(e,i)}_resolveTransportOrError(e,i,t,n){let s=X[e.transport];if(s==null)return this._logger.log(f.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(Kh(i,s))if(e.transferFormats.map(a=>Q[a]).indexOf(t)>=0){if(s===X.WebSockets&&!this._options.WebSocket||s===X.ServerSentEvents&&!this._options.EventSource)return this._logger.log(f.Debug,`Skipping transport '${X[s]}' because it is not supported in your environment.'`),new bn(`'${X[s]}' is not supported in your environment.`,s);this._logger.log(f.Debug,`Selecting transport '${X[s]}'.`);try{return this.features.reconnect=s===X.WebSockets?n:void 0,this._constructTransport(s)}catch(a){return a}}else return this._logger.log(f.Debug,`Skipping transport '${X[s]}' because it does not support the requested transfer format '${Q[t]}'.`),new Error(`'${X[s]}' does not support ${Q[t]}.`);else return this._logger.log(f.Debug,`Skipping transport '${X[s]}' because it was disabled by the client.`),new _n(`'${X[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(f.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(f.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(f.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(f.Error,`Connection disconnected with error '${e}'.`):this._logger.log(f.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(f.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(f.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!B.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let i=window.document.createElement("a");return i.href=e,this._logger.log(f.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){let i=new URL(e);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";let t=new URLSearchParams(i.searchParams);return t.has("negotiateVersion")||t.append("negotiateVersion",this._negotiateVersion.toString()),t.has("useStatefulReconnect")?t.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&t.append("useStatefulReconnect","true"),i.search=t.toString(),i.toString()}};function Kh(r,e){return!r||(e&r)!==0}var bs=class r{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Vt,this._transportResult=new Vt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Vt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return T(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Vt;let e=this._transportResult;this._transportResult=void 0;let i=typeof this._buffer[0]=="string"?this._buffer.join(""):r._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(i),e.resolve()}catch(t){e.reject(t)}}})}static _concatBuffers(e){let i=e.map(s=>s.byteLength).reduce((s,o)=>s+o),t=new Uint8Array(i),n=0;for(let s of e)t.set(new Uint8Array(s),n),n+=s.byteLength;return t.buffer}},Vt=class{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var Zh="json",Hn=class{constructor(){this.name=Zh,this.version=2,this.transferFormat=Q.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=He.instance);let t=Ce.parse(e),n=[];for(let s of t){let o=JSON.parse(s);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case I.Invocation:this._isInvocationMessage(o);break;case I.StreamItem:this._isStreamItemMessage(o);break;case I.Completion:this._isCompletionMessage(o);break;case I.Ping:break;case I.Close:break;case I.Ack:this._isAckMessage(o);break;case I.Sequence:this._isSequenceMessage(o);break;default:i.log(f.Information,"Unknown message type '"+o.type+"' ignored.");continue}n.push(o)}return n}writeMessage(e){return Ce.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}};var Jh={trace:f.Trace,debug:f.Debug,info:f.Information,information:f.Information,warn:f.Warning,warning:f.Warning,error:f.Error,critical:f.Critical,none:f.None};function eu(r){let e=Jh[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}var Pi=class{configureLogging(e){if($.isRequired(e,"logging"),tu(e))this.logger=e;else if(typeof e=="string"){let i=eu(e);this.logger=new ct(i)}else this.logger=new ct(e);return this}withUrl(e,i){return $.isRequired(e,"url"),$.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions=b(b({},this.httpConnectionOptions),i):this.httpConnectionOptions=z(b({},this.httpConnectionOptions),{transport:i}),this}withHubProtocol(e){return $.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Ii(e):this.reconnectPolicy=e:this.reconnectPolicy=new Ii,this}withServerTimeout(e){return $.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return $.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let i=new Nn(this.url,e);return Ri.create(i,this.logger||He.instance,this.protocol||new Hn,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function tu(r){return r.log!==void 0}var $a=(()=>{let e=class e{constructor(){this.hubConnection=new Pi().withUrl(Mi.endpointUrl+"/hub",{skipNegotiation:!0,transport:X.WebSockets}).withAutomaticReconnect().build()}startConnection(){return new Jn(t=>{this.hubConnection.start().then(()=>{console.log("Connection established with SignalR hub"),t.next(),t.complete()}).catch(n=>{console.error("Error connecting to SignalR hub:",n),t.error(n)})})}getState(){return this.hubConnection.state}receiveMessage(){return new Jn(t=>{this.hubConnection.on("RM",n=>{t.next(n)})})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Ba=new G("");var ru={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yf=z(b({},ru),{"[class.ng-submitted]":"isSubmitted"});var Se=typeof window<"u"?window:{screen:{},navigator:{}},Nt=(Se.matchMedia||function(){return{matches:!1}}).bind(Se),ja=!1,su={get passive(){return ja=!0}},za=function(){};Se.addEventListener&&Se.addEventListener("p",za,su);Se.removeEventListener&&Se.removeEventListener("p",za,!1);var Fn=ja,Kf="PointerEvent"in Se,_s="ontouchstart"in Se,ou="TouchEvent"in Se,au=_s||ou&&Nt("(any-pointer: coarse)").matches,Zf=(Se.navigator.maxTouchPoints||0)>0||au,Wa=Se.navigator.userAgent||"",lu=Nt("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Wa)&&Math.min(Se.screen.width||0,Se.screen.height||0)>=768,Jf=(Nt("(pointer: coarse)").matches||!Nt("(pointer: fine)").matches&&_s)&&!/Windows.*Firefox/.test(Wa),eg=Nt("(any-pointer: fine)").matches||Nt("(any-hover: hover)").matches||lu||!_s;var hu=(r,e,i)=>({tooltip:r,placement:e,content:i});function uu(r,e){}function du(r,e){r&1&&Ke(0,uu,0,0,"ng-template")}function pu(r,e){if(r&1&&(yr(0),Ke(1,du,1,0,null,1),wr()),r&2){let i=de();ee(),K("ngTemplateOutlet",i.template)("ngTemplateOutletContext",po(2,hu,i.tooltip,i.placement,i.content))}}function fu(r,e){if(r&1&&(yr(0),ne(1,"div",2),ei(2),le(),wr()),r&2){let i=de();ee(),Jt("title",i.tooltip)("data-tooltip-placement",i.placement),ee(),so(" ",i.content," ")}}var gu=["tooltipTemplate"],mu=["leftOuterSelectionBar"],vu=["rightOuterSelectionBar"],yu=["fullBar"],wu=["selectionBar"],bu=["minHandle"],_u=["maxHandle"],Cu=["floorLabel"],Su=["ceilLabel"],Eu=["minHandleLabel"],xu=["maxHandleLabel"],Ou=["combinedLabel"],Du=["ticksElement"],Mu=r=>({"ngx-slider-selected":r});function Au(r,e){if(r&1&&Z(0,"ngx-slider-tooltip-wrapper",32),r&2){let i=de().$implicit,t=de();K("template",t.tooltipTemplate)("tooltip",i.valueTooltip)("placement",i.valueTooltipPlacement)("content",i.value)}}function Ru(r,e){if(r&1&&Z(0,"span",33),r&2){let i=de().$implicit;K("innerText",i.legend)}}function Iu(r,e){if(r&1&&Z(0,"span",34),r&2){let i=de().$implicit;K("innerHTML",i.legend,Xs)}}function Tu(r,e){if(r&1&&(ne(0,"span",27),Z(1,"ngx-slider-tooltip-wrapper",28),Ke(2,Au,1,4,"ngx-slider-tooltip-wrapper",29)(3,Ru,1,1,"span",30)(4,Iu,1,1,"span",31),le()),r&2){let i=e.$implicit,t=de();K("ngClass",uo(8,Mu,i.selected))("ngStyle",i.style),ee(),K("template",t.tooltipTemplate)("tooltip",i.tooltip)("placement",i.tooltipPlacement),ee(),K("ngIf",i.value!==null&&i.value!==void 0),ee(),K("ngIf",i.legend!==null&&i.legend!==void 0&&t.allowUnsafeHtmlInSlider===!1),ee(),K("ngIf",i.legend!==null&&i.legend!==void 0&&(t.allowUnsafeHtmlInSlider===null||t.allowUnsafeHtmlInSlider===void 0||t.allowUnsafeHtmlInSlider))}}var Ue=function(r){return r[r.Low=0]="Low",r[r.High=1]="High",r[r.Floor=2]="Floor",r[r.Ceil=3]="Ceil",r[r.TickValue=4]="TickValue",r}(Ue||{}),Ft=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},Ga=new G("AllowUnsafeHtmlInSlider"),x=function(r){return r[r.Min=0]="Min",r[r.Max=1]="Max",r}(x||{}),Ss=class{value;highValue;pointerType},v=class{static isNullOrUndefined(e){return e==null}static areArraysEqual(e,i){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0}static linearValueToPosition(e,i,t){let n=t-i;return(e-i)/n}static logValueToPosition(e,i,t){e=Math.log(e),i=Math.log(i),t=Math.log(t);let n=t-i;return(e-i)/n}static linearPositionToValue(e,i,t){return e*(t-i)+i}static logPositionToValue(e,i,t){i=Math.log(i),t=Math.log(t);let n=e*(t-i)+i;return Math.exp(n)}static findStepIndex(e,i){let t=i.map(s=>Math.abs(e-s.value)),n=0;for(let s=0;s<i.length;s++)t[s]!==t[n]&&t[s]<t[n]&&(n=s);return n}},$e=class{static isTouchEvent(e){return window.TouchEvent!==void 0?e instanceof TouchEvent:e.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},q=class{static roundToPrecisionLimit(e,i){return+e.toPrecision(i)}static isModuloWithinPrecisionLimit(e,i,t){let n=Math.pow(10,-t);return Math.abs(e%i)<=n||Math.abs(Math.abs(e%i)-i)<=n}static clampToRange(e,i,t){return Math.min(Math.max(e,i),t)}},Un=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},$n=class{renderer;constructor(e){this.renderer=e}attachPassiveEventListener(e,i,t,n){if(Fn!==!0)return this.attachEventListener(e,i,t,n);let s=new Un;s.eventName=i,s.events=new Oe;let o=a=>{s.events.next(a)};return e.addEventListener(i,o,{passive:!0,capture:!1}),s.teardownCallback=()=>{e.removeEventListener(i,o,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?J(()=>{}):ar(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}detachEventListener(e){v.isNullOrUndefined(e.eventsSubscription)||(e.eventsSubscription.unsubscribe(),e.eventsSubscription=null),v.isNullOrUndefined(e.events)||(e.events.complete(),e.events=null),v.isNullOrUndefined(e.teardownCallback)||(e.teardownCallback(),e.teardownCallback=null)}attachEventListener(e,i,t,n){let s=new Un;s.eventName=i,s.events=new Oe;let o=a=>{s.events.next(a)};return s.teardownCallback=this.renderer.listen(e,i,o),s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?J(()=>{}):ar(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}},it=(()=>{class r{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(i,t,n){this.elemRef=i,this.renderer=t,this.changeDetectionRef=n,this.eventListenerHelper=new $n(this.renderer)}setAlwaysHide(i){this._alwaysHide=i,i?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(i){this._vertical=i,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(i){this._scale=i}setRotate(i){this._rotate=i,this.transform="rotate("+i+"deg)"}getRotate(){return this._rotate}setPosition(i){this._position!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=i,this._vertical?this.bottom=Math.round(i)+"px":this.left=Math.round(i)+"px"}calculateDimension(){let i=this.getBoundingClientRect();this.vertical?this._dimension=(i.bottom-i.top)*this.scale:this._dimension=(i.right-i.left)*this.scale}setDimension(i){this._dimension!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=i,this._vertical?this.height=Math.round(i)+"px":this.width=Math.round(i)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(i,t,n){let s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}onPassive(i,t,n){let s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}off(i){let t,n;v.isNullOrUndefined(i)?(t=[],n=this.eventListeners):(t=this.eventListeners.filter(s=>s.eventName!==i),n=this.eventListeners.filter(s=>s.eventName===i));for(let s of n)this.eventListenerHelper.detachEventListener(s);this.eventListeners=t}isRefDestroyed(){return v.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(t){return new(t||r)(te(yt),te(wt),te(ze))};static \u0275dir=vt({type:r,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(t,n){t&2&&vr("opacity",n.opacity)("visibility",n.visibility)("left",n.left)("bottom",n.bottom)("height",n.height)("width",n.width)("transform",n.transform)}})}return r})(),Cs=(()=>{class r extends it{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}focusIfNeeded(){document.activeElement!==this.elemRef.nativeElement&&this.elemRef.nativeElement.focus()}constructor(i,t,n){super(i,t,n)}static \u0275fac=function(t){return new(t||r)(te(yt),te(wt),te(ze))};static \u0275dir=vt({type:r,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,n){t&2&&(Jt("role",n.role)("tabindex",n.tabindex)("aria-orientation",n.ariaOrientation)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy)("aria-valuenow",n.ariaValueNow)("aria-valuetext",n.ariaValueText)("aria-valuemin",n.ariaValueMin)("aria-valuemax",n.ariaValueMax),bt("ngx-slider-active",n.active))},features:[gr]})}return r})(),Ht=(()=>{class r extends it{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(i,t,n,s){super(i,t,n),this.allowUnsafeHtmlInSlider=s}setValue(i){let t=!1;!this.alwaysHide&&(v.isNullOrUndefined(this.value)||this.value.length!==i.length||this.value.length>0&&this.dimension===0)&&(t=!0),this._value=i,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=i:this.elemRef.nativeElement.innerHTML=i,t&&this.calculateDimension()}static \u0275fac=function(t){return new(t||r)(te(yt),te(wt),te(ze),te(Ga,8))};static \u0275dir=vt({type:r,selectors:[["","ngxSliderLabel",""]],features:[gr]})}return r})(),Pu=(()=>{class r{template;tooltip;placement;content;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=nt({type:r,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,n){t&1&&Ke(0,pu,2,6,"ng-container",0)(1,fu,3,3,"ng-container",0),t&2&&(K("ngIf",n.template),ee(),K("ngIf",!n.template))},dependencies:[ii,Ro],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return r})(),Es=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},Bn=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},Ut=class{value;highValue;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue}},jn=class extends Ut{forceChange;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue&&e.forceChange===i.forceChange}};var ku={provide:Ba,useExisting:lr(()=>xs),multi:!0},xs=(()=>{class r{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;sliderElementNgxSliderClass=!0;value=null;valueChange=new Me;highValue=null;highValueChange=new Me;options=new Ft;userChangeStart=new Me;userChange=new Me;userChangeEnd=new Me;manualRefreshSubscription;set manualRefresh(i){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=i.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(i){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=i.subscribe(t=>{this.focusPointer(t)})}get range(){return!v.isNullOrUndefined(this.value)&&!v.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Oe;inputModelChangeSubscription=null;outputModelChangeSubject=new Oe;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Ft;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new Bn;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(i,t,n,s,o){this.renderer=i,this.elementRef=t,this.changeDetectionRef=n,this.zone=s,this.allowUnsafeHtmlInSlider=o,this.eventListenerHelper=new $n(this.renderer)}ngOnInit(){this.viewOptions=new Ft,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(i){!v.isNullOrUndefined(i.options)&&JSON.stringify(i.options.previousValue)!==JSON.stringify(i.options.currentValue)&&this.onChangeOptions(),(!v.isNullOrUndefined(i.value)||!v.isNullOrUndefined(i.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(i){i instanceof Array?(this.value=i[0],this.highValue=i[1]):this.value=i,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.viewOptions.disabled=i,this.updateDisabledState()}setAriaLabel(i){this.viewOptions.ariaLabel=i,this.updateAriaLabel()}onResize(i){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(sr(jn.compare),je(i=>!i.forceChange&&!i.internalChange)).subscribe(i=>this.applyInputModelChange(i))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(sr(jn.compare)).subscribe(i=>this.publishOutputModelChange(i))}subscribeResizeObserver(){$e.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){$e.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){v.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){v.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){v.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){v.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){v.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){v.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(i){return i===x.Min?this.minHandleElement:i===x.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===x.Min?this.viewLowValue:this.currentTrackingPointer===x.Max?this.viewHighValue:null}modelValueToViewValue(i){return v.isNullOrUndefined(i)?NaN:!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?v.findStepIndex(+i,this.viewOptions.stepsArray):+i}viewValueToModelValue(i){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(i):i}getStepValue(i){let t=this.viewOptions.stepsArray[i];return v.isNullOrUndefined(t)?NaN:t.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(i){let t=this.normaliseModelValues(i),n=!Ut.compare(i,t);n&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.range?this.viewHighValue=this.modelValueToViewValue(t.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:n,userEventInitiated:!1})}publishOutputModelChange(i){let t=()=>{this.valueChange.emit(i.value),this.range&&this.highValueChange.emit(i.highValue),v.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([i.value,i.highValue]):this.onChangeCallback(i.value)),v.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([i.value,i.highValue]):this.onTouchedCallback(i.value))};i.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(i){let t=new Ut;if(t.value=i.value,t.highValue=i.highValue,!v.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let n=v.findStepIndex(t.value,this.viewOptions.stepsArray);if(t.value=this.viewOptions.stepsArray[n].value,this.range){let s=v.findStepIndex(t.highValue,this.viewOptions.stepsArray);t.highValue=this.viewOptions.stepsArray[s].value}}return t}if(this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),this.viewOptions.enforceRange&&(t.value=q.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=q.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&i.value>i.highValue))if(this.viewOptions.noSwitching)t.value=t.highValue;else{let n=i.value;t.value=i.highValue,t.highValue=n}return t}renormaliseModelValues(){let i={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(i);Ut.compare(t,i)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let i=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let t=this.getOptionsInfluencingEventBindings(this.viewOptions),n=!v.areArraysEqual(i,t);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(n)}applyOptions(){if(this.viewOptions=new Ft,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!v.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!v.isNullOrUndefined(this.viewOptions.tickStep)||!v.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),v.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),v.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(i,t)=>i+" - "+t),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(i)):String(i))}applyFloorCeilOptions(){if(v.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),v.isNullOrUndefined(this.viewOptions.ceil)||v.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(i))}resetSlider(i=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),i&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(i){i!==x.Min&&i!==x.Max&&(i=x.Min),i===x.Min?this.minHandleElement.focus():this.range&&i===x.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){v.isNullOrUndefined(this.currentFocusPointer)||this.getPointerElement(this.currentFocusPointer).focusIfNeeded()}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let i=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(i||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.setVertical(this.viewOptions.vertical)}updateScale(){for(let i of this.getAllSliderElements())i.setScale(this.viewOptions.scale)}updateRotate(){for(let i of this.getAllSliderElements())i.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabel)?v.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?v.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Ue.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Ue.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){v.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let i=this.minHandleElement.dimension;this.handleHalfDimension=i/2,v.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-i,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let i=v.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&i.reverse();let n=v.isNullOrUndefined(this.viewOptions.tickValueStep)?v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,s=!1,o=i.map(a=>{let l=this.valueToPosition(a);this.viewOptions.vertical&&(l=this.maxHandlePosition-l);let c=t+"("+Math.round(l)+"px)",d=new Es;d.selected=this.isTickSelected(a),d.style={"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c,transform:c},d.selected&&!v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(d.style["background-color"]=this.getSelectionBarColor()),!d.selected&&!v.isNullOrUndefined(this.viewOptions.getTickColor)&&(d.style["background-color"]=this.getTickColor(a)),v.isNullOrUndefined(this.viewOptions.ticksTooltip)||(d.tooltip=this.viewOptions.ticksTooltip(a),d.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!v.isNullOrUndefined(n)&&q.isModuloWithinPrecisionLimit(a,n,this.viewOptions.precisionLimit)&&(d.value=this.getDisplayValue(a,Ue.TickValue),v.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(d.valueTooltip=this.viewOptions.ticksValuesTooltip(a),d.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let C=null;if(v.isNullOrUndefined(this.viewOptions.stepsArray))v.isNullOrUndefined(this.viewOptions.getLegend)||(C=this.viewOptions.getLegend(a));else{let O=this.viewOptions.stepsArray[a];v.isNullOrUndefined(this.viewOptions.getStepLegend)?v.isNullOrUndefined(O)||(C=O.legend):C=this.viewOptions.getStepLegend(O)}return v.isNullOrUndefined(C)||(d.legend=C,s=!0),d});if(this.sliderElementWithLegendClass!==s&&setTimeout(()=>{this.sliderElementWithLegendClass=s}),!v.isNullOrUndefined(this.ticks)&&this.ticks.length===o.length)for(let a=0;a<o.length;++a)Object.assign(this.ticks[a],o[a]);else this.ticks=o,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){if(!this.viewOptions.showTicks)return[];let i=v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],n=1+Math.floor(q.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/i,this.viewOptions.precisionLimit));for(let s=0;s<n;++s)t.push(q.roundToPrecisionLimit(this.viewOptions.floor+i*s,this.viewOptions.precisionLimit));return t}isTickSelected(i){if(!this.range)if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(i>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&i<=this.viewLowValue)return!0}else{let t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&i>=t&&i<=this.viewLowValue)return!0;if(this.viewLowValue<t&&i<=t&&i>=this.viewLowValue)return!0}return!!(this.range&&i>=this.viewLowValue&&i<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Ue.Floor)),this.floorLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(i)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Ue.Ceil)),this.ceilLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(i)}}updateHandles(i,t){i===x.Min?this.updateLowHandle(t):i===x.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(i,t){let n=i===x.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=t-n/2+this.handleHalfDimension,o=this.fullBarElement.dimension-n;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&i===x.Min||!this.viewOptions.rightToLeft&&i===x.Max?Math.min(s,o):Math.min(Math.max(s,0),o):s}updateLowHandle(i){this.minHandleElement.setPosition(i),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Ue.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(x.Min,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(x.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(i){this.maxHandleElement.setPosition(i),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Ue.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(x.Max,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(x.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let i=!1,t=!1,n=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),a=this.isLabelBelowFloorLabel(this.combinedLabelElement),l=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(n?(i=!0,this.floorLabelElement.hide()):(i=!1,this.floorLabelElement.show()),s?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){let c=this.combinedLabelElement.isVisible()?l:o,d=this.combinedLabelElement.isVisible()?a:n;c?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),d?this.floorLabelElement.hide():i||this.floorLabelElement.show()}}isLabelBelowFloorLabel(i){let t=i.position,n=i.dimension,s=this.floorLabelElement.position,o=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?t+n>=s-2:t<=s+o+2}isLabelAboveCeilLabel(i){let t=i.position,n=i.dimension,s=this.ceilLabelElement.position,o=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?t<=s+o+2:t+n>=s-2}updateSelectionBar(){let i=0,t=0,n=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),i=s;else if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))n?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),i=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,i=0);else{let o=this.viewOptions.showSelectionBarFromValue,a=this.valueToPosition(o);(this.viewOptions.rightToLeft?this.viewLowValue<=o:this.viewLowValue>o)?(t=this.minHandleElement.position-a,i=a+this.handleHalfDimension):(t=a-this.minHandleElement.position,i=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(i),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(i),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.leftOuterSelectionBarElement.setPosition(i+t)):(this.leftOuterSelectionBarElement.setDimension(i),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.rightOuterSelectionBarElement.setPosition(i+t))),v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!v.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let o=v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),a=o-i>0&&!n||o-i<=0&&n,l=this.viewOptions.vertical?a?"bottom":"top":a?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+l+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(o+t+i+(a?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=o-i+(a?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let o=this.getSelectionBarColor();this.barStyle={backgroundColor:o}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(i){return i===x.Max?this.viewOptions.getPointerColor(this.highValue,i):this.viewOptions.getPointerColor(this.value,i)}getTickColor(i){return this.viewOptions.getTickColor(i)}updateCombinedLabel(){let i=null;if(this.viewOptions.rightToLeft?i=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:i=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,i){let t=this.getDisplayValue(this.viewLowValue,Ue.Low),n=this.getDisplayValue(this.viewHighValue,Ue.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(n,t):this.viewOptions.combineLabels(t,n);this.combinedLabelElement.setValue(s);let o=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(o),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(i,t){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(i=this.getStepValue(i)),this.viewOptions.translate(i,t)}roundStep(i,t){let n=v.isNullOrUndefined(t)?this.viewOptions.step:t,s=q.roundToPrecisionLimit((i-this.viewOptions.floor)/n,this.viewOptions.precisionLimit);return s=Math.round(s)*n,q.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(i){let t=v.linearValueToPosition;v.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=v.logValueToPosition):t=this.viewOptions.customValueToPosition,i=q.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil);let n=t(i,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(n)&&(n=0),this.viewOptions.rightToLeft&&(n=1-n),n*this.maxHandlePosition}positionToValue(i){let t=i/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let n=v.linearPositionToValue;v.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(n=v.logPositionToValue):n=this.viewOptions.customPositionToValue;let s=n(t,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(s)?0:s}getEventXY(i,t){if(i instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?i.clientY:i.clientX;let n=0,s=i.touches;if(!v.isNullOrUndefined(t)){for(let o=0;o<s.length;o++)if(s[o].identifier===t){n=o;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?s[n].clientY:s[n].clientX}getEventPosition(i,t){let n=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical||this.viewOptions.rotate!==0?n.bottom:n.left,o=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?o=-this.getEventXY(i,t)+s:o=this.getEventXY(i,t)-s,o*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(i){if(!this.range)return x.Min;let t=this.getEventPosition(i),n=Math.abs(t-this.minHandleElement.position),s=Math.abs(t-this.maxHandleElement.position);return n<s?x.Min:n>s?x.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?x.Min:x.Max:t<this.minHandleElement.position?x.Min:x.Max}bindEvents(){let i=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(x.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(x.Max)))}getOptionsInfluencingEventBindings(i){return[i.disabled,i.readOnly,i.draggableRange,i.draggableRangeOnly,i.onlyBindHandles,i.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.off()}onBarStart(i,t,n,s,o,a,l){t?this.onDragStart(i,n,s,o):this.onStart(i,n,s,o,a,l)}onStart(i,t,n,s,o,a){t.stopPropagation(),!$e.isTouchEvent(t)&&!Fn&&t.preventDefault(),this.moving=!1,this.calculateViewDimensions(),v.isNullOrUndefined(i)&&(i=this.getNearestHandle(t)),this.currentTrackingPointer=i;let l=this.getPointerElement(i);if(l.active=!0,this.viewOptions.keyboardSupport&&l.focus(),n){this.unsubscribeOnMove();let c=d=>this.dragging.active?this.onDragMove(d):this.onMove(d);$e.isTouchEvent(t)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",c):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",c)}if(s){this.unsubscribeOnEnd();let c=d=>this.onEnd(d);$e.isTouchEvent(t)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",c):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",c)}this.userChangeStart.emit(this.getChangeContext()),$e.isTouchEvent(t)&&!v.isNullOrUndefined(t.changedTouches)&&v.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),o&&this.onMove(t,!0),a&&this.onEnd(t)}onMove(i,t){let n=null;if($e.isTouchEvent(i)){let c=i.changedTouches;for(let d=0;d<c.length;d++)if(c[d].identifier===this.touchId){n=c[d];break}if(v.isNullOrUndefined(n))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let s=v.isNullOrUndefined(n)?this.getEventPosition(i):this.getEventPosition(i,n.identifier),o,a=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,l=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;s<=0?o=l:s>=this.maxHandlePosition?o=a:(o=this.positionToValue(s),t&&!v.isNullOrUndefined(this.viewOptions.tickStep)?o=this.roundStep(o,this.viewOptions.tickStep):o=this.roundStep(o)),this.positionTrackingHandle(o)}onEnd(i){$e.isTouchEvent(i)&&i.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(i){let t=this.getPointerElement(i);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",n=>this.onKeyboardEvent(n)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=i,this.currentFocusPointer=i,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(i){i.off("blur"),i.off("keydown"),i.off("keyup"),i.active=!1,v.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(i){let t=this.viewOptions.ceil-this.viewOptions.floor,n=i+this.viewOptions.step,s=i-this.viewOptions.step,o=i+t/10,a=i-t/10;this.viewOptions.reversedControls&&(n=i-this.viewOptions.step,s=i+this.viewOptions.step,o=i-t/10,a=i+t/10);let l={UP:n,DOWN:s,LEFT:s,RIGHT:n,PAGEUP:o,PAGEDOWN:a,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(l.LEFT=n,l.RIGHT=s,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(l.UP=s,l.DOWN=n)),l}onKeyboardEvent(i){let t=this.getCurrentTrackingValue(),n=v.isNullOrUndefined(i.keyCode)?i.which:i.keyCode,s={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},o=this.getKeyActions(t),a=s[n],l=o[a];if(v.isNullOrUndefined(l)||v.isNullOrUndefined(this.currentTrackingPointer))return;i.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let c=q.clampToRange(l,this.viewOptions.floor,this.viewOptions.ceil),d=this.roundStep(c);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(d);else{let C=this.viewHighValue-this.viewLowValue,O,k;this.currentTrackingPointer===x.Min?(O=d,k=d+C,k>this.viewOptions.ceil&&(k=this.viewOptions.ceil,O=k-C)):this.currentTrackingPointer===x.Max&&(k=d,O=d-C,O<this.viewOptions.floor&&(O=this.viewOptions.floor,k=O+C)),this.positionTrackingBar(O,k)}}onDragStart(i,t,n,s){let o=this.getEventPosition(t);this.dragging=new Bn,this.dragging.active=!0,this.dragging.value=this.positionToValue(o),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-o:o-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?o-this.maxHandleElement.position:this.maxHandleElement.position-o,this.onStart(i,t,n,s)}getMinValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:o=s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:o=s?this.positionToValue(i+this.dragging.lowLimit):this.positionToValue(i-this.dragging.lowLimit),this.roundStep(o)}getMaxValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:o=s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?o=this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:o=this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)}onDragMove(i){let t=this.getEventPosition(i);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let n,s,o,a;this.viewOptions.rightToLeft?(n=this.dragging.lowLimit,s=this.dragging.highLimit,o=this.maxHandleElement,a=this.minHandleElement):(n=this.dragging.highLimit,s=this.dragging.lowLimit,o=this.minHandleElement,a=this.maxHandleElement);let l=t<=s,c=t>=this.maxHandlePosition-n,d,C;if(l){if(o.position===0)return;d=this.getMinValue(t,!0,!1),C=this.getMaxValue(t,!0,!1)}else if(c){if(a.position===this.maxHandlePosition)return;C=this.getMaxValue(t,!0,!0),d=this.getMinValue(t,!0,!0)}else d=this.getMinValue(t,!1,!1),C=this.getMaxValue(t,!1,!1);this.positionTrackingBar(d,C)}positionTrackingBar(i,t){!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit&&(i=this.viewOptions.minLimit,t=q.roundToPrecisionLimit(i+this.dragging.difference,this.viewOptions.precisionLimit)),!v.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(t=this.viewOptions.maxLimit,i=q.roundToPrecisionLimit(t-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=i,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(i)),this.updateHandles(x.Max,this.valueToPosition(t))}positionTrackingHandle(i){i=this.applyMinMaxLimit(i),this.range&&(this.viewOptions.pushRange?i=this.applyPushRange(i):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===x.Min&&i>this.viewHighValue?i=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(i=this.applyMinMaxRange(this.viewLowValue))),i=this.applyMinMaxRange(i),this.currentTrackingPointer===x.Min&&i>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(x.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(x.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==i&&(this.currentTrackingPointer===x.Min?(this.viewLowValue=i,this.applyViewChange()):this.currentTrackingPointer===x.Max&&(this.viewHighValue=i,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(i)),this.updateAriaAttributes())}applyMinMaxLimit(i){return!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit?this.viewOptions.minLimit:!v.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit?this.viewOptions.maxLimit:i}applyMinMaxRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue:this.viewLowValue,n=Math.abs(i-t);if(!v.isNullOrUndefined(this.viewOptions.minRange)&&n<this.viewOptions.minRange){if(this.currentTrackingPointer===x.Min)return q.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return q.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!v.isNullOrUndefined(this.viewOptions.maxRange)&&n>this.viewOptions.maxRange){if(this.currentTrackingPointer===x.Min)return q.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return q.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return i}applyPushRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue-i:i-this.viewLowValue,n=v.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return t<n?(this.currentTrackingPointer===x.Min?(this.viewHighValue=q.roundToPrecisionLimit(Math.min(i+n,this.viewOptions.ceil),this.viewOptions.precisionLimit),i=q.roundToPrecisionLimit(this.viewHighValue-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=q.roundToPrecisionLimit(Math.max(i-n,this.viewOptions.floor),this.viewOptions.precisionLimit),i=q.roundToPrecisionLimit(this.viewLowValue+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!v.isNullOrUndefined(s)&&t>s&&(this.currentTrackingPointer===x.Min?(this.viewHighValue=q.roundToPrecisionLimit(i+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=q.roundToPrecisionLimit(i-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),i}getChangeContext(){let i=new Ss;return i.pointerType=this.currentTrackingPointer,i.value=+this.value,this.range&&(i.highValue=+this.highValue),i}static \u0275fac=function(t){return new(t||r)(te(wt),te(yt),te(ze),te(ue),te(Ga,8))};static \u0275cmp=nt({type:r,selectors:[["ngx-slider"]],contentQueries:function(t,n,s){if(t&1&&br(s,gu,5),t&2){let o;ce(o=he())&&(n.tooltipTemplate=o.first)}},viewQuery:function(t,n){if(t&1&&(ye(mu,5,it),ye(vu,5,it),ye(yu,5,it),ye(wu,5,it),ye(bu,5,Cs),ye(_u,5,Cs),ye(Cu,5,Ht),ye(Su,5,Ht),ye(Eu,5,Ht),ye(xu,5,Ht),ye(Ou,5,Ht),ye(Du,5,it)),t&2){let s;ce(s=he())&&(n.leftOuterSelectionBarElement=s.first),ce(s=he())&&(n.rightOuterSelectionBarElement=s.first),ce(s=he())&&(n.fullBarElement=s.first),ce(s=he())&&(n.selectionBarElement=s.first),ce(s=he())&&(n.minHandleElement=s.first),ce(s=he())&&(n.maxHandleElement=s.first),ce(s=he())&&(n.floorLabelElement=s.first),ce(s=he())&&(n.ceilLabelElement=s.first),ce(s=he())&&(n.minHandleLabelElement=s.first),ce(s=he())&&(n.maxHandleLabelElement=s.first),ce(s=he())&&(n.combinedLabelElement=s.first),ce(s=he())&&(n.ticksElement=s.first)}},hostVars:10,hostBindings:function(t,n){t&1&&_t("resize",function(o){return n.onResize(o)},!1,Ks),t&2&&(Jt("disabled",n.sliderElementDisabledAttr)("aria-label",n.sliderElementAriaLabel),bt("ngx-slider",n.sliderElementNgxSliderClass)("vertical",n.sliderElementVerticalClass)("animate",n.sliderElementAnimateClass)("with-legend",n.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[co([ku]),Fi],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,n){t&1&&(ne(0,"span",12,0),Z(2,"span",13),le(),ne(3,"span",14,1),Z(5,"span",13),le(),ne(6,"span",15,2),Z(8,"span",13),le(),ne(9,"span",16,3),Z(11,"span",17),le(),Z(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),ne(26,"span",25,11),Ke(28,Tu,5,10,"span",26),le()),t&2&&(ee(6),bt("ngx-slider-transparent",n.fullBarTransparentClass),ee(3),bt("ngx-slider-draggable",n.selectionBarDraggableClass),ee(2),K("ngStyle",n.barStyle),ee(),K("ngStyle",n.minPointerStyle),ee(2),vr("display",n.range?"inherit":"none"),K("ngStyle",n.maxPointerStyle),ee(12),bt("ngx-slider-ticks-values-under",n.ticksUnderValuesClass),K("hidden",!n.showTicks),ee(2),K("ngForOf",n.ticks))},dependencies:[Do,Mo,ii,Ao,it,Cs,Ht,Pu],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}']})}return r})(),qa=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=ke({type:r});static \u0275inj=Pe({imports:[Yi]})}return r})();function Vu(r,e){if(r&1){let i=no();ne(0,"ngx-slider",18),lo("valueChange",function(n){Xt(i);let s=de();return ao(s.sliderValue,n)||(s.sliderValue=n),Qt(n)}),_t("userChange",function(){Xt(i);let n=de();return Qt(n.onSliderChange())})("userChangeStart",function(){Xt(i);let n=de();return Qt(n.onSliderStart())})("userChangeEnd",function(){Xt(i);let n=de();return Qt(n.onSliderEnd())}),le()}if(r&2){let i=de();oo("value",i.sliderValue),K("options",i.sliderOptions)}}var Xa=(()=>{let e=class e{constructor(t){this.signalRService=t,this.title="Open Place",this.colorPalette=["000000","000000","FFFFFF","0000FF","00FFFF","FF0000","00FF00","FFFF00","FF00FF","7c4dff"],this.defaultColor="FFFFFF",this.username=localStorage.getItem("username"),this.defaultUsername="Anonymous",this.timeoutId=null,this.zoomLevel=1,this.audio=new Audio("assets/sfx/place.mp3"),this.pickr=null,this.hoverPixel=new lt(-1,-1,""),this.boardArr=[],this.pixelQueue=[],this.dimensions={width:256,height:256},this.minZoom=1,this.maxZoom=Math.min(this.dimensions.width,this.dimensions.height)/10,this.originX=0,this.originY=0,this.selectedColor=1,this.sliderValue=0,this.sliderDragState=!1,this.isSliderVisible=!1,this.sliderOptions={ceil:0,vertical:!0,showSelectionBar:!0,rightToLeft:!0}}ngOnInit(){return T(this,null,function*(){this.init(),this.initCanvasEvents(),this.initWindowResizeEvent(),this.initSignalR(),this.initDocumentEvents(),this.initPaletteContainer(),this.initColorPicker()})}initColorPicker(){this.pickr=Ya.default.create({el:".color-picker",theme:"monolith",useAsButton:!0,position:"top-middle",autoReposition:!0,default:this.colorPalette[0],swatches:["rgb(244, 67, 54)","rgb(233, 30, 99)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(3, 169, 244","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(205, 220, 57)","rgb(255, 235, 59)","rgb(255, 193, 7)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!0,rgba:!0,cancel:!1,input:!0,clear:!1,save:!1}}}),this.pickr.on("hide",()=>{this.pickr?.applyColor()}),this.pickr.on("change",t=>{let n=t.toHEXA();this.colorPalette[0]=n[0]+n[1]+n[2];let s="#"+this.colorPalette[0],o=document.getElementById("0-color");o.style.backgroundColor=s,localStorage.setItem("customColor",this.colorPalette[0])})}init(){return T(this,null,function*(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.setAttribute("tabindex","0"),yield this.loadBoard()})}initCanvasEvents(){this.resizeCanvas(),this.canvas.addEventListener("keydown",t=>this.handleMovement(t)),this.canvas.addEventListener("contextmenu",t=>t.preventDefault()),this.canvas.addEventListener("wheel",this.zoom.bind(this)),this.canvas.addEventListener("click",t=>this.handleCanvasClick(t)),this.canvas.addEventListener("mousedown",t=>this.getColor(t)),this.canvas.addEventListener("mousemove",this.onHover.bind(this)),this.canvas.addEventListener("mouseleave",this.onLeave.bind(this)),this.canvas.addEventListener("mouseover",t=>{!this.pickr?.isOpen()&&t.buttons==0&&this.sliderDragState==!1&&this.canvas.focus()})}initPaletteContainer(){let t=localStorage.getItem("customColor");t!==null&&(this.colorPalette[0]=t);let n=document.getElementById("palette-container");n&&this.colorPalette.forEach((s,o)=>{let a=document.createElement("div");a.style.width="40px",a.style.height="40px",a.style.backgroundColor=`#${s}`,a.style.borderRadius="50%",a.style.cursor="pointer",a.style.transition="transform 0.2s ease",a.style.border="2px solid #ffffff",a.style.display="inline-block",a.id=o.toString()+"-color",o==this.selectedColor&&(a.style.transform="scale(1.3)",a.style.border="3px solid #0080FF"),a.addEventListener("click",()=>this.handleColorDivClick(a)),a.addEventListener("mouseover",()=>a.style.transform="scale(1.3)"),a.addEventListener("mouseout",()=>a.style.transform="scale(1)"),n.appendChild(a)})}handleColorDivClick(t){this.selectedColor=parseInt(t.id.at(0)),document.querySelectorAll(".palette-container div").forEach(n=>{n.style.border="2px solid #ffffff",n.style.transform="scale(1.0)"}),t.style.border="3px solid #0080FF",t.style.transform="scale(1.3)",this.selectedColor==0&&this.pickr?.show()}initWindowResizeEvent(){window.addEventListener("resize",()=>{this.zoomLevel=1,this.resizeCanvas(),this.drawBoard()})}initSignalR(){this.signalRService.startConnection().subscribe(()=>{this.signalRService.receiveMessage().subscribe(t=>{this.receivePixel(t)})})}receivePixel(t){let n=JSON.parse(t);n.placedBy==""&&(n.placedBy=this.defaultUsername),this.boardArr.push(n),this.sliderValue+1==this.boardArr.length?(this.drawPixel(n.x,n.y,n.color),this.isSliderVisible&&this.setSliderToMax()):this.sliderOptions=z(b({},this.sliderOptions),{ceil:this.boardArr.length}),this.updateLeaderboard()}initDocumentEvents(){document.addEventListener("wheel",t=>t.preventDefault(),{passive:!1}),document.addEventListener("keydown",t=>this.handleColorSelection(t)),document.addEventListener("selectionchange",()=>{document.activeElement?.id=="canvas"&&window.getSelection().removeAllRanges()})}getColor(t){if(t.button!=2)return;let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(!a)if(s<this.dimensions.width&&o<this.dimensions.height)a=new kt(s,o,this.defaultColor,"","");else return;let l=this.colorPalette.indexOf(a.color);l==-1&&(l=0,localStorage.setItem("customColor",a.color),this.pickr?.setColor("#"+a.color,!1),this.colorPalette[0]=a.color),this.selectedColor=l;let c=document.getElementById(l+"-color");document.querySelectorAll(".palette-container div").forEach(d=>{d.style.border="2px solid #ffffff",d.style.transform="scale(1.0)"}),c.style.border="3px solid #0080FF",c.style.transform="scale(1.3)",this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel?.color??this.defaultColor,!0)}handleColorSelection(t){if(!this.pickr?.isOpen()&&t.code.startsWith("Digit")){let n=t.code.slice(5),s=9;n!="0"&&(s=parseInt(n)-1),this.selectedColor=s,this.drawHoverPixel(this.hoverPixel?.x??0,this.hoverPixel?.y??0,this.hoverPixel?.color??this.defaultColor,!0),document.querySelectorAll(".palette-container div").forEach(a=>{a.style.border="2px solid #ffffff",a.style.transform="scale(1.0)"});let o=document.getElementById(s.toString()+"-color");o.style.border="3px solid #0080FF",o.style.transform="scale(1.3)",this.pickr?.hide()}}handleMovement(t){switch(t.preventDefault(),t.key.toLocaleLowerCase()){case"w":case"arrowup":this.moveAndRedraw(0,-5);break;case"a":case"arrowleft":this.moveAndRedraw(-5,0);break;case"s":case"arrowdown":this.moveAndRedraw(0,5);break;case"d":case"arrowright":this.moveAndRedraw(5,0);break}}moveAndRedraw(t,n){this.resizeCanvas(),this.originX=Math.min(Math.max(this.originX+t,0),this.dimensions.width),this.originY=Math.min(Math.max(this.originY+n,0),this.dimensions.height),this.applyTransformations(),this.drawBoard()}handleCanvasClick(t){if(this.sliderValue!=this.sliderOptions.ceil){this.setSliderToMax(),this.drawBoard(),this.hoverPixel=this.findLatestPixel(this.hoverPixel.x,this.hoverPixel.y)||this.hoverPixel;return}let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.getValidPixelOrNull(s,o,this.colorPalette[this.selectedColor],this.username,new Date);a&&(this.hoverPixel=a,this.drawPixel(a.x,a.y,a.color),this.sendPixel(a.x,a.y,a.color,t))}increaseCounter(){let t=localStorage.getItem("placedPixels"),n=1;t&&(n=parseInt(t)+1),localStorage.setItem("placedPixels",n.toString())}playSound(){return T(this,null,function*(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0),this.audio.play()})}onHover(t){let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(this.drawHoverPixel(s,o,a?.color,!1),a){let l={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},c=`(${a.x}, ${a.y}) ${a.placedBy||this.defaultUsername}<br/>${new Date(a.timestamp).toLocaleDateString(void 0,l)}`;this.showBubble(c,t.clientX,t.clientY)}else this.hideBubble(!0)}findLatestPixel(t,n){let s=this.boardArr.length;this.isSliderVisible&&(s=this.sliderValue);for(let o=s-1;o>=0;o--){let a=this.boardArr[o];if(a.x===t&&a.y===n)return a}return null}calculateXPosition(t,n){return Math.floor((t-n.left)/n.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX)}calculateYPosition(t,n){return Math.floor((t-n.top)/n.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}hideBubble(t){let n=document.getElementById("bubble");t&&n?.innerText.startsWith("Wait")||n&&(n.style.visibility="hidden",n.style.opacity="0")}onLeave(){this.hoverPixel&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new lt(-1,-1,"")),this.hideBubble(!1)}drawHoverPixel(t,n,s,o){this.hoverPixel?(this.hoverPixel.x!==t||this.hoverPixel.y!==n||o)&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new lt(t,n,s||this.defaultColor),this.drawPixel(t,n,this.colorPalette[this.selectedColor])):this.hoverPixel=new lt(t,n,s||this.defaultColor)}showBubble(t,n,s){let o=document.getElementById("bubble"),a=this.canvas.getBoundingClientRect();o.innerHTML=t;let l=o.clientHeight*1.3;s-a.top<l&&(l=-20);let c=o.clientWidth*1.15;n-a.left<a.width-c&&(c=-30),o.style.visibility="visible",o.style.opacity="1",o.style.left=`${n-c}px`,o.style.top=`${s-l}px`,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.hideBubble,2e3)}loadBoard(){return T(this,null,function*(){let n=0,s;do{let o=yield fetch(Mi.endpointUrl+`/GetRange?offset=${n}&limit=10000`);s||this.restoreViewSettings(),s=yield o.json(),s.forEach(a=>{a.placedBy==""&&(a.placedBy=this.defaultUsername),this.boardArr.push(a)}),this.drawBoard(),this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color,!0),this.updateLeaderboard(),n+=1e4}while(s.length==1e4);this.isSliderVisible=!0,this.setSliderToMax();try{let o=localStorage.getItem("board");if(o&&JSON.parse(o).length>=this.boardArr.length)return;localStorage.setItem("board",JSON.stringify(this.boardArr))}catch{console.log("Could not save board array.")}})}setSliderToMax(){this.sliderOptions=z(b({},this.sliderOptions),{ceil:this.boardArr.length}),this.sliderValue=this.sliderOptions.ceil}updateLeaderboard(){let t=[];for(let s of this.boardArr){let o=t.find(a=>a.name===s.placedBy);o?o.placedPixels++:t.push({name:s.placedBy,placedPixels:1})}let n=document.getElementById("leaderboard-list");n.innerHTML="",t.sort((s,o)=>o.placedPixels-s.placedPixels);for(let s=0;s<Math.min(10,t.length);s++){let o=s+1,a=document.createElement("li");a.className="leaderboard-item",a.innerHTML=`
        <span class="position">${o}.</span>
        <span class="name">${t[s].name}</span>
        <span class="score">${t[s].placedPixels}</span>
        `,n.appendChild(a)}}onSliderChange(){setTimeout(()=>{this.drawBoard()},20)}onSliderStart(){this.sliderDragState=!0}onSliderEnd(){this.sliderDragState=!1}getValidPixelOrNull(t,n,s,o,a){return t<0||t>=this.dimensions.width||n<0||n>=this.dimensions.height?null:((!s||!/^[0-9A-F]{6}$/i.test(s))&&(s=this.defaultColor),new kt(t,n,s,o,a))}sendPixel(t,n,s,o){return T(this,null,function*(){let a=this.findLatestPixel(t,n);if(a&&a.color===s&&a.placedBy===(this.username||this.defaultUsername))return;let l=new kt(t,n,s,this.username||this.defaultUsername,"");if(this.getIndex(l)!=-1){console.log("BLOCKED");return}this.pixelQueue.push(l),this.playSound(),(this.signalRService.getState()==j.Disconnecting||this.signalRService.getState()==j.Disconnected)&&this.initSignalR();try{let c=yield fetch(Mi.endpointUrl+"/SendPixel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});c.ok?(this.pixelQueue.splice(this.getIndex(l),1),this.increaseCounter(),console.log("Success.")):c.status===429&&(this.showBubble(`Wait ${c.headers.get("retry-after")} seconds.`,o.clientX,o.clientY),this.drawBoard())}catch(c){this.hoverPixel=a,this.drawBoard(),console.log(c)}})}drawBoard(){let t=this.boardArr.length;this.isSliderVisible&&(t=this.sliderValue),this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height);for(let n=0;n<t;n++){let s=this.boardArr[n];this.drawPixel(s.x,s.y,s.color)}}drawPixel(t,n,s){this.getValidPixelOrNull(t,n,s,null,null)!=null&&(this.ctx.fillStyle="#"+s,this.ctx.fillRect(t,n,1,1))}resizeCanvas(){this.canvas.width=this.dimensions.width,this.canvas.height=this.dimensions.height;let t=Math.min(window.innerWidth,window.innerHeight/1.15);this.canvas.style.width=t+"px",this.canvas.style.height=t+"px";let n=document.getElementById("palette-container");n.style.width=t+"px"}usernameChange(t){let n=t.target.value;if(n.length>16){t.target.value=this.username||"",alert("Username cannot be longer than 16 characters.");return}this.username=n,localStorage.setItem("username",n)}zoom(t){this.updateZoomLevel(t.deltaY),this.resizeCanvas();let n=this.canvas.getBoundingClientRect();t.deltaY<0&&this.calculateOrigin(n,t.clientX,t.clientY),this.applyTransformations(),this.drawBoardAndHoverPixel(t,n)}drawBoardAndHoverPixel(t,n){this.drawBoard();let s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n);this.drawHoverPixel(s,o,this.findLatestPixel(s,o)?.color,!1)}updateZoomLevel(t){t<0?this.zoomLevel<this.maxZoom&&(this.zoomLevel=Math.ceil(this.zoomLevel*1.5)):this.zoomLevel>this.minZoom&&(this.zoomLevel=Math.floor(this.zoomLevel/1.5))}calculateOrigin(t,n,s){this.originX=Math.floor((n-t.left)/t.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX),this.originY=Math.floor((s-t.top)/t.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}applyTransformations(){this.ctx.translate(this.originX,this.originY),this.ctx.scale(this.zoomLevel,this.zoomLevel),this.ctx.translate(-this.originX,-this.originY),this.saveViewSettings()}saveViewSettings(){let t={originX:this.originX,originY:this.originY,zoom:this.zoomLevel};localStorage.setItem("canvasViewSettings",JSON.stringify(t))}restoreViewSettings(){let t=localStorage.getItem("canvasViewSettings");if(!t)return;let n=JSON.parse(t);this.originX=n.originX,this.originY=n.originY,this.zoomLevel=n.zoom,this.resizeCanvas(),this.applyTransformations()}getIndex(t){return this.pixelQueue.findIndex(n=>n.x==t.x&&n.y==t.y&&n.color==t.color&&n.placedBy==t.placedBy)}};e.\u0275fac=function(n){return new(n||e)(te($a))},e.\u0275cmp=nt({type:e,selectors:[["app-root"]],decls:22,vars:2,consts:[["rel","stylesheet","href",Qs`https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css`],[1,"min-h-screen","body","p-4"],[1,"container"],[1,"color-picker",2,"margin-right","30px"],["id","div"],["id","palette-container",1,"palette-container"],[2,"display","flex"],["id","canvas",1,"canvas",2,"flex","1"],[2,"flex","1"],["style","margin-left: 3vw","id","slider",3,"value","options","valueChange","userChange","userChangeStart","userChangeEnd",4,"ngIf"],["id","bubble",1,"text-center","bg-red-400","font-bold","text-white","rounded","transition","py-1","px-2","animate-[showoff_100ms_ease-in]",2,"position","absolute","white-space","nowrap","touch-action","manipulation","visibility","hidden"],[2,"height","50%"],[1,"w-full","max-w-sm","p-6","bg-white","rounded-lg","shadow-md","username-input-container"],["for","username",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["id","username","type","text","placeholder","Enter your username",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","duration-300","ease-in-out",3,"change","value"],[1,"leaderboard"],[1,"leaderboard-header"],["id","leaderboard-list",1,"leaderboard-list"],["id","slider",2,"margin-left","3vw",3,"valueChange","userChange","userChangeStart","userChangeEnd","value","options"]],template:function(n,s){n&1&&(ne(0,"head"),Z(1,"link",0),le(),ne(2,"body",1)(3,"div",2),Z(4,"div",3),ne(5,"div",4),Z(6,"div",5),ne(7,"div",6),Z(8,"canvas",7),ne(9,"div",8),Ke(10,Vu,1,2,"ngx-slider",9),le()(),Z(11,"span",10),le(),ne(12,"div",11)(13,"div",12)(14,"label",13),ei(15,"Username"),le(),ne(16,"input",14),_t("change",function(a){return s.usernameChange(a)}),le()(),ne(17,"div",15)(18,"div",16),ei(19," Leaderboard "),le(),Z(20,"ul",17),le()()()(),Z(21,"router-outlet")),n&2&&(ee(10),K("ngIf",s.isSliderVisible),ee(6),ro("value",s.username))},dependencies:[ii,us,xs],styles:[".canvas[_ngcontent-%COMP%]{display:block;background-color:#fff;image-rendering:pixelated;touch-action:manipulation;outline:none;border-radius:10px}.body[_ngcontent-%COMP%]{display:flex;justify-content:center;height:98vh;margin:0}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-start}.username-input-container[_ngcontent-%COMP%]{flex-shrink:0;margin-top:12vh;width:280px}}@media (max-width: 1199px){.container[_ngcontent-%COMP%]{display:block;text-align:center}#div[_ngcontent-%COMP%]{margin-bottom:1rem}}.palette-container[_ngcontent-%COMP%]{background-color:#223a70;border-radius:20px;padding:8px;margin-bottom:20px;display:flex;justify-content:space-evenly}.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.transition[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out,visibility .3s ease-in-out}.leaderboard[_ngcontent-%COMP%]{margin-top:4vh;width:100%;max-width:600px;background-color:#fff;border-radius:10px;overflow:hidden}.leaderboard-header[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:20px;text-align:center;font-size:1.5rem;font-weight:700}.leaderboard-list[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}"]});let r=e;return r})();var Nu="@",Hu=(()=>{let e=class e{constructor(t,n,s,o,a){this.doc=t,this.delegate=n,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=A(Zs,{optional:!0}),this.loadingSchedulerFn=A(Fu,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){let t=()=>this.moduleImpl??import("./chunk-7YK7TZKT.js").then(s=>s),n;return this.loadingSchedulerFn?n=this.loadingSchedulerFn(t):n=t(),n.catch(s=>{throw new Y(5300,!1)}).then(({\u0275createEngine:s,\u0275AnimationRendererFactory:o})=>{this._engine=s(this.animationType,this.doc);let a=new o(this.delegate,this._engine,this.zone);return this.delegate=a,a})}createRenderer(t,n){let s=this.delegate.createRenderer(t,n);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Os(s);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(t,n);o.use(l),this.scheduler?.notify(10)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(n){$i()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Os=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,t,n){this.delegate.insertBefore(e,i,t,n)}removeChild(e,i,t){this.delegate.removeChild(e,i,t)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,n){this.delegate.setAttribute(e,i,t,n)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,n){this.delegate.setStyle(e,i,t,n)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){this.shouldReplay(i)&&this.replay.push(n=>n.setProperty(e,i,t)),this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.shouldReplay(i)&&this.replay.push(n=>n.listen(e,i,t)),this.delegate.listen(e,i,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(Nu)}},Fu=new G("");function Qa(r="animations"){return eo("NgAsyncAnimations"),Hi([{provide:Bi,useFactory:(e,i,t)=>new Hu(e,i,t,r),deps:[pe,Qi,ue]},{provide:Ys,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ka=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ke({type:e,bootstrap:[Xa]}),e.\u0275inj=Pe({providers:[Qa()],imports:[Bo,La,qa]});let r=e;return r})();$o().bootstrapModule(Ka).catch(r=>console.error(r));
