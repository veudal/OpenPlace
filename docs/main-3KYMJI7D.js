import{$ as sr,$a as ue,A as Ue,Aa as Yt,Ab as go,B as dt,Ba as ee,Bb as mo,C as pt,Ca as te,Cb as vo,D as Jn,Da as Vi,Db as Bi,E as ft,Ea as Ks,Eb as yo,F as Vs,Fa as Ni,Fb as wo,G as er,Ga as yt,Gb as me,H as Ti,Ha as Qs,Hb as bo,I as ze,Ia as ae,Ib as _r,J as tr,Ja as hr,Jb as _o,K as Ns,Ka as Zs,Kb as Co,L as Hs,La as ur,Lb as Qt,M as Fs,Ma as Js,Mb as So,N as Me,Na as dr,Nb as Eo,O as Us,Oa as eo,Ob as xo,P as J,Pa as qe,Pb as Zt,Q as ir,Qa as Xt,Qb as Oo,R as q,Ra as Q,Rb as Do,S as We,Sa as pr,Sb as ji,T as nr,Ta as wt,Tb as Mo,U as F,Ua as ne,Ub as Cr,V as Re,Va as le,Vb as Ao,W as $s,Wa as Z,Wb as Ro,X as K,Xa as fr,Y as rr,Ya as gr,Z as $,Za as to,_ as A,_a as bt,a as _,aa as Bs,ab as io,b as z,ba as zt,bb as mr,c as ut,ca as it,cb as ge,da as Ie,db as ce,e as dl,ea as gt,eb as he,f as pl,fa as Pi,fb as Kt,g as R,ga as js,gb as no,h as Is,ha as mt,hb as ro,i as Ts,ia as Ge,ib as so,j as Yn,ja as ki,jb as oo,k as Xn,ka as Wt,kb as ao,l as Kn,la as Gt,lb as lo,m as Se,ma as or,mb as co,n as Ee,na as ar,nb as ho,o as je,oa as lr,ob as Hi,p as pe,pa as vt,pb as uo,q as I,qa as xe,qb as Fi,r as jt,ra as zs,rb as Ui,s as Ps,sa as Li,sb as vr,t as ks,ta as Ws,tb as yr,u as W,ua as qt,ub as wr,v as Ii,va as Gs,vb as po,w as fe,wa as cr,wb as br,x as Qn,xa as qs,xb as $i,y as Ls,ya as Ys,yb as fo,z as Zn,za as Xs,zb as $e}from"./chunk-FDRKUU5Y.js";var Ia=dl((pn,vs)=>{"use strict";(function(r,e){typeof pn=="object"&&typeof vs=="object"?vs.exports=e():typeof define=="function"&&define.amd?define([],e):typeof pn=="object"?pn.Pickr=e():r.Pickr=e()})(self,()=>(()=>{"use strict";var r={d:(C,w)=>{for(var h in w)r.o(w,h)&&!r.o(C,h)&&Object.defineProperty(C,h,{enumerable:!0,get:w[h]})},o:(C,w)=>Object.prototype.hasOwnProperty.call(C,w),r:C=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(C,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(C,"__esModule",{value:!0})}},e={};r.d(e,{default:()=>Ja});var i={};function t(C,w,h,d,g={}){w instanceof HTMLCollection||w instanceof NodeList?w=Array.from(w):Array.isArray(w)||(w=[w]),Array.isArray(h)||(h=[h]);for(let u of w)for(let m of h)u[C](m,d,_({capture:!1},g));return Array.prototype.slice.call(arguments,1)}r.r(i),r.d(i,{adjustableInputNumbers:()=>p,createElementFromString:()=>o,createFromTemplate:()=>a,eventPath:()=>l,off:()=>s,on:()=>n,resolveElement:()=>c});let n=t.bind(null,"addEventListener"),s=t.bind(null,"removeEventListener");function o(C){let w=document.createElement("div");return w.innerHTML=C.trim(),w.firstElementChild}function a(C){let w=(d,g)=>{let u=d.getAttribute(g);return d.removeAttribute(g),u},h=(d,g={})=>{let u=w(d,":obj"),m=w(d,":ref"),y=u?g[u]={}:g;m&&(g[m]=d);for(let b of Array.from(d.children)){let M=w(b,":arr"),D=h(b,M?{}:y);M&&(y[M]||(y[M]=[])).push(Object.keys(D).length?D:b)}return g};return h(o(C))}function l(C){let w=C.path||C.composedPath&&C.composedPath();if(w)return w;let h=C.target.parentElement;for(w=[C.target,h];h=h.parentElement;)w.push(h);return w.push(document,window),w}function c(C){return C instanceof Element?C:typeof C=="string"?C.split(/>>/g).reduce((w,h,d,g)=>(w=w.querySelector(h),d<g.length-1?w.shadowRoot:w),document):null}function p(C,w=h=>h){function h(d){let g=[.001,.01,.1][Number(d.shiftKey||2*d.ctrlKey)]*(d.deltaY<0?1:-1),u=0,m=C.selectionStart;C.value=C.value.replace(/[\d.]+/g,(y,b)=>b<=m&&b+y.length>=m?(m=b,w(Number(y),g,u)):(u++,y)),C.focus(),C.setSelectionRange(m,m),d.preventDefault(),C.dispatchEvent(new Event("input"))}n(C,"focus",()=>n(window,"wheel",h,{passive:!1})),n(C,"blur",()=>s(window,"wheel",h))}let{min:S,max:O,floor:L,round:tt}=Math;function Fe(C,w,h){w/=100,h/=100;let d=L(C=C/360*6),g=C-d,u=h*(1-w),m=h*(1-g*w),y=h*(1-(1-g)*w),b=d%6;return[255*[h,m,u,u,y,h][b],255*[y,h,h,m,u,u][b],255*[u,u,y,h,h,m][b]]}function Ht(C,w,h){let d=(2-(w/=100))*(h/=100)/2;return d!==0&&(w=d===1?0:d<.5?w*h/(2*d):w*h/(2-2*d)),[C,100*w,100*d]}function De(C,w,h){let d=S(C/=255,w/=255,h/=255),g=O(C,w,h),u=g-d,m,y;if(u===0)m=y=0;else{y=u/g;let b=((g-C)/6+u/2)/u,M=((g-w)/6+u/2)/u,D=((g-h)/6+u/2)/u;C===g?m=D-M:w===g?m=1/3+b-D:h===g&&(m=2/3+M-b),m<0?m+=1:m>1&&(m-=1)}return[360*m,100*y,100*g]}function Hn(C,w,h,d){return w/=100,h/=100,[...De(255*(1-S(1,(C/=100)*(1-(d/=100))+d)),255*(1-S(1,w*(1-d)+d)),255*(1-S(1,h*(1-d)+d)))]}function qa(C,w,h){w/=100;let d=2*(w*=(h/=100)<.5?h:1-h)/(h+w)*100,g=100*(h+w);return[C,isNaN(d)?0:d,g]}function Ya(C){return De(...C.match(/.{2}/g).map(w=>parseInt(w,16)))}function Xa(C){C=C.match(/^[a-zA-Z]+$/)?function(g){if(g.toLowerCase()==="black")return"#000";let u=document.createElement("canvas").getContext("2d");return u.fillStyle=g,u.fillStyle==="#000"?null:u.fillStyle}(C):C;let w={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},h=g=>g.map(u=>/^(|\d+)\.\d+|\d+$/.test(u)?Number(u):void 0),d;e:for(let g in w)if(d=w[g].exec(C))switch(g){case"cmyk":{let[,u,m,y,b]=h(d);if(u>100||m>100||y>100||b>100)break e;return{values:Hn(u,m,y,b),type:g}}case"rgba":{let[,u,,m,,y,,,b]=h(d);if(u=d[2]==="%"?u/100*255:u,m=d[4]==="%"?m/100*255:m,y=d[6]==="%"?y/100*255:y,b=d[9]==="%"?b/100:b,u>255||m>255||y>255||b<0||b>1)break e;return{values:[...De(u,m,y),b],a:b,type:g}}case"hexa":{let[,u]=d;u.length!==4&&u.length!==3||(u=u.split("").map(b=>b+b).join(""));let m=u.substring(0,6),y=u.substring(6);return y=y?parseInt(y,16)/255:void 0,{values:[...Ya(m),y],a:y,type:g}}case"hsla":{let[,u,m,y,,b]=h(d);if(b=d[6]==="%"?b/100:b,u>360||m>100||y>100||b<0||b>1)break e;return{values:[...qa(u,m,y),b],a:b,type:g}}case"hsva":{let[,u,m,y,,b]=h(d);if(b=d[6]==="%"?b/100:b,u>360||m>100||y>100||b<0||b>1)break e;return{values:[u,m,y,b],a:b,type:g}}}return{values:null,type:null}}function Ft(C=0,w=0,h=0,d=1){let g=(m,y)=>(b=-1)=>y(~b?m.map(M=>Number(M.toFixed(b))):m),u={h:C,s:w,v:h,a:d,toHSVA(){let m=[u.h,u.s,u.v,u.a];return m.toString=g(m,y=>`hsva(${y[0]}, ${y[1]}%, ${y[2]}%, ${u.a})`),m},toHSLA(){let m=[...Ht(u.h,u.s,u.v),u.a];return m.toString=g(m,y=>`hsla(${y[0]}, ${y[1]}%, ${y[2]}%, ${u.a})`),m},toRGBA(){let m=[...Fe(u.h,u.s,u.v),u.a];return m.toString=g(m,y=>`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${u.a})`),m},toCMYK(){let m=function(y,b,M){let D=Fe(y,b,M),E=D[0]/255,V=D[1]/255,N=D[2]/255,k=S(1-E,1-V,1-N);return[100*(k===1?0:(1-E-k)/(1-k)),100*(k===1?0:(1-V-k)/(1-k)),100*(k===1?0:(1-N-k)/(1-k)),100*k]}(u.h,u.s,u.v);return m.toString=g(m,y=>`cmyk(${y[0]}%, ${y[1]}%, ${y[2]}%, ${y[3]}%)`),m},toHEXA(){let m=function(b,M,D){return Fe(b,M,D).map(E=>tt(E).toString(16).padStart(2,"0"))}(u.h,u.s,u.v),y=u.a>=1?"":Number((255*u.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return y&&m.push(y),m.toString=()=>`#${m.join("").toUpperCase()}`,m},clone:()=>Ft(u.h,u.s,u.v,u.a)};return u}let Ai=C=>Math.max(Math.min(C,1),0);function Fn(C){let w={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},C),_keyboard(u){let{options:m}=w,{type:y,key:b}=u;if(document.activeElement===m.wrapper){let{lock:M}=w.options,D=b==="ArrowUp",E=b==="ArrowRight",V=b==="ArrowDown",N=b==="ArrowLeft";if(y==="keydown"&&(D||E||V||N)){let k=0,ie=0;M==="v"?k=D||E?1:-1:M==="h"?k=D||E?-1:1:(ie=D?-1:V?1:0,k=N?-1:E?1:0),w.update(Ai(w.cache.x+.01*k),Ai(w.cache.y+.01*ie)),u.preventDefault()}else b.startsWith("Arrow")&&(w.options.onstop(),u.preventDefault())}},_tapstart(u){n(document,["mouseup","touchend","touchcancel"],w._tapstop),n(document,["mousemove","touchmove"],w._tapmove),u.cancelable&&u.preventDefault(),w._tapmove(u)},_tapmove(u){let{options:m,cache:y}=w,{lock:b,element:M,wrapper:D}=m,E=D.getBoundingClientRect(),V=0,N=0;if(u){let de=u&&u.touches&&u.touches[0];V=u?(de||u).clientX:0,N=u?(de||u).clientY:0,V<E.left?V=E.left:V>E.left+E.width&&(V=E.left+E.width),N<E.top?N=E.top:N>E.top+E.height&&(N=E.top+E.height),V-=E.left,N-=E.top}else y&&(V=y.x*E.width,N=y.y*E.height);b!=="h"&&(M.style.left=`calc(${V/E.width*100}% - ${M.offsetWidth/2}px)`),b!=="v"&&(M.style.top=`calc(${N/E.height*100}% - ${M.offsetHeight/2}px)`),w.cache={x:V/E.width,y:N/E.height};let k=Ai(V/E.width),ie=Ai(N/E.height);switch(b){case"v":return m.onchange(k);case"h":return m.onchange(ie);default:return m.onchange(k,ie)}},_tapstop(){w.options.onstop(),s(document,["mouseup","touchend","touchcancel"],w._tapstop),s(document,["mousemove","touchmove"],w._tapmove)},trigger(){w._tapmove()},update(u=0,m=0){let{left:y,top:b,width:M,height:D}=w.options.wrapper.getBoundingClientRect();w.options.lock==="h"&&(m=u),w._tapmove({clientX:y+M*u,clientY:b+D*m})},destroy(){let{options:u,_tapstart:m,_keyboard:y}=w;s(document,["keydown","keyup"],y),s([u.wrapper,u.element],"mousedown",m),s([u.wrapper,u.element],"touchstart",m,{passive:!1})}},{options:h,_tapstart:d,_keyboard:g}=w;return n([h.wrapper,h.element],"mousedown",d),n([h.wrapper,h.element],"touchstart",d,{passive:!1}),n(document,["keydown","keyup"],g),w}function Ka(C={}){C=Object.assign({onchange:()=>0,className:"",elements:[]},C);let w=n(C.elements,"click",h=>{C.elements.forEach(d=>d.classList[h.target===d?"add":"remove"](C.className)),C.onchange(h),h.stopPropagation()});return{destroy:()=>s(...w)}}let Qa={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},Za=(C,w,h)=>{let d=typeof C!="object"||C instanceof HTMLElement?_({reference:C,popper:w},h):C;return{update(g=d){let{reference:u,popper:m}=Object.assign(d,g);if(!m||!u)throw new Error("Popper- or reference-element missing.");return((y,b,M)=>{let{container:D,arrow:E,margin:V,padding:N,position:k,variantFlipOrder:ie,positionFlipOrder:de}=_(_({container:document.documentElement.getBoundingClientRect()},Qa),M),{left:Un,top:$n}=b.style;b.style.left="0",b.style.top="0";let oe=y.getBoundingClientRect(),Ce=b.getBoundingClientRect(),el={t:oe.top-Ce.height-V,b:oe.bottom+V,r:oe.right+V,l:oe.left-Ce.width-V},tl={vs:oe.left,vm:oe.left+oe.width/2-Ce.width/2,ve:oe.left+oe.width-Ce.width,hs:oe.top,hm:oe.bottom-oe.height/2-Ce.height/2,he:oe.bottom-Ce.height},[il,nl="middle"]=k.split("-"),rl=de[il],sl=ie[nl],{top:Os,left:Ds,bottom:Ms,right:As}=D;for(let Ut of rl){let ht=Ut==="t"||Ut==="b",$t=el[Ut],[Bn,jn]=ht?["top","left"]:["left","top"],[zn,Wn]=ht?[Ce.height,Ce.width]:[Ce.width,Ce.height],[ol,al]=ht?[Ms,As]:[As,Ms],[ll,cl]=ht?[Os,Ds]:[Ds,Os];if(!($t<ll||$t+zn+N>ol))for(let Gn of sl){let Bt=tl[(ht?"v":"h")+Gn];if(!(Bt<cl||Bt+Wn+N>al)){if(Bt-=Ce[jn],$t-=Ce[Bn],b.style[jn]=`${Bt}px`,b.style[Bn]=`${$t}px`,E){let qn=ht?oe.width/2:oe.height/2,Ri=Wn/2,Rs=qn>Ri,hl=Bt+{s:Rs?Ri:qn,m:Ri,e:Rs?Ri:Wn-qn}[Gn],ul=$t+{t:zn,b:0,r:0,l:zn}[Ut];E.style[jn]=`${hl}px`,E.style[Bn]=`${ul}px`}return Ut+Gn}}}return b.style.left=Un,b.style.top=$n,null})(u,m,d)}}},Ja=(()=>{class C{static utils=i;static version="1.9.1";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=Ft();_lastColor=Ft();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(h){this.options=h=Object.assign(_({},C.DEFAULT_OPTIONS),h);let{swatches:d,components:g,theme:u,sliders:m,lockOpacity:y,padding:b}=h;["nano","monolith"].includes(u)&&!m&&(h.sliders="h"),g.interaction||(g.interaction={});let{preview:M,opacity:D,hue:E,palette:V}=g;g.opacity=!y&&D,g.palette=V||M||D||E,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),d&&d.length&&d.forEach(de=>this.addSwatch(de));let{button:N,app:k}=this._root;this._nanopop=Za(N,k,{margin:b}),N.setAttribute("role","button"),N.setAttribute("aria-label",this._t("btn:toggle"));let ie=this;this._setupAnimationFrame=requestAnimationFrame(function de(){if(!k.offsetWidth)return requestAnimationFrame(de);ie.setColor(h.default),ie._rePositioningPicker(),h.defaultRepresentation&&(ie._representation=h.defaultRepresentation,ie.setColorRepresentation(ie._representation)),h.showAlways&&ie.show(),ie._initializingActive=!1,ie._emit("init")})}static create=h=>new C(h);_preBuild(){let{options:h}=this;for(let d of["el","container"])h[d]=c(h[d]);this._root=(d=>{let{components:g,useAsButton:u,inline:m,appClass:y,theme:b,lockOpacity:M}=d.options,D=k=>k?"":'style="display:none" hidden',E=k=>d._t(k),V=a(`
      <div :ref="root" class="pickr">

        ${u?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${y||""}" data-theme="${b}" ${m?'style="position: unset"':""} aria-label="${E("ui:dialog")}" role="window">
          <div class="pcr-selection" ${D(g.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${D(g.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${E("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${E("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${D(g.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${E("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${D(g.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${E("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${g.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${D(Object.keys(g.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${D(g.interaction.input)} aria-label="${E("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${M?"HEX":"HEXA"}" type="button" ${D(g.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${M?"RGB":"RGBA"}" type="button" ${D(g.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${M?"HSL":"HSLA"}" type="button" ${D(g.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${M?"HSV":"HSVA"}" type="button" ${D(g.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${D(g.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${E("btn:save")}" type="button" ${D(g.interaction.save)} aria-label="${E("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${E("btn:cancel")}" type="button" ${D(g.interaction.cancel)} aria-label="${E("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${E("btn:clear")}" type="button" ${D(g.interaction.clear)} aria-label="${E("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),N=V.interaction;return N.options.find(k=>!k.hidden&&!k.classList.add("active")),N.type=()=>N.options.find(k=>k.classList.contains("active")),V})(this),h.useAsButton&&(this._root.button=h.el),h.container.appendChild(this._root.root)}_finalBuild(){let h=this.options,d=this._root;if(h.container.removeChild(d.root),h.inline){let g=h.el.parentElement;h.el.nextSibling?g.insertBefore(d.app,h.el.nextSibling):g.appendChild(d.app)}else h.container.appendChild(d.app);h.useAsButton?h.inline&&h.el.remove():h.el.parentNode.replaceChild(d.root,h.el),h.disabled&&this.disable(),h.comparison||(d.button.style.transition="none",h.useAsButton||(d.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){let h=this,d=this.options.components,g=(h.options.sliders||"v").repeat(2),[u,m]=g.match(/^[vh]+$/g)?g:[],y=()=>this._color||(this._color=this._lastColor.clone()),b={palette:Fn({element:h._root.palette.picker,wrapper:h._root.palette.palette,onstop:()=>h._emit("changestop","slider",h),onchange(M,D){if(!d.palette)return;let E=y(),{_root:V,options:N}=h,{lastColor:k,currentColor:ie}=V.preview;h._recalc&&(E.s=100*M,E.v=100-100*D,E.v<0&&(E.v=0),h._updateOutput("slider"));let de=E.toRGBA().toString(0);this.element.style.background=de,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${E.a}), transparent),
                        linear-gradient(to left, hsla(${E.h}, 100%, 50%, ${E.a}), rgba(255, 255, 255, ${E.a}))
                    `,N.comparison?N.useAsButton||h._lastColor||k.style.setProperty("--pcr-color",de):(V.button.style.setProperty("--pcr-color",de),V.button.classList.remove("clear"));let Un=E.toHEXA().toString();for(let{el:$n,color:oe}of h._swatchColors)$n.classList[Un===oe.toHEXA().toString()?"add":"remove"]("pcr-active");ie.style.setProperty("--pcr-color",de)}}),hue:Fn({lock:m==="v"?"h":"v",element:h._root.hue.picker,wrapper:h._root.hue.slider,onstop:()=>h._emit("changestop","slider",h),onchange(M){if(!d.hue||!d.palette)return;let D=y();h._recalc&&(D.h=360*M),this.element.style.backgroundColor=`hsl(${D.h}, 100%, 50%)`,b.palette.trigger()}}),opacity:Fn({lock:u==="v"?"h":"v",element:h._root.opacity.picker,wrapper:h._root.opacity.slider,onstop:()=>h._emit("changestop","slider",h),onchange(M){if(!d.opacity||!d.palette)return;let D=y();h._recalc&&(D.a=Math.round(100*M)/100),this.element.style.background=`rgba(0, 0, 0, ${D.a})`,b.palette.trigger()}}),selectable:Ka({elements:h._root.interaction.options,className:"active",onchange(M){h._representation=M.target.getAttribute("data-type").toUpperCase(),h._recalc&&h._updateOutput("swatch")}})};this._components=b}_bindEvents(){let{_root:h,options:d}=this,g=[n(h.interaction.clear,"click",()=>this._clearColor()),n([h.interaction.cancel,h.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),n(h.interaction.save,"click",()=>{!this.applyColor()&&!d.showAlways&&this.hide()}),n(h.interaction.result,["keyup","input"],u=>{this.setColor(u.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),u.stopImmediatePropagation()}),n(h.interaction.result,["focus","blur"],u=>{this._recalc=u.type==="blur",this._recalc&&this._updateOutput(null)}),n([h.palette.palette,h.palette.picker,h.hue.slider,h.hue.picker,h.opacity.slider,h.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!d.showAlways){let u=d.closeWithKey;g.push(n(h.button,"click",()=>this.isOpen()?this.hide():this.show()),n(document,"keyup",m=>this.isOpen()&&(m.key===u||m.code===u)&&this.hide()),n(document,["touchstart","mousedown"],m=>{this.isOpen()&&!l(m).some(y=>y===h.app||y===h.button)&&this.hide()},{capture:!0}))}if(d.adjustableNumbers){let u={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};p(h.interaction.result,(m,y,b)=>{let M=u[this.getColorRepresentation().toLowerCase()];if(M){let D=M[b],E=m+(D>=100?1e3*y:y);return E<=0?0:Number((E<D?E:D).toPrecision(3))}return m})}if(d.autoReposition&&!d.inline){let u=null,m=this;g.push(n(window,["scroll","resize"],()=>{m.isOpen()&&(d.closeOnScroll&&m.hide(),u===null?(u=setTimeout(()=>u=null,100),requestAnimationFrame(function y(){m._rePositioningPicker(),u!==null&&requestAnimationFrame(y)})):(clearTimeout(u),u=setTimeout(()=>u=null,100)))},{capture:!0}))}this._eventBindings=g}_rePositioningPicker(){let{options:h}=this;if(!h.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:h.position})){let d=this._root.app,g=d.getBoundingClientRect();d.style.top=(window.innerHeight-g.height)/2+"px",d.style.left=(window.innerWidth-g.width)/2+"px"}}_updateOutput(h){let{_root:d,_color:g,options:u}=this;if(d.interaction.type()){let m=`to${d.interaction.type().getAttribute("data-type")}`;d.interaction.result.value=typeof g[m]=="function"?g[m]().toString(u.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",g,h,this)}_clearColor(h=!1){let{_root:d,options:g}=this;g.useAsButton||d.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),d.button.classList.add("clear"),g.showAlways||this.hide(),this._lastColor=null,this._initializingActive||h||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(h){let{values:d,type:g,a:u}=Xa(h),{lockOpacity:m}=this.options,y=u!==void 0&&u!==1;return d&&d.length===3&&(d[3]=void 0),{values:!d||m&&y?null:d,type:g}}_t(h){return this.options.i18n[h]||C.I18N_DEFAULTS[h]}_emit(h,...d){this._eventListener[h].forEach(g=>g(...d,this))}on(h,d){return this._eventListener[h].push(d),this}off(h,d){let g=this._eventListener[h]||[],u=g.indexOf(d);return~u&&g.splice(u,1),this}addSwatch(h){let{values:d}=this._parseLocalColor(h);if(d){let{_swatchColors:g,_root:u}=this,m=Ft(...d),y=o(`<button type="button" style="--pcr-color: ${m.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return u.swatches.appendChild(y),g.push({el:y,color:m}),this._eventBindings.push(n(y,"click",()=>{this.setHSVA(...m.toHSVA(),!0),this._emit("swatchselect",m),this._emit("change",m,"swatch",this)})),!0}return!1}removeSwatch(h){let d=this._swatchColors[h];if(d){let{el:g}=d;return this._root.swatches.removeChild(g),this._swatchColors.splice(h,1),!0}return!1}applyColor(h=!1){let{preview:d,button:g}=this._root,u=this._color.toRGBA().toString(0);return d.lastColor.style.setProperty("--pcr-color",u),this.options.useAsButton||g.style.setProperty("--pcr-color",u),g.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||h||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(h=>s(...h)),Object.keys(this._components).forEach(h=>this._components[h].destroy())}destroyAndRemove(){this.destroy();let{root:h,app:d}=this._root;h.parentElement&&h.parentElement.removeChild(h),d.parentElement.removeChild(d),Object.keys(this).forEach(g=>this[g]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(h=360,d=0,g=0,u=1,m=!1){let y=this._recalc;if(this._recalc=!1,h<0||h>360||d<0||d>100||g<0||g>100||u<0||u>1)return!1;this._color=Ft(h,d,g,u);let{hue:b,opacity:M,palette:D}=this._components;return b.update(h/360),M.update(u),D.update(d/100,1-g/100),m||this.applyColor(),y&&this._updateOutput(),this._recalc=y,!0}setColor(h,d=!1){if(h===null)return this._clearColor(d),!0;let{values:g,type:u}=this._parseLocalColor(h);if(g){let m=u.toUpperCase(),{options:y}=this._root.interaction,b=y.find(M=>M.getAttribute("data-type")===m);if(b&&!b.hidden)for(let M of y)M.classList[M===b?"add":"remove"]("active");return!!this.setHSVA(...g,d)&&this.setColorRepresentation(m)}return!1}setColorRepresentation(h){return h=h.toUpperCase(),!!this._root.interaction.options.find(d=>d.getAttribute("data-type").startsWith(h)&&!d.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return C})();return e=e.default})())});var xr=class extends wo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Or=class r extends xr{static makeCurrent(){yo(new r)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=gl();return i==null?null:ml(i)}resetBaseElement(){Jt=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return So(document.cookie,e)}},Jt=null;function gl(){return Jt=Jt||document.querySelector("base"),Jt?Jt.getAttribute("href"):null}function ml(r){return new URL(r,document.baseURI).pathname}var Dr=class{addToWindow(e){We.getAngularTestability=(t,n=!0)=>{let s=e.findTestabilityInTree(t,n);if(s==null)throw new q(5103,!1);return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements();let i=t=>{let n=We.getAllAngularTestabilities(),s=n.length,o=function(){s--,s==0&&t()};n.forEach(a=>{a.whenStable(o)})};We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,t){if(i==null)return null;let n=e.getTestability(i);return n??(t?Bi().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},vl=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),Mr=new K(""),ko=(()=>{let e=class e{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,s){return this._findPluginFor(n).addEventListener(t,n,s)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(o=>o.supports(t)),!n)throw new q(5101,!1);return this._eventNameToPlugin.set(t,n),n}};e.\u0275fac=function(n){return new(n||e)($(Mr),$(ae))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),zi=class{constructor(e){this._doc=e}},Sr="ng-app-id",Lo=(()=>{let e=class e{constructor(t,n,s,o={}){this.doc=t,this.appId=n,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Cr(o),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(s=>s.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sr}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(s=>{s.textContent!=null&&n.set(s.textContent,s)}),n}return null}changeUsageCount(t,n){let s=this.styleRef;if(s.has(t)){let o=s.get(t);return o.usage+=n,o.usage}return s.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let s=this.styleNodesInDOM,o=s?.get(n);if(o?.parentNode===t)return s.delete(n),o.removeAttribute(Sr),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=n,this.platformIsServer&&a.setAttribute(Sr,this.appId),t.appendChild(a),a}}addStyleToHost(t,n){let s=this.getStyleElement(t,n),o=this.styleRef,a=o.get(n)?.elements;a?a.push(s):o.set(n,{elements:[s],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(n){return new(n||e)($(me),$(Li),$(cr,8),$(qt))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),Er={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rr=/%COMP%/g,Vo="%COMP%",yl=`_nghost-${Vo}`,wl=`_ngcontent-${Vo}`,bl=!0,_l=new K("",{providedIn:"root",factory:()=>bl});function Cl(r){return wl.replace(Rr,r)}function Sl(r){return yl.replace(Rr,r)}function No(r,e){return e.map(i=>i.replace(Rr,r))}var Wi=(()=>{let e=class e{constructor(t,n,s,o,a,l,c,p=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Cr(l),this.defaultRenderer=new ei(t,a,c,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===zt.ShadowDom&&(n=z(_({},n),{encapsulation:zt.Emulated}));let s=this.getOrCreateRenderer(t,n);return s instanceof Gi?s.applyToHost(t):s instanceof ti&&s.applyStyles(),s}getOrCreateRenderer(t,n){let s=this.rendererByCompId,o=s.get(n.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,p=this.sharedStylesHost,S=this.removeStylesOnCompDestroy,O=this.platformIsServer;switch(n.encapsulation){case zt.Emulated:o=new Gi(c,p,n,this.appId,S,a,l,O);break;case zt.ShadowDom:return new Ar(c,p,t,n,a,l,this.nonce,O);default:o=new ti(c,p,n,S,a,l,O);break}s.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(n){return new(n||e)($(ko),$(Lo),$(Li),$(_l),$(me),$(qt),$(ae),$(cr))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),ei=class{constructor(e,i,t,n){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(Er[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(Io(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(Io(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new q(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,n){if(n){i=n+":"+i;let s=Er[n];s?e.setAttributeNS(s,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let n=Er[t];n?e.removeAttributeNS(n,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,n){n&(Yt.DashCase|Yt.Important)?e.style.setProperty(i,t,n&Yt.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&Yt.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=Bi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function Io(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Ar=class extends ei{constructor(e,i,t,n,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=No(n.id,n.styles);for(let p of c){let S=document.createElement("style");a&&S.setAttribute("nonce",a),S.textContent=p,this.shadowRoot.appendChild(S)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ti=class extends ei{constructor(e,i,t,n,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=n,this.styles=l?No(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gi=class extends ti{constructor(e,i,t,n,s,o,a,l){let c=n+"-"+t.id;super(e,i,t,s,o,a,l,c),this.contentAttr=Cl(c),this.hostAttr=Sl(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},El=(()=>{let e=class e extends zi{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,s){return t.addEventListener(n,s,!1),()=>this.removeEventListener(t,n,s)}removeEventListener(t,n,s){return t.removeEventListener(n,s)}};e.\u0275fac=function(n){return new(n||e)($(me))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),To=["alt","control","meta","shift"],xl={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ol={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},Dl=(()=>{let e=class e extends zi{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,n,s){let o=e.parseEventName(n),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Bi().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let n=t.toLowerCase().split("."),s=n.shift();if(n.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(n.pop()),a="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),a="code."),To.forEach(p=>{let S=n.indexOf(p);S>-1&&(n.splice(S,1),a+=p+".")}),a+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(t,n){let s=xl[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(s=t.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),To.forEach(a=>{if(a!==s){let l=Ol[a];l(t)&&(o+=a+".")}}),o+=s,o===n)}static eventCallback(t,n,s){return o=>{e.matchEventFullKeyCode(o,t)&&s.runGuarded(()=>n(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(n){return new(n||e)($(me))},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})();function Ml(){Or.makeCurrent()}function Al(){return new lr}function Rl(){return zs(document),document}var Il=[{provide:qt,useValue:Mo},{provide:Ws,useValue:Ml,multi:!0},{provide:me,useFactory:Rl,deps:[]}],Ho=fo(go,"browser",Il),Tl=new K(""),Pl=[{provide:Fi,useClass:Dr,deps:[]},{provide:uo,useClass:Ui,deps:[ae,vr,Fi]},{provide:Ui,useClass:Ui,deps:[ae,vr,Fi]}],kl=[{provide:js,useValue:"root"},{provide:lr,useFactory:Al,deps:[]},{provide:Mr,useClass:El,multi:!0,deps:[me,ae,qt]},{provide:Mr,useClass:Dl,multi:!0,deps:[me]},Wi,Lo,ko,{provide:Ni,useExisting:Wi},{provide:Ro,useClass:vl,deps:[]},[]],Fo=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Li,useValue:t.appId}]}}};e.\u0275fac=function(n){return new(n||e)($(Tl,12))},e.\u0275mod=Ie({type:e}),e.\u0275inj=Re({providers:[...kl,...Pl],imports:[ji,mo]});let r=e;return r})();var Uo=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(n){return new(n||e)($(me))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var P="primary",mi=Symbol("RouteTitle"),Lr=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function xt(r){return new Lr(r)}function Vl(r,e,i){let t=i.path.split("/");if(t.length>r.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<r.length))return null;let n={};for(let s=0;s<t.length;s++){let o=t[s],a=r[s];if(o.startsWith(":"))n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,t.length),posParams:n}}function Nl(r,e){if(r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(!Te(r[i],e[i]))return!1;return!0}function Te(r,e){let i=r?Vr(r):void 0,t=e?Vr(e):void 0;if(!i||!t||i.length!=t.length)return!1;let n;for(let s=0;s<i.length;s++)if(n=i[s],!Ko(r[n],e[n]))return!1;return!0}function Vr(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function Ko(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let i=[...r].sort(),t=[...e].sort();return i.every((n,s)=>t[s]===n)}else return r===e}function Qo(r){return r.length>0?r[r.length-1]:null}function Qe(r){return Ps(r)?r:yr(r)?pe(Promise.resolve(r)):I(r)}var Hl={exact:Jo,subset:ea},Zo={exact:Fl,subset:Ul,ignored:()=>!0};function Bo(r,e,i){return Hl[i.paths](r.root,e.root,i.matrixParams)&&Zo[i.queryParams](r.queryParams,e.queryParams)&&!(i.fragment==="exact"&&r.fragment!==e.fragment)}function Fl(r,e){return Te(r,e)}function Jo(r,e,i){if(!st(r.segments,e.segments)||!Xi(r.segments,e.segments,i)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!r.children[t]||!Jo(r.children[t],e.children[t],i))return!1;return!0}function Ul(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(i=>Ko(r[i],e[i]))}function ea(r,e,i){return ta(r,e,e.segments,i)}function ta(r,e,i,t){if(r.segments.length>i.length){let n=r.segments.slice(0,i.length);return!(!st(n,i)||e.hasChildren()||!Xi(n,i,t))}else if(r.segments.length===i.length){if(!st(r.segments,i)||!Xi(r.segments,i,t))return!1;for(let n in e.children)if(!r.children[n]||!ea(r.children[n],e.children[n],t))return!1;return!0}else{let n=i.slice(0,r.segments.length),s=i.slice(r.segments.length);return!st(r.segments,n)||!Xi(r.segments,n,t)||!r.children[P]?!1:ta(r.children[P],e,s,t)}}function Xi(r,e,i){return e.every((t,n)=>Zo[i](r[n].parameters,t.parameters))}var Ye=class{constructor(e=new H([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=xt(this.queryParams),this._queryParamMap}toString(){return jl.serialize(this)}},H=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ki(this)}},rt=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=xt(this.parameters),this._parameterMap}toString(){return na(this)}};function $l(r,e){return st(r,e)&&r.every((i,t)=>Te(i.parameters,e[t].parameters))}function st(r,e){return r.length!==e.length?!1:r.every((i,t)=>i.path===e[t].path)}function Bl(r,e){let i=[];return Object.entries(r.children).forEach(([t,n])=>{t===P&&(i=i.concat(e(n,t)))}),Object.entries(r.children).forEach(([t,n])=>{t!==P&&(i=i.concat(e(n,t)))}),i}var vi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:()=>new li,providedIn:"root"});let r=e;return r})(),li=class{parse(e){let i=new Hr(e);return new Ye(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${ii(e.root,!0)}`,t=Gl(e.queryParams),n=typeof e.fragment=="string"?`#${zl(e.fragment)}`:"";return`${i}${t}${n}`}},jl=new li;function Ki(r){return r.segments.map(e=>na(e)).join("/")}function ii(r,e){if(!r.hasChildren())return Ki(r);if(e){let i=r.children[P]?ii(r.children[P],!1):"",t=[];return Object.entries(r.children).forEach(([n,s])=>{n!==P&&t.push(`${n}:${ii(s,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=Bl(r,(t,n)=>n===P?[ii(r.children[P],!1)]:[`${n}:${ii(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[P]!=null?`${Ki(r)}/${i[0]}`:`${Ki(r)}/(${i.join("//")})`}}function ia(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qi(r){return ia(r).replace(/%3B/gi,";")}function zl(r){return encodeURI(r)}function Nr(r){return ia(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Qi(r){return decodeURIComponent(r)}function jo(r){return Qi(r.replace(/\+/g,"%20"))}function na(r){return`${Nr(r.path)}${Wl(r.parameters)}`}function Wl(r){return Object.entries(r).map(([e,i])=>`;${Nr(e)}=${Nr(i)}`).join("")}function Gl(r){let e=Object.entries(r).map(([i,t])=>Array.isArray(t)?t.map(n=>`${qi(i)}=${qi(n)}`).join("&"):`${qi(i)}=${qi(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var ql=/^[^\/()?;#]+/;function Ir(r){let e=r.match(ql);return e?e[0]:""}var Yl=/^[^\/()?;=#]+/;function Xl(r){let e=r.match(Yl);return e?e[0]:""}var Kl=/^[^=?&#]+/;function Ql(r){let e=r.match(Kl);return e?e[0]:""}var Zl=/^[^&#]+/;function Jl(r){let e=r.match(Zl);return e?e[0]:""}var Hr=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new H([],{}):new H([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[P]=new H(e,i)),t}parseSegment(){let e=Ir(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new q(4009,!1);return this.capture(e),new rt(Qi(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=Xl(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let n=Ir(this.remaining);n&&(t=n,this.capture(t))}e[Qi(i)]=Qi(t)}parseQueryParam(e){let i=Ql(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let o=Jl(this.remaining);o&&(t=o,this.capture(t))}let n=jo(i),s=jo(t);if(e.hasOwnProperty(n)){let o=e[n];Array.isArray(o)||(o=[o],e[n]=o),o.push(s)}else e[n]=s}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=Ir(this.remaining),n=this.remaining[t.length];if(n!=="/"&&n!==")"&&n!==";")throw new q(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=P);let o=this.parseChildren();i[s]=Object.keys(o).length===1?o[P]:new H([],o),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new q(4011,!1)}};function ra(r){return r.segments.length>0?new H([],{[P]:r}):r}function sa(r){let e={};for(let[t,n]of Object.entries(r.children)){let s=sa(n);if(t===P&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[t]=s)}let i=new H(r.segments,e);return ec(i)}function ec(r){if(r.numberOfChildren===1&&r.children[P]){let e=r.children[P];return new H(r.segments.concat(e.segments),e.children)}return r}function Ot(r){return r instanceof Ye}function tc(r,e,i=null,t=null){let n=oa(r);return aa(n,e,i,t)}function oa(r){let e;function i(s){let o={};for(let l of s.children){let c=i(l);o[l.outlet]=c}let a=new H(s.url,o);return s===r&&(e=a),a}let t=i(r.root),n=ra(t);return e??n}function aa(r,e,i,t){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return Tr(n,n,n,i,t);let s=ic(e);if(s.toRoot())return Tr(n,n,new H([],{}),i,t);let o=nc(s,n,r),a=o.processChildren?si(o.segmentGroup,o.index,s.commands):ca(o.segmentGroup,o.index,s.commands);return Tr(n,o.segmentGroup,a,i,t)}function Zi(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function ci(r){return typeof r=="object"&&r!=null&&r.outlets}function Tr(r,e,i,t,n){let s={};t&&Object.entries(t).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(p=>`${p}`):`${c}`});let o;r===e?o=i:o=la(r,e,i);let a=ra(sa(o));return new Ye(a,s,n)}function la(r,e,i){let t={};return Object.entries(r.children).forEach(([n,s])=>{s===e?t[n]=i:t[n]=la(s,e,i)}),new H(r.segments,t)}var Ji=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&Zi(t[0]))throw new q(4003,!1);let n=t.find(ci);if(n&&n!==Qo(t))throw new q(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ic(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new Ji(!0,0,r);let e=0,i=!1,t=r.reduce((n,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return typeof s!="string"?[...n,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&n.push(a))}),n):[...n,s]},[]);return new Ji(i,e,t)}var St=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function nc(r,e,i){if(r.isAbsolute)return new St(e,!0,0);if(!i)return new St(e,!1,NaN);if(i.parent===null)return new St(i,!0,0);let t=Zi(r.commands[0])?0:1,n=i.segments.length-1+t;return rc(i,n,r.numberOfDoubleDots)}function rc(r,e,i){let t=r,n=e,s=i;for(;s>n;){if(s-=n,t=t.parent,!t)throw new q(4005,!1);n=t.segments.length}return new St(t,!1,n-s)}function sc(r){return ci(r[0])?r[0].outlets:{[P]:r}}function ca(r,e,i){if(r??=new H([],{}),r.segments.length===0&&r.hasChildren())return si(r,e,i);let t=oc(r,e,i),n=i.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let s=new H(r.segments.slice(0,t.pathIndex),{});return s.children[P]=new H(r.segments.slice(t.pathIndex),r.children),si(s,0,n)}else return t.match&&n.length===0?new H(r.segments,{}):t.match&&!r.hasChildren()?Fr(r,e,i):t.match?si(r,0,n):Fr(r,e,i)}function si(r,e,i){if(i.length===0)return new H(r.segments,{});{let t=sc(i),n={};if(Object.keys(t).some(s=>s!==P)&&r.children[P]&&r.numberOfChildren===1&&r.children[P].segments.length===0){let s=si(r.children[P],e,i);return new H(r.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[s]=ca(r.children[s],e,o))}),Object.entries(r.children).forEach(([s,o])=>{t[s]===void 0&&(n[s]=o)}),new H(r.segments,n)}}function oc(r,e,i){let t=0,n=e,s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(t>=i.length)return s;let o=r.segments[n],a=i[t];if(ci(a))break;let l=`${a}`,c=t<i.length-1?i[t+1]:null;if(n>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Wo(l,c,o))return s;t+=2}else{if(!Wo(l,{},o))return s;t++}n++}return{match:!0,pathIndex:n,commandIndex:t}}function Fr(r,e,i){let t=r.segments.slice(0,e),n=0;for(;n<i.length;){let s=i[n];if(ci(s)){let l=ac(s.outlets);return new H(t,l)}if(n===0&&Zi(i[0])){let l=r.segments[e];t.push(new rt(l.path,zo(i[0]))),n++;continue}let o=ci(s)?s.outlets[P]:`${s}`,a=n<i.length-1?i[n+1]:null;o&&a&&Zi(a)?(t.push(new rt(o,zo(a))),n+=2):(t.push(new rt(o,{})),n++)}return new H(t,{})}function ac(r){let e={};return Object.entries(r).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=Fr(new H([],{}),0,t))}),e}function zo(r){let e={};return Object.entries(r).forEach(([i,t])=>e[i]=`${t}`),e}function Wo(r,e,i){return r==i.path&&Te(e,i.parameters)}var oi="imperative",re=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(re||{}),Oe=class{constructor(e,i){this.id=e,this.url=i}},Dt=class extends Oe{constructor(e,i,t="imperative",n=null){super(e,i),this.type=re.NavigationStart,this.navigationTrigger=t,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Be=class extends Oe{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=re.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ye=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(ye||{}),en=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(en||{}),Xe=class extends Oe{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=re.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Ke=class extends Oe{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=re.NavigationSkipped}},hi=class extends Oe{constructor(e,i,t,n){super(e,i),this.error=t,this.target=n,this.type=re.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tn=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ur=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$r=class extends Oe{constructor(e,i,t,n,s){super(e,i),this.urlAfterRedirects=t,this.state=n,this.shouldActivate=s,this.type=re.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Br=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jr=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=re.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zr=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Wr=class{constructor(e){this.route=e,this.type=re.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gr=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qr=class{constructor(e){this.snapshot=e,this.type=re.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yr=class{constructor(e){this.snapshot=e,this.type=re.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xr=class{constructor(e){this.snapshot=e,this.type=re.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},nn=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=re.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},ui=class{},di=class{constructor(e){this.url=e}};var Kr=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new yi,this.attachRef=null}},yi=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){let s=this.getOrCreateContext(t);s.outlet=n,this.contexts.set(t,s)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new Kr,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),rn=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=Qr(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=Qr(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=Zr(e,this._root);return i.length<2?[]:i[i.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return Zr(e,this._root).map(i=>i.value)}};function Qr(r,e){if(r===e.value)return e;for(let i of e.children){let t=Qr(r,i);if(t)return t}return null}function Zr(r,e){if(r===e.value)return[e];for(let i of e.children){let t=Zr(r,i);if(t.length)return t.unshift(e),t}return[]}var ve=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function Ct(r){let e={};return r&&r.children.forEach(i=>e[i.value.outlet]=i),e}var sn=class extends rn{constructor(e,i){super(e),this.snapshot=i,ls(this,e)}toString(){return this.snapshot.toString()}};function ha(r){let e=lc(r),i=new Ee([new rt("",{})]),t=new Ee({}),n=new Ee({}),s=new Ee({}),o=new Ee(""),a=new Mt(i,t,s,o,n,P,r,e.root);return a.snapshot=e.root,new sn(new ve(a,[]),e)}function lc(r){let e={},i={},t={},n="",s=new pi([],e,t,n,i,P,r,null,{});return new on("",new ve(s,[]))}var Mt=class{constructor(e,i,t,n,s,o,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=n,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(W(c=>c[mi]))??I(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(W(e=>xt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(W(e=>xt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function as(r,e,i="emptyOnly"){let t,{routeConfig:n}=r;return e!==null&&(i==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:_(_({},e.params),r.params),data:_(_({},e.data),r.data),resolve:_(_(_(_({},r.data),e.data),n?.data),r._resolvedData)}:t={params:_({},r.params),data:_({},r.data),resolve:_(_({},r.data),r._resolvedData??{})},n&&da(n)&&(t.resolve[mi]=n.title),t}var pi=class{get title(){return this.data?.[mi]}constructor(e,i,t,n,s,o,a,l,c){this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=xt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=xt(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},on=class extends rn{constructor(e,i){super(i),this.url=e,ls(this,i)}toString(){return ua(this._root)}};function ls(r,e){e.value._routerState=r,e.children.forEach(i=>ls(r,i))}function ua(r){let e=r.children.length>0?` { ${r.children.map(ua).join(", ")} } `:"";return`${r.value}${e}`}function Pr(r){if(r.snapshot){let e=r.snapshot,i=r._futureSnapshot;r.snapshot=i,Te(e.queryParams,i.queryParams)||r.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&r.fragmentSubject.next(i.fragment),Te(e.params,i.params)||r.paramsSubject.next(i.params),Nl(e.url,i.url)||r.urlSubject.next(i.url),Te(e.data,i.data)||r.dataSubject.next(i.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function Jr(r,e){let i=Te(r.params,e.params)&&$l(r.url,e.url),t=!r.parent!=!e.parent;return i&&!t&&(!r.parent||Jr(r.parent,e.parent))}function da(r){return typeof r.title=="string"||r.title===null}var cs=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=P,this.activateEvents=new xe,this.deactivateEvents=new xe,this.attachEvents=new xe,this.detachEvents=new xe,this.parentContexts=A(yi),this.location=A(Zs),this.changeDetector=A($e),this.environmentInjector=A(mt),this.inputBinder=A(un,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:s}=t.name;if(n)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new q(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new q(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new q(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new q(4013,!1);this._activatedRoute=t;let s=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new es(t,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=gt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[ki]});let r=e;return r})(),es=class r{__ngOutletInjector(e){return new r(this.route,this.childContexts,e)}constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===Mt?this.route:e===yi?this.childContexts:this.parent.get(e,i)}},un=new K(""),Go=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:n}=t,s=Ii([n.queryParams,n.params,n.data]).pipe(Me(([o,a,l],c)=>(l=_(_(_({},o),a),l),c===0?I(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(t);return}let a=vo(n.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,s)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})();function cc(r,e,i){let t=fi(r,e._root,i?i._root:void 0);return new sn(t,e)}function fi(r,e,i){if(i&&r.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let n=hc(r,e,i);return new ve(t,n)}else{if(r.shouldAttach(e.value)){let s=r.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fi(r,a)),o}}let t=uc(e.value),n=e.children.map(s=>fi(r,s));return new ve(t,n)}}function hc(r,e,i){return e.children.map(t=>{for(let n of i.children)if(r.shouldReuseRoute(t.value,n.value.snapshot))return fi(r,t,n);return fi(r,t)})}function uc(r){return new Mt(new Ee(r.url),new Ee(r.params),new Ee(r.queryParams),new Ee(r.fragment),new Ee(r.data),r.outlet,r.component,r)}var pa="ngNavigationCancelingError";function fa(r,e){let{redirectTo:i,navigationBehaviorOptions:t}=Ot(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=ga(!1,ye.Redirect);return n.url=i,n.navigationBehaviorOptions=t,n}function ga(r,e){let i=new Error(`NavigationCancelingError: ${r||""}`);return i[pa]=!0,i.cancellationCode=e,i}function dc(r){return ma(r)&&Ot(r.url)}function ma(r){return!!r&&r[pa]}var pc=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=it({type:e,selectors:[["ng-component"]],standalone:!0,features:[lo],decls:1,vars:0,template:function(n,s){n&1&&Z(0,"router-outlet")},dependencies:[cs],encapsulation:2});let r=e;return r})();function fc(r,e){return r.providers&&!r._injector&&(r._injector=dr(r.providers,e,`Route: ${r.path}`)),r._injector??e}function hs(r){let e=r.children&&r.children.map(hs),i=e?z(_({},r),{children:e}):_({},r);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==P&&(i.component=pc),i}function Pe(r){return r.outlet||P}function gc(r,e){let i=r.filter(t=>Pe(t)===e);return i.push(...r.filter(t=>Pe(t)!==e)),i}function wi(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var mc=(r,e,i,t)=>W(n=>(new ts(e,n.targetRouterState,n.currentRouterState,i,t).activate(r),n)),ts=class{constructor(e,i,t,n,s){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=n,this.inputBindingEnabled=s}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),Pr(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let n=Ct(i);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,n[o],t),delete n[o]}),Object.values(n).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(n===s)if(n.component){let o=t.getContext(n.outlet);o&&this.deactivateChildRoutes(e,i,o.children)}else this.deactivateChildRoutes(e,i,t);else s&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=Ct(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);if(t&&t.outlet){let o=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=Ct(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let n=Ct(i);e.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],t),this.forwardEvent(new Xr(s.value.snapshot))}),e.children.length&&this.forwardEvent(new qr(e.value.snapshot))}activateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(Pr(n),n===s)if(n.component){let o=t.getOrCreateContext(n.outlet);this.activateChildRoutes(e,i,o.children)}else this.activateChildRoutes(e,i,t);else if(n.component){let o=t.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Pr(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=wi(n.snapshot);o.attachRef=null,o.route=n,o.injector=a,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,t)}},an=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Et=class{constructor(e,i){this.component=e,this.route=i}};function vc(r,e,i){let t=r._root,n=e?e._root:null;return ni(t,n,i,[t.value])}function yc(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function Rt(r,e){let i=Symbol(),t=e.get(r,i);return t===i?typeof r=="function"&&!$s(r)?r:e.get(r):t}function ni(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ct(e);return r.children.forEach(o=>{wc(o,s[o.value.outlet],i,t.concat([o.value]),n),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ai(a,i.getContext(o),n)),n}function wc(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=e?e.value:null,a=i?i.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=bc(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new an(t)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ni(r,e,a?a.children:null,t,n):ni(r,e,i,t,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new Et(a.outlet.component,o))}else o&&ai(e,a,n),n.canActivateChecks.push(new an(t)),s.component?ni(r,null,a?a.children:null,t,n):ni(r,null,i,t,n);return n}function bc(r,e,i){if(typeof i=="function")return i(r,e);switch(i){case"pathParamsChange":return!st(r.url,e.url);case"pathParamsOrQueryParamsChange":return!st(r.url,e.url)||!Te(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Jr(r,e)||!Te(r.queryParams,e.queryParams);case"paramsChange":default:return!Jr(r,e)}}function ai(r,e,i){let t=Ct(r),n=r.value;Object.entries(t).forEach(([s,o])=>{n.component?e?ai(o,e.children.getContext(s),i):ai(o,null,i):ai(o,e,i)}),n.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new Et(e.outlet.component,n)):i.canDeactivateChecks.push(new Et(null,n)):i.canDeactivateChecks.push(new Et(null,n))}function bi(r){return typeof r=="function"}function _c(r){return typeof r=="boolean"}function Cc(r){return r&&bi(r.canLoad)}function Sc(r){return r&&bi(r.canActivate)}function Ec(r){return r&&bi(r.canActivateChild)}function xc(r){return r&&bi(r.canDeactivate)}function Oc(r){return r&&bi(r.canMatch)}function va(r){return r instanceof ks||r?.name==="EmptyError"}var Yi=Symbol("INITIAL_VALUE");function At(){return Me(r=>Ii(r.map(e=>e.pipe(ft(1),Fs(Yi)))).pipe(W(e=>{for(let i of e)if(i!==!0){if(i===Yi)return Yi;if(i===!1||i instanceof Ye)return i}return!0}),Ue(e=>e!==Yi),ft(1)))}function Dc(r,e){return fe(i=>{let{targetSnapshot:t,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=i;return o.length===0&&s.length===0?I(z(_({},i),{guardsResult:!0})):Mc(o,t,n,r).pipe(fe(a=>a&&_c(a)?Ac(t,s,r,e):I(a)),W(a=>z(_({},i),{guardsResult:a})))})}function Mc(r,e,i,t){return pe(r).pipe(fe(n=>kc(n.component,n.route,i,e,t)),ze(n=>n!==!0,!0))}function Ac(r,e,i,t){return pe(e).pipe(pt(n=>Ls(Ic(n.route.parent,t),Rc(n.route,t),Pc(r,n.path,i),Tc(r,n.route,i))),ze(n=>n!==!0,!0))}function Rc(r,e){return r!==null&&e&&e(new Yr(r)),I(!0)}function Ic(r,e){return r!==null&&e&&e(new Gr(r)),I(!0)}function Tc(r,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return I(!0);let n=t.map(s=>Zn(()=>{let o=wi(e)??i,a=Rt(s,o),l=Sc(a)?a.canActivate(e,r):Ge(o,()=>a(e,r));return Qe(l).pipe(ze())}));return I(n).pipe(At())}function Pc(r,e,i){let t=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>yc(o)).filter(o=>o!==null).map(o=>Zn(()=>{let a=o.guards.map(l=>{let c=wi(o.node)??i,p=Rt(l,c),S=Ec(p)?p.canActivateChild(t,r):Ge(c,()=>p(t,r));return Qe(S).pipe(ze())});return I(a).pipe(At())}));return I(s).pipe(At())}function kc(r,e,i,t,n){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return I(!0);let o=s.map(a=>{let l=wi(e)??n,c=Rt(a,l),p=xc(c)?c.canDeactivate(r,e,i,t):Ge(l,()=>c(r,e,i,t));return Qe(p).pipe(ze())});return I(o).pipe(At())}function Lc(r,e,i,t){let n=e.canLoad;if(n===void 0||n.length===0)return I(!0);let s=n.map(o=>{let a=Rt(o,r),l=Cc(a)?a.canLoad(e,i):Ge(r,()=>a(e,i));return Qe(l)});return I(s).pipe(At(),ya(t))}function ya(r){return Ts(J(e=>{if(Ot(e))throw fa(r,e)}),W(e=>e===!0))}function Vc(r,e,i,t){let n=e.canMatch;if(!n||n.length===0)return I(!0);let s=n.map(o=>{let a=Rt(o,r),l=Oc(a)?a.canMatch(e,i):Ge(r,()=>a(e,i));return Qe(l)});return I(s).pipe(At(),ya(t))}var gi=class{constructor(e){this.segmentGroup=e||null}},ln=class extends Error{constructor(e){super(),this.urlTree=e}};function _t(r){return jt(new gi(r))}function Nc(r){return jt(new q(4e3,!1))}function Hc(r){return jt(ga(!1,ye.GuardRejected))}var is=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],n=i.root;for(;;){if(t=t.concat(n.segments),n.numberOfChildren===0)return I(t);if(n.numberOfChildren>1||!n.children[P])return Nc(e.redirectTo);n=n.children[P]}}applyRedirectCommands(e,i,t){let n=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i.startsWith("/"))throw new ln(n);return n}applyRedirectCreateUrlTree(e,i,t,n){let s=this.createSegmentGroup(e,i.root,t,n);return new Ye(s,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([n,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);t[n]=i[a]}else t[n]=s}),t}createSegmentGroup(e,i,t,n){let s=this.createSegments(e,i.segments,t,n),o={};return Object.entries(i.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,t,n)}),new H(s,o)}createSegments(e,i,t,n){return i.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,n):this.findOrReturn(s,t))}findPosParam(e,i,t){let n=t[i.path.substring(1)];if(!n)throw new q(4001,!1);return n}findOrReturn(e,i){let t=0;for(let n of i){if(n.path===e.path)return i.splice(t),n;t++}return e}},ns={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Fc(r,e,i,t,n){let s=us(r,e,i);return s.matched?(t=fc(e,t),Vc(t,e,i,n).pipe(W(o=>o===!0?s:_({},ns)))):I(s)}function us(r,e,i){if(e.path==="**")return Uc(i);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||i.length>0)?_({},ns):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let n=(e.matcher||Vl)(i,r,e);if(!n)return _({},ns);let s={};Object.entries(n.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=n.consumed.length>0?_(_({},s),n.consumed[n.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:i.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function Uc(r){return{matched:!0,parameters:r.length>0?Qo(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function qo(r,e,i,t){return i.length>0&&jc(r,i,t)?{segmentGroup:new H(e,Bc(t,new H(i,r.children))),slicedSegments:[]}:i.length===0&&zc(r,i,t)?{segmentGroup:new H(r.segments,$c(r,i,t,r.children)),slicedSegments:i}:{segmentGroup:new H(r.segments,r.children),slicedSegments:i}}function $c(r,e,i,t){let n={};for(let s of i)if(dn(r,e,s)&&!t[Pe(s)]){let o=new H([],{});n[Pe(s)]=o}return _(_({},t),n)}function Bc(r,e){let i={};i[P]=e;for(let t of r)if(t.path===""&&Pe(t)!==P){let n=new H([],{});i[Pe(t)]=n}return i}function jc(r,e,i){return i.some(t=>dn(r,e,t)&&Pe(t)!==P)}function zc(r,e,i){return i.some(t=>dn(r,e,t))}function dn(r,e,i){return(r.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Wc(r,e,i,t){return Pe(r)!==t&&(t===P||!dn(e,i,r))?!1:us(e,r,i).matched}function Gc(r,e,i){return e.length===0&&!r.children[i]}var rs=class{};function qc(r,e,i,t,n,s,o="emptyOnly"){return new ss(r,e,i,t,n,o,s).recognize()}var Yc=31,ss=class{constructor(e,i,t,n,s,o,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=n,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new is(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new q(4002,`'${e.segmentGroup}'`)}recognize(){let e=qo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(W(i=>{let t=new pi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},P,this.rootComponentType,null,{}),n=new ve(t,i),s=new on("",n),o=tc(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,P).pipe(dt(t=>{if(t instanceof ln)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof gi?this.noMatchError(t):t}))}inheritParamsAndData(e,i){let t=e.value,n=as(t,i,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(s=>this.inheritParamsAndData(s,t))}processSegmentGroup(e,i,t,n){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t):this.processSegment(e,i,t,t.segments,n,!0).pipe(W(s=>s instanceof ve?[s]:[]))}processChildren(e,i,t){let n=[];for(let s of Object.keys(t.children))s==="primary"?n.unshift(s):n.push(s);return pe(n).pipe(pt(s=>{let o=t.children[s],a=gc(i,s);return this.processSegmentGroup(e,a,o,s)}),Hs((s,o)=>(s.push(...o),s)),Jn(null),Ns(),fe(s=>{if(s===null)return _t(t);let o=wa(s);return Xc(o),I(o)}))}processSegment(e,i,t,n,s,o){return pe(i).pipe(pt(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,t,n,s,o).pipe(dt(l=>{if(l instanceof gi)return I(null);throw l}))),ze(a=>!!a),dt(a=>{if(va(a))return Gc(t,n,s)?I(new rs):_t(t);throw a}))}processSegmentAgainstRoute(e,i,t,n,s,o,a){return Wc(t,n,s,o)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,t,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,t,s,o):_t(n):_t(n)}expandSegmentAgainstRouteUsingRedirect(e,i,t,n,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:p}=us(i,n,s);if(!a)return _t(i);n.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Yc&&(this.allowRedirects=!1));let S=this.applyRedirects.applyRedirectCommands(l,n.redirectTo,c);return this.applyRedirects.lineralizeSegments(n,S).pipe(fe(O=>this.processSegment(e,t,i,O.concat(p),o,!1)))}matchSegmentAgainstRoute(e,i,t,n,s){let o=Fc(i,t,n,e,this.urlSerializer);return t.path==="**"&&(i.children={}),o.pipe(Me(a=>a.matched?(e=t._injector??e,this.getChildConfig(e,t,n).pipe(Me(({routes:l})=>{let c=t._loadedInjector??e,{consumedSegments:p,remainingSegments:S,parameters:O}=a,L=new pi(p,O,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,Qc(t),Pe(t),t.component??t._loadedComponent??null,t,Zc(t)),{segmentGroup:tt,slicedSegments:Fe}=qo(i,p,S,l);if(Fe.length===0&&tt.hasChildren())return this.processChildren(c,l,tt).pipe(W(De=>De===null?null:new ve(L,De)));if(l.length===0&&Fe.length===0)return I(new ve(L,[]));let Ht=Pe(t)===s;return this.processSegment(c,l,tt,Fe,Ht?P:s,!0).pipe(W(De=>new ve(L,De instanceof ve?[De]:[])))}))):_t(i)))}getChildConfig(e,i,t){return i.children?I({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?I({routes:i._loadedRoutes,injector:i._loadedInjector}):Lc(e,i,t,this.urlSerializer).pipe(fe(n=>n?this.configLoader.loadChildren(e,i).pipe(J(s=>{i._loadedRoutes=s.routes,i._loadedInjector=s.injector})):Hc(i))):I({routes:[],injector:e})}};function Xc(r){r.sort((e,i)=>e.value.outlet===P?-1:i.value.outlet===P?1:e.value.outlet.localeCompare(i.value.outlet))}function Kc(r){let e=r.value.routeConfig;return e&&e.path===""}function wa(r){let e=[],i=new Set;for(let t of r){if(!Kc(t)){e.push(t);continue}let n=e.find(s=>t.value.routeConfig===s.value.routeConfig);n!==void 0?(n.children.push(...t.children),i.add(n)):e.push(t)}for(let t of i){let n=wa(t.children);e.push(new ve(t.value,n))}return e.filter(t=>!i.has(t))}function Qc(r){return r.data||{}}function Zc(r){return r.resolve||{}}function Jc(r,e,i,t,n,s){return fe(o=>qc(r,e,i,t,o.extractedUrl,n,s).pipe(W(({state:a,tree:l})=>z(_({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function eh(r,e){return fe(i=>{let{targetSnapshot:t,guards:{canActivateChecks:n}}=i;if(!n.length)return I(i);let s=new Set(n.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of ba(l))o.add(c);let a=0;return pe(o).pipe(pt(l=>s.has(l)?th(l,t,r,e):(l.data=as(l,l.parent,r).resolve,I(void 0))),J(()=>a++),tr(1),fe(l=>a===o.size?I(i):je))})}function ba(r){let e=r.children.map(i=>ba(i)).flat();return[r,...e]}function th(r,e,i,t){let n=r.routeConfig,s=r._resolve;return n?.title!==void 0&&!da(n)&&(s[mi]=n.title),ih(s,r,e,t).pipe(W(o=>(r._resolvedData=o,r.data=as(r,r.parent,i).resolve,null)))}function ih(r,e,i,t){let n=Vr(r);if(n.length===0)return I({});let s={};return pe(n).pipe(fe(o=>nh(r[o],e,i,t).pipe(ze(),J(a=>{s[o]=a}))),tr(1),Vs(s),dt(o=>va(o)?je:jt(o)))}function nh(r,e,i,t){let n=wi(e)??t,s=Rt(r,n),o=s.resolve?s.resolve(e,i):Ge(n,()=>s(e,i));return Qe(o)}function kr(r){return Me(e=>{let i=r(e);return i?pe(i).pipe(W(()=>e)):I(e)})}var _a=(()=>{let e=class e{buildTitle(t){let n,s=t.root;for(;s!==void 0;)n=this.getResolvedTitleForRoute(s)??n,s=s.children.find(o=>o.outlet===P);return n}getResolvedTitleForRoute(t){return t.data[mi]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:()=>A(rh),providedIn:"root"});let r=e;return r})(),rh=(()=>{let e=class e extends _a{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}};e.\u0275fac=function(n){return new(n||e)($(Uo))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),_i=new K("",{providedIn:"root",factory:()=>({})}),cn=new K(""),ds=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=A($i)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return I(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=Qe(t.loadComponent()).pipe(W(Ca),J(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ti(()=>{this.componentLoaders.delete(t)})),s=new Kn(n,()=>new Se).pipe(Xn());return this.componentLoaders.set(t,s),s}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return I({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=sh(n,this.compiler,t,this.onLoadEndListener).pipe(Ti(()=>{this.childrenLoaders.delete(n)})),a=new Kn(o,()=>new Se).pipe(Xn());return this.childrenLoaders.set(n,a),a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function sh(r,e,i,t){return Qe(r.loadChildren()).pipe(W(Ca),fe(n=>n instanceof Js||Array.isArray(n)?I(n):pe(e.compileModuleAsync(n))),W(n=>{t&&t(r);let s,o,a=!1;return Array.isArray(n)?(o=n,a=!0):(s=n.create(i).injector,o=s.get(cn,[],{optional:!0,self:!0}).flat()),{routes:o.map(hs),injector:s}}))}function oh(r){return r&&typeof r=="object"&&"default"in r}function Ca(r){return oh(r)?r.default:r}var ps=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:()=>A(ah),providedIn:"root"});let r=e;return r})(),ah=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Sa=new K(""),Ea=new K("");function lh(r,e,i){let t=r.get(Ea),n=r.get(me);return r.get(ae).runOutsideAngular(()=>{if(!n.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=n.startViewTransition(()=>(s(),ch(r))),{onViewTransitionCreated:l}=t;return l&&Ge(r,()=>l({transition:a,from:e,to:i})),o})}function ch(r){return new Promise(e=>{hr(e,{injector:r})})}var fs=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Se,this.transitionAbortSubject=new Se,this.configLoader=A(ds),this.environmentInjector=A(mt),this.urlSerializer=A(vi),this.rootContexts=A(yi),this.location=A(Qt),this.inputBindingEnabled=A(un,{optional:!0})!==null,this.titleStrategy=A(_a),this.options=A(_i,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=A(ps),this.createViewTransition=A(Sa,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>I(void 0),this.rootComponentType=null;let t=s=>this.events.next(new zr(s)),n=s=>this.events.next(new Wr(s));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(z(_(_({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,s){return this.transitions=new Ee({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:oi,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Ue(o=>o.id!==0),W(o=>z(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Me(o=>{let a=!1,l=!1;return I(o).pipe(Me(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ye.SupersededByNewNavigation),je;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?z(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),S=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!p&&S!=="reload"){let O="";return this.events.next(new Ke(c.id,this.urlSerializer.serialize(c.rawUrl),O,en.IgnoredSameUrlNavigation)),c.resolve(null),je}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return I(c).pipe(Me(O=>{let L=this.transitions?.getValue();return this.events.next(new Dt(O.id,this.urlSerializer.serialize(O.extractedUrl),O.source,O.restoredState)),L!==this.transitions?.getValue()?je:Promise.resolve(O)}),Jc(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),J(O=>{o.targetSnapshot=O.targetSnapshot,o.urlAfterRedirects=O.urlAfterRedirects,this.currentNavigation=z(_({},this.currentNavigation),{finalUrl:O.urlAfterRedirects});let L=new tn(O.id,this.urlSerializer.serialize(O.extractedUrl),this.urlSerializer.serialize(O.urlAfterRedirects),O.targetSnapshot);this.events.next(L)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:O,extractedUrl:L,source:tt,restoredState:Fe,extras:Ht}=c,De=new Dt(O,this.urlSerializer.serialize(L),tt,Fe);this.events.next(De);let Hn=ha(this.rootComponentType).snapshot;return this.currentTransition=o=z(_({},c),{targetSnapshot:Hn,urlAfterRedirects:L,extras:z(_({},Ht),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=L,I(o)}else{let O="";return this.events.next(new Ke(c.id,this.urlSerializer.serialize(c.extractedUrl),O,en.IgnoredByUrlHandlingStrategy)),c.resolve(null),je}}),J(c=>{let p=new Ur(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(p)}),W(c=>(this.currentTransition=o=z(_({},c),{guards:vc(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Dc(this.environmentInjector,c=>this.events.next(c)),J(c=>{if(o.guardsResult=c.guardsResult,Ot(c.guardsResult))throw fa(this.urlSerializer,c.guardsResult);let p=new $r(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(p)}),Ue(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",ye.GuardRejected),!1)),kr(c=>{if(c.guards.canActivateChecks.length)return I(c).pipe(J(p=>{let S=new Br(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(S)}),Me(p=>{let S=!1;return I(p).pipe(eh(this.paramsInheritanceStrategy,this.environmentInjector),J({next:()=>S=!0,complete:()=>{S||this.cancelNavigationTransition(p,"",ye.NoDataFromResolver)}}))}),J(p=>{let S=new jr(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(S)}))}),kr(c=>{let p=S=>{let O=[];S.routeConfig?.loadComponent&&!S.routeConfig._loadedComponent&&O.push(this.configLoader.loadComponent(S.routeConfig).pipe(J(L=>{S.component=L}),W(()=>{})));for(let L of S.children)O.push(...p(L));return O};return Ii(p(c.targetSnapshot.root)).pipe(Jn(null),ft(1))}),kr(()=>this.afterPreactivation()),Me(()=>{let{currentSnapshot:c,targetSnapshot:p}=o,S=this.createViewTransition?.(this.environmentInjector,c.root,p.root);return S?pe(S).pipe(W(()=>o)):I(o)}),W(c=>{let p=cc(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=z(_({},c),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,o}),J(()=>{this.events.next(new ui)}),mc(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),ft(1),J({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Be(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),Us(this.transitionAbortSubject.pipe(J(c=>{throw c}))),Ti(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",ye.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),dt(c=>{if(l=!0,ma(c))this.events.next(new Xe(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),dc(c)?this.events.next(new di(c.url)):o.resolve(!1);else{this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(p){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(p)}}return je}))}))}cancelNavigationTransition(t,n,s){let o=new Xe(t.id,this.urlSerializer.serialize(t.extractedUrl),n,s);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function hh(r){return r!==oi}var uh=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:()=>A(dh),providedIn:"root"});let r=e;return r})(),os=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},dh=(()=>{let e=class e extends os{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=or(e)))(s||e)}})(),e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),xa=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:()=>A(ph),providedIn:"root"});let r=e;return r})(),ph=(()=>{let e=class e extends xa{constructor(){super(...arguments),this.location=A(Qt),this.urlSerializer=A(vi),this.options=A(_i,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=A(ps),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ye,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ha(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof Dt)this.stateMemento=this.createStateMemento();else if(t instanceof Ke)this.rawUrlTree=n.initialUrl;else if(t instanceof tn){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(s,n)}}else t instanceof ui?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):t instanceof Xe&&(t.code===ye.GuardRejected||t.code===ye.NoDataFromResolver)?this.restoreHistory(n):t instanceof hi?this.restoreHistory(n,!0):t instanceof Be&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl){let o=this.browserPageId,a=_(_({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=or(e)))(s||e)}})(),e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),ri=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(ri||{});function Oa(r,e){r.events.pipe(Ue(i=>i instanceof Be||i instanceof Xe||i instanceof hi||i instanceof Ke),W(i=>i instanceof Be||i instanceof Ke?ri.COMPLETE:(i instanceof Xe?i.code===ye.Redirect||i.code===ye.SupersededByNewNavigation:!1)?ri.REDIRECTING:ri.FAILED),Ue(i=>i!==ri.REDIRECTING),ft(1)).subscribe(()=>{e()})}function fh(r){throw r}var gh={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},mh={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},ot=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=A(Hi),this.stateManager=A(xa),this.options=A(_i,{optional:!0})||{},this.pendingTasks=A(eo),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=A(fs),this.urlSerializer=A(vi),this.location=A(Qt),this.urlHandlingStrategy=A(ps),this._events=new Se,this.errorHandler=this.options.errorHandler||fh,this.navigated=!1,this.routeReuseStrategy=A(uh),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=A(cn,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!A(un,{optional:!0}),this.eventsSubscription=new Is,this.isNgZoneEnabled=A(ae)instanceof ae&&ae.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof Xe&&n.code!==ye.Redirect&&n.code!==ye.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Be)this.navigated=!0;else if(n instanceof di){let a=this.urlHandlingStrategy.merge(n.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||hh(s.source)};this.scheduleNavigation(a,oi,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}yh(n)&&this._events.next(n)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),oi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=_({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(hs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=n,p=c?this.currentUrlTree.fragment:a,S=null;switch(l){case"merge":S=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=o||null}S!==null&&(S=this.removeEmptyProps(S));let O;try{let L=s?s.snapshot:this.routerState.snapshot.root;O=oa(L)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),O=this.currentUrlTree.root}return aa(O,t,S,p??null)}navigateByUrl(t,n={skipLocationChange:!1}){let s=Ot(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,oi,null,n)}navigate(t,n={skipLocationChange:!1}){return vh(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let s;if(n===!0?s=_({},gh):n===!1?s=_({},mh):s=n,Ot(t))return Bo(this.currentUrlTree,t,s);let o=this.parseUrl(t);return Bo(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.entries(t).reduce((n,[s,o])=>(o!=null&&(n[s]=o),n),{})}scheduleNavigation(t,n,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,p;a?(l=a.resolve,c=a.reject,p=a.promise):p=new Promise((O,L)=>{l=O,c=L});let S=this.pendingTasks.add();return Oa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(S))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(O=>Promise.reject(O))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function vh(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new q(4008,!1)}function yh(r){return!(r instanceof ui)&&!(r instanceof di)}var hn=class{};var wh=(()=>{let e=class e{constructor(t,n,s,o,a){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(Ue(t=>t instanceof Be),pt(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){let s=[];for(let o of n){o.providers&&!o._injector&&(o._injector=dr(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return pe(s).pipe(Qn())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let s;n.loadChildren&&n.canLoad===void 0?s=this.loader.loadChildren(t,n):s=I(null);let o=s.pipe(fe(a=>a===null?I(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(n.loadComponent&&!n._loadedComponent){let a=this.loader.loadComponent(n);return pe([o,a]).pipe(Qn())}else return o})}};e.\u0275fac=function(n){return new(n||e)($(ot),$($i),$(mt),$(hn),$(ds))},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Da=new K(""),bh=(()=>{let e=class e{constructor(t,n,s,o,a={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=A(mt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Dt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Be?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Ke&&t.code===en.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof nn&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>R(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),hr(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new nn(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(n){Vi()},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})();function _h(r){return r.routerState.root}function Ci(r,e){return{\u0275kind:r,\u0275providers:e}}function Ch(){let r=A(ar);return e=>{let i=r.get(br);if(e!==i.components[0])return;let t=r.get(ot),n=r.get(Ma);r.get(gs)===1&&t.initialNavigation(),r.get(Aa,null,rr.Optional)?.setUpPreloading(),r.get(Da,null,rr.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var Ma=new K("",{factory:()=>new Se}),gs=new K("",{providedIn:"root",factory:()=>1});function Sh(){return Ci(2,[{provide:gs,useValue:0},{provide:wr,multi:!0,deps:[ar],useFactory:e=>{let i=e.get(bo,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let n=e.get(ot),s=e.get(Ma);Oa(n,()=>{t(!0)}),e.get(fs).afterPreactivation=()=>(t(!0),s.closed?I(void 0):s),n.initialNavigation()}))}}])}function Eh(){return Ci(3,[{provide:wr,multi:!0,useFactory:()=>{let e=A(ot);return()=>{e.setUpLocationChangeListener()}}},{provide:gs,useValue:2}])}var Aa=new K("");function xh(r){return Ci(0,[{provide:Aa,useExisting:wh},{provide:hn,useExisting:r}])}function Oh(){return Ci(8,[Go,{provide:un,useExisting:Go}])}function Dh(r){let e=[{provide:Sa,useValue:lh},{provide:Ea,useValue:_({skipNextTransition:!!r?.skipInitialTransition},r)}];return Ci(9,e)}var Yo=new K("ROUTER_FORROOT_GUARD"),Mh=[Qt,{provide:vi,useClass:li},ot,yi,{provide:Mt,useFactory:_h,deps:[ot]},ds,[]],ms=(()=>{let e=class e{constructor(t){}static forRoot(t,n){return{ngModule:e,providers:[Mh,[],{provide:cn,multi:!0,useValue:t},{provide:Yo,useFactory:Th,deps:[[ot,new sr,new Bs]]},{provide:_i,useValue:n||{}},n?.useHash?Rh():Ih(),Ah(),n?.preloadingStrategy?xh(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Ph(n):[],n?.bindToComponentInputs?Oh().\u0275providers:[],n?.enableViewTransitions?Dh().\u0275providers:[],kh()]}}static forChild(t){return{ngModule:e,providers:[{provide:cn,multi:!0,useValue:t}]}}};e.\u0275fac=function(n){return new(n||e)($(Yo,8))},e.\u0275mod=Ie({type:e}),e.\u0275inj=Re({});let r=e;return r})();function Ah(){return{provide:Da,useFactory:()=>{let r=A(Ao),e=A(ae),i=A(_i),t=A(fs),n=A(vi);return i.scrollOffset&&r.setOffset(i.scrollOffset),new bh(n,t,r,e,i)}}}function Rh(){return{provide:_r,useClass:Co}}function Ih(){return{provide:_r,useClass:_o}}function Th(r){return"guarded"}function Ph(r){return[r.initialNavigation==="disabled"?Eh().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Sh().\u0275providers:[]]}var Xo=new K("");function kh(){return[{provide:Xo,useFactory:Ch},{provide:po,multi:!0,useExisting:Xo}]}var Vh=[],Ra=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ie({type:e}),e.\u0275inj=Re({imports:[ms.forRoot(Vh),ms]});let r=e;return r})();var It=class{constructor(e,i,t,n,s){this.x=e,this.y=i,this.color=t,this.placedBy=n,this.timestamp=s}};var at=class{constructor(e,i,t){this.x=e,this.y=i,this.color=t}};var ja=pl(Ia());var Si={production:!0,endpointUrl:"https://openplace.azurewebsites.net/api"};var we=class extends Error{constructor(e,i){let t=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=t}},Ze=class extends Error{constructor(e="A timeout occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},se=class extends Error{constructor(e="An abort occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},fn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=t}},gn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=t}},mn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=t}},Ei=class extends Error{constructor(e){let i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}},vn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=t}};var Tt=class{constructor(e,i,t){this.statusCode=e,this.statusText=i,this.content=t}},ke=class{get(e,i){return this.send(z(_({},i),{method:"GET",url:e}))}post(e,i){return this.send(z(_({},i),{method:"POST",url:e}))}delete(e,i){return this.send(z(_({},i),{method:"DELETE",url:e}))}getCookieString(e){return""}};var f=function(r){return r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",r}(f||{});var Le=class{constructor(){}log(e,i){}};Le.instance=new Le;var Nh="8.0.7",U=class{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,t){if(!(e in i))throw new Error(`Unknown ${t} value: ${e}.`)}},B=class r{static get isBrowser(){return!r.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!r.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!r.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function Je(r,e){let i="";return Ae(r)?(i=`Binary data of length ${r.byteLength}`,e&&(i+=`. Content: '${Hh(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,e&&(i+=`. Content: '${r}'`)),i}function Hh(r){let e=new Uint8Array(r),i="";return e.forEach(t=>{let n=t<16?"0":"";i+=`0x${n}${t.toString(16)} `}),i.substr(0,i.length-1)}function Ae(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function wn(r,e,i,t,n,s){return R(this,null,function*(){let o={},[a,l]=Ve();o[a]=l,r.log(f.Trace,`(${e} transport) sending data. ${Je(n,s.logMessageContent)}.`);let c=Ae(n)?"arraybuffer":"text",p=yield i.post(t,{content:n,headers:_(_({},o),s.headers),responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});r.log(f.Trace,`(${e} transport) request complete. Response status: ${p.statusCode}.`)})}function Ta(r){return r===void 0?new lt(f.Information):r===null?Le.instance:r.log!==void 0?r:new lt(r)}var yn=class{constructor(e,i){this._subject=e,this._observer=i}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}},lt=class{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){let t=`[${new Date().toISOString()}] ${f[e]}: ${i}`;switch(e){case f.Critical:case f.Error:this.out.error(t);break;case f.Warning:this.out.warn(t);break;case f.Information:this.out.info(t);break;default:this.out.log(t);break}}}};function Ve(){let r="X-SignalR-User-Agent";return B.isNode&&(r="User-Agent"),[r,Fh(Nh,Uh(),Bh(),$h())]}function Fh(r,e,i,t){let n="Microsoft SignalR/",s=r.split(".");return n+=`${s[0]}.${s[1]}`,n+=` (${r}; `,e&&e!==""?n+=`${e}; `:n+="Unknown OS; ",n+=`${i}`,t?n+=`; ${t}`:n+="; Unknown Runtime Version",n+=")",n}function Uh(){if(B.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function $h(){if(B.isNode)return process.versions.node}function Bh(){return B.isNode?"NodeJS":"Browser"}function bn(r){return r.stack?r.stack:r.message?r.message:`${r}`}function Pa(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var _n=class extends ke{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||B.isNode){let i=typeof __webpack_require__=="function"?__non_webpack_require__:ut;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind(Pa());if(typeof AbortController>"u"){let i=typeof __webpack_require__=="function"?__non_webpack_require__:ut;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}send(e){return R(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new se;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let i=new this._abortControllerType,t;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),t=new se});let n=null;if(e.timeout){let l=e.timeout;n=setTimeout(()=>{i.abort(),this._logger.log(f.Warning,"Timeout from HTTP request."),t=new Ze},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},Ae(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:_({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw t||(this._logger.log(f.Warning,`Error from HTTP request. ${l}.`),l)}finally{n&&clearTimeout(n),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){let l=yield ka(s,"text");throw new we(l||s.statusText,s.status)}let a=yield ka(s,e.responseType);return new Tt(s.status,s.statusText,a)})}getCookieString(e){let i="";return B.isNode&&this._jar&&this._jar.getCookies(e,(t,n)=>i=n.join("; ")),i}};function ka(r,e){let i;switch(e){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=r.text();break}return i}var Cn=class extends ke{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?new Promise((i,t)=>{let n=new XMLHttpRequest;n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(Ae(e.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let s=e.headers;s&&Object.keys(s).forEach(o=>{n.setRequestHeader(o,s[o])}),e.responseType&&(n.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),t(new se)}),e.timeout&&(n.timeout=e.timeout),n.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),n.status>=200&&n.status<300?i(new Tt(n.status,n.statusText,n.response||n.responseText)):t(new we(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(f.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),t(new we(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(f.Warning,"Timeout from HTTP request."),t(new Ze)},n.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var Sn=class extends ke{constructor(e){if(super(),typeof fetch<"u"||B.isNode)this._httpClient=new _n(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new Cn(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new se):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var be=class r{static write(e){return`${e}${r.RecordSeparator}`}static parse(e){if(e[e.length-1]!==r.RecordSeparator)throw new Error("Message is incomplete.");let i=e.split(r.RecordSeparator);return i.pop(),i}};be.RecordSeparatorCode=30;be.RecordSeparator=String.fromCharCode(be.RecordSeparatorCode);var En=class{writeHandshakeRequest(e){return be.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,t;if(Ae(e)){let a=new Uint8Array(e),l=a.indexOf(be.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),t=a.byteLength>c?a.slice(c).buffer:null}else{let a=e,l=a.indexOf(be.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=a.substring(0,c),t=a.length>c?a.substring(c):null}let n=be.parse(i),s=JSON.parse(n[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[t,s]}};var T=function(r){return r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence",r}(T||{});var xn=class{constructor(){this.observers=[]}next(e){for(let i of this.observers)i.next(e)}error(e){for(let i of this.observers)i.error&&i.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new yn(this,e)}};var On=class{constructor(e,i,t){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=i,this._bufferSize=t}_send(e){return R(this,null,function*(){let i=this._protocol.writeMessage(e),t=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let n=()=>{},s=()=>{};Ae(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(t=new Promise((o,a)=>{n=o,s=a})),this._messages.push(new ys(i,this._totalMessageCount,n,s))}try{this._reconnectInProgress||(yield this._connection.send(i))}catch{this._disconnected()}yield t})}_ack(e){let i=-1;for(let t=0;t<this._messages.length;t++){let n=this._messages[t];if(n._id<=e.sequenceId)i=t,Ae(n._message)?this._bufferedByteCount-=n._message.byteLength:this._bufferedByteCount-=n._message.length,n._resolver();else if(this._bufferedByteCount<this._bufferSize)n._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==T.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return R(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:T.Sequence,sequenceId:e}));let i=this._messages;for(let t of i)yield this._connection.send(t._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let i of this._messages)i._rejector(e)}_isInvocationMessage(e){switch(e.type){case T.Invocation:case T.StreamItem:case T.Completion:case T.StreamInvocation:case T.CancelInvocation:return!0;case T.Close:case T.Sequence:case T.Ping:case T.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>R(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:T.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},ys=class{constructor(e,i,t,n){this._message=e,this._id=i,this._resolver=t,this._rejector=n}};var jh=30*1e3,zh=15*1e3,Wh=1e5,j=function(r){return r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",r}(j||{}),xi=class r{static create(e,i,t,n,s,o,a){return new r(e,i,t,n,s,o,a)}constructor(e,i,t,n,s,o,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(f.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},U.isRequired(e,"connection"),U.isRequired(i,"logger"),U.isRequired(t,"protocol"),this.serverTimeoutInMilliseconds=s??jh,this.keepAliveIntervalInMilliseconds=o??zh,this._statefulReconnectBufferSize=a??Wh,this._logger=i,this._protocol=t,this.connection=e,this._reconnectPolicy=n,this._handshakeProtocol=new En,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=j.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:T.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==j.Disconnected&&this._connectionState!==j.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return R(this,null,function*(){if(this._connectionState!==j.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=j.Connecting,this._logger.log(f.Debug,"Starting HubConnection.");try{yield this._startInternal(),B.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=j.Connected,this._connectionStarted=!0,this._logger.log(f.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=j.Disconnected,this._logger.log(f.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return R(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((i,t)=>{this._handshakeResolver=i,this._handshakeRejecter=t});yield this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);let t={protocol:this._protocol.name,version:i};if(this._logger.log(f.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(f.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new On(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(i){throw this._logger.log(f.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(i),i}})}stop(){return R(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===j.Disconnected)return this._logger.log(f.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===j.Disconnecting)return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let i=this._connectionState;return this._connectionState=j.Disconnecting,this._logger.log(f.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(f.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===j.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new se("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return R(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createStreamInvocation(e,i,n),o,a=new xn;return a.cancelCallback=()=>{let l=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[s.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===T.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(s).catch(l=>{a.error(l),delete this._callbacks[s.invocationId]}),this._launchStreams(t,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._sendWithProtocol(this._createInvocation(e,i,!0,n));return this._launchStreams(t,s),s}invoke(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createInvocation(e,i,!1,n);return new Promise((a,l)=>{this._callbacks[s.invocationId]=(p,S)=>{if(S){l(S);return}else p&&(p.type===T.Completion?p.error?l(new Error(p.error)):a(p.result):l(new Error(`Unexpected message type: ${p.type}`)))};let c=this._sendWithProtocol(s).catch(p=>{l(p),delete this._callbacks[s.invocationId]});this._launchStreams(t,c)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();let t=this._methods[e];if(t)if(i){let n=t.indexOf(i);n!==-1&&(t.splice(n,1),t.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let i=this._protocol.parseMessages(e,this._logger);for(let t of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(t)))switch(t.type){case T.Invocation:this._invokeClientMethod(t).catch(n=>{this._logger.log(f.Error,`Invoke client method threw error: ${bn(n)}`)});break;case T.StreamItem:case T.Completion:{let n=this._callbacks[t.invocationId];if(n){t.type===T.Completion&&delete this._callbacks[t.invocationId];try{n(t)}catch(s){this._logger.log(f.Error,`Stream callback threw error: ${bn(s)}`)}}break}case T.Ping:break;case T.Close:{this._logger.log(f.Information,"Close message received from server.");let n=t.error?new Error("Server returned an error on close: "+t.error):void 0;t.allowReconnect===!0?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}case T.Ack:this._messageBuffer&&this._messageBuffer._ack(t);break;case T.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(t);break;default:this._logger.log(f.Warning,`Invalid message type: ${t.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,t;try{[t,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(n){let s="Error parsing handshake response: "+n;this._logger.log(f.Error,s);let o=new Error(s);throw this._handshakeRejecter(o),o}if(i.error){let n="Server returned handshake error: "+i.error;this._logger.log(f.Error,n);let s=new Error(n);throw this._handshakeRejecter(s),s}else this._logger.log(f.Debug,"Server handshake complete.");return this._handshakeResolver(),t}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>R(this,null,function*(){if(this._connectionState===j.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return R(this,null,function*(){let i=e.target.toLowerCase(),t=this._methods[i];if(!t){this._logger.log(f.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let n=t.slice(),s=!!e.invocationId,o,a,l;for(let c of n)try{let p=o;o=yield c.apply(this,e.arguments),s&&o&&p&&(this._logger.log(f.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(p){a=p,this._logger.log(f.Error,`A callback for the method '${i}' threw error '${p}'.`)}l?yield this._sendWithProtocol(l):s?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(l)):o&&this._logger.log(f.Error,`Result given for '${i}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(f.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new se("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===j.Disconnecting?this._completeClose(e):this._connectionState===j.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===j.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=j.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),B.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(f.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}_reconnect(e){return R(this,null,function*(){let i=Date.now(),t=0,n=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(t++,0,n);if(s===null){this._logger.log(f.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=j.Reconnecting,e?this._logger.log(f.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(f.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(f.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(f.Information,`Reconnect attempt number ${t} will start in ${s} ms.`),yield new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=j.Connected,this._logger.log(f.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(f.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(f.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==j.Reconnecting){this._logger.log(f.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===j.Disconnecting&&this._completeClose();return}n=o instanceof Error?o:new Error(o.toString()),s=this._getNextRetryDelay(t++,Date.now()-i,n)}}this._logger.log(f.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${t} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,i,t){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:t})}catch(n){return this._logger.log(f.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){let i=this._callbacks;this._callbacks={},Object.keys(i).forEach(t=>{let n=i[t];try{n(null,e)}catch(s){this._logger.log(f.Error,`Stream 'error' callback called with '${e}' threw error: ${bn(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,t,n){if(t)return n.length!==0?{arguments:i,streamIds:n,target:e,type:T.Invocation}:{arguments:i,target:e,type:T.Invocation};{let s=this._invocationId;return this._invocationId++,n.length!==0?{arguments:i,invocationId:s.toString(),streamIds:n,target:e,type:T.Invocation}:{arguments:i,invocationId:s.toString(),target:e,type:T.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(let t in e)e[t].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t)))},error:n=>{let s;n instanceof Error?s=n.message:n&&n.toString?s=n.toString():s="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t,s)))},next:n=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(t,n)))}})}}_replaceStreamingParams(e){let i=[],t=[];for(let n=0;n<e.length;n++){let s=e[n];if(this._isObservable(s)){let o=this._invocationId;this._invocationId++,i[o]=s,t.push(o.toString()),e.splice(n,1)}}return[i,t]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,t){let n=this._invocationId;return this._invocationId++,t.length!==0?{arguments:i,invocationId:n.toString(),streamIds:t,target:e,type:T.StreamInvocation}:{arguments:i,invocationId:n.toString(),target:e,type:T.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:T.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:T.StreamItem}}_createCompletionMessage(e,i,t){return i?{error:i,invocationId:e,type:T.Completion}:{invocationId:e,result:t,type:T.Completion}}_createCloseMessage(){return{type:T.Close}}};var Gh=[0,2e3,1e4,3e4,null],Oi=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:Gh}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var ct=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();var Dn=class extends ke{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}send(e){return R(this,null,function*(){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let t=yield this._innerClient.send(e);return i&&t.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):t})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[ct.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[ct.Authorization]&&delete e.headers[ct.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var Y=function(r){return r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",r}(Y||{}),X=function(r){return r[r.Text=1]="Text",r[r.Binary=2]="Binary",r}(X||{});var Mn=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Di=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,i,t){this._httpClient=e,this._logger=i,this._pollAbort=new Mn,this._options=t,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,i){return R(this,null,function*(){if(U.isRequired(e,"url"),U.isRequired(i,"transferFormat"),U.isIn(i,X,"transferFormat"),this._url=e,this._logger.log(f.Trace,"(LongPolling transport) Connecting."),i===X.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[t,n]=Ve(),s=_({[t]:n},this._options.headers),o={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};i===X.Binary&&(o.responseType="arraybuffer");let a=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${a}.`);let l=yield this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new we(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)})}_poll(e,i){return R(this,null,function*(){try{for(;this._running;)try{let t=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${t}.`);let n=yield this._httpClient.get(t,i);n.statusCode===204?(this._logger.log(f.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):n.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),this._closeError=new we(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(f.Trace,`(LongPolling transport) data received. ${Je(n.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(n.content)):this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof Ze?this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(f.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(f.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return R(this,null,function*(){return this._running?wn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return R(this,null,function*(){this._logger.log(f.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(f.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[i,t]=Ve();e[i]=t;let n={headers:_(_({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},s;try{yield this._httpClient.delete(this._url,n)}catch(o){s=o}s?s instanceof we&&(s.statusCode===404?this._logger.log(f.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(f.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(f.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(f.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(f.Trace,e),this.onclose(this._closeError)}}};var An=class{constructor(e,i,t,n){this._httpClient=e,this._accessToken=i,this._logger=t,this._options=n,this.onreceive=null,this.onclose=null}connect(e,i){return R(this,null,function*(){return U.isRequired(e,"url"),U.isRequired(i,"transferFormat"),U.isIn(i,X,"transferFormat"),this._logger.log(f.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((t,n)=>{let s=!1;if(i!==X.Text){n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(B.isBrowser||B.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(e),l={};l.Cookie=a;let[c,p]=Ve();l[c]=p,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:_(_({},l),this._options.headers)})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(f.Trace,`(SSE transport) data received. ${Je(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{s?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(f.Information,`SSE connected to ${this._url}`),this._eventSource=o,s=!0,t()}}catch(a){n(a);return}})})}send(e){return R(this,null,function*(){return this._eventSource?wn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Rn=class{constructor(e,i,t,n,s,o){this._logger=t,this._accessTokenFactory=i,this._logMessageContent=n,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}connect(e,i){return R(this,null,function*(){U.isRequired(e,"url"),U.isRequired(i,"transferFormat"),U.isIn(i,X,"transferFormat"),this._logger.log(f.Trace,"(WebSockets transport) Connecting.");let t;return this._accessTokenFactory&&(t=yield this._accessTokenFactory()),new Promise((n,s)=>{e=e.replace(/^http/,"ws");let o,a=this._httpClient.getCookieString(e),l=!1;if(B.isNode||B.isReactNative){let c={},[p,S]=Ve();c[p]=S,t&&(c[ct.Authorization]=`Bearer ${t}`),a&&(c[ct.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:_(_({},c),this._headers)})}else t&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(t)}`);o||(o=new this._webSocketConstructor(e)),i===X.Binary&&(o.binaryType="arraybuffer"),o.onopen=c=>{this._logger.log(f.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,n()},o.onerror=c=>{let p=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?p=c.error:p="There was an error with the transport",this._logger.log(f.Information,`(WebSockets transport) ${p}.`)},o.onmessage=c=>{if(this._logger.log(f.Trace,`(WebSockets transport) data received. ${Je(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(p){this._close(p);return}},o.onclose=c=>{if(l)this._close(c);else{let p=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?p=c.error:p="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(p))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(f.Trace,`(WebSockets transport) sending data. ${Je(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(f.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var La=100,In=class{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,U.isRequired(e,"url"),this._logger=Ta(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let t=null,n=null;if(B.isNode&&typeof ut<"u"){let s=typeof __webpack_require__=="function"?__non_webpack_require__:ut;t=s("ws"),n=s("eventsource")}!B.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:B.isNode&&!i.WebSocket&&t&&(i.WebSocket=t),!B.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:B.isNode&&!i.EventSource&&typeof n<"u"&&(i.EventSource=n),this._httpClient=new Dn(i.httpClient||new Sn(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}start(e){return R(this,null,function*(){if(e=e||X.Binary,U.isIn(e,X,"transferFormat"),this._logger.log(f.Debug,`Starting connection with transfer format '${X[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(f.Error,i),yield this._stopPromise,Promise.reject(new se(i))}else if(this._connectionState!=="Connected"){let i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(f.Error,i),Promise.reject(new se(i))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new ws(this.transport)),this._sendQueue.send(e))}stop(e){return R(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return R(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(i){this._logger.log(f.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(f.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return R(this,null,function*(){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===Y.WebSockets)this.transport=this._constructTransport(Y.WebSockets),yield this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let t=null,n=0;do{if(t=yield this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new se("The connection was stopped during negotiation.");if(t.error)throw new Error(t.error);if(t.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(t.url&&(i=t.url),t.accessToken){let s=t.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}n++}while(t.url&&n<La);if(n===La&&t.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(i,this._options.transport,t,e)}this.transport instanceof Di&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(f.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(f.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}})}_getNegotiationResponse(e){return R(this,null,function*(){let i={},[t,n]=Ve();i[t]=n;let s=this._resolveNegotiateUrl(e);this._logger.log(f.Debug,`Sending negotiation request: ${s}.`);try{let o=yield this._httpClient.post(s,{content:"",headers:_(_({},i),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));let a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Ei("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof we&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(f.Error,a),Promise.reject(new Ei(a))}})}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}_createTransport(e,i,t,n){return R(this,null,function*(){let s=this._createConnectUrl(e,t.connectionToken);if(this._isITransport(i)){this._logger.log(f.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,yield this._startTransport(s,n),this.connectionId=t.connectionId;return}let o=[],a=t.availableTransports||[],l=t;for(let c of a){let p=this._resolveTransportOrError(c,i,n,l?.useStatefulReconnect===!0);if(p instanceof Error)o.push(`${c.transport} failed:`),o.push(p);else if(this._isITransport(p)){if(this.transport=p,!l){try{l=yield this._getNegotiationResponse(e)}catch(S){return Promise.reject(S)}s=this._createConnectUrl(e,l.connectionToken)}try{yield this._startTransport(s,n),this.connectionId=l.connectionId;return}catch(S){if(this._logger.log(f.Error,`Failed to start the transport '${c.transport}': ${S}`),l=void 0,o.push(new mn(`${c.transport} failed: ${S}`,Y[c.transport])),this._connectionState!=="Connecting"){let O="Failed to select transport before stop() was called.";return this._logger.log(f.Debug,O),Promise.reject(new se(O))}}}}return o.length>0?Promise.reject(new vn(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case Y.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Rn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case Y.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new An(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case Y.LongPolling:return new Di(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=t=>R(this,null,function*(){let n=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,i),yield this.features.resend()}catch{n=!0}else{this._stopConnection(t);return}n&&this._stopConnection(t)}):this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(e,i)}_resolveTransportOrError(e,i,t,n){let s=Y[e.transport];if(s==null)return this._logger.log(f.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(qh(i,s))if(e.transferFormats.map(a=>X[a]).indexOf(t)>=0){if(s===Y.WebSockets&&!this._options.WebSocket||s===Y.ServerSentEvents&&!this._options.EventSource)return this._logger.log(f.Debug,`Skipping transport '${Y[s]}' because it is not supported in your environment.'`),new fn(`'${Y[s]}' is not supported in your environment.`,s);this._logger.log(f.Debug,`Selecting transport '${Y[s]}'.`);try{return this.features.reconnect=s===Y.WebSockets?n:void 0,this._constructTransport(s)}catch(a){return a}}else return this._logger.log(f.Debug,`Skipping transport '${Y[s]}' because it does not support the requested transfer format '${X[t]}'.`),new Error(`'${Y[s]}' does not support ${X[t]}.`);else return this._logger.log(f.Debug,`Skipping transport '${Y[s]}' because it was disabled by the client.`),new gn(`'${Y[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(f.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(f.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(f.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(f.Error,`Connection disconnected with error '${e}'.`):this._logger.log(f.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(f.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(f.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!B.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let i=window.document.createElement("a");return i.href=e,this._logger.log(f.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){let i=new URL(e);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";let t=new URLSearchParams(i.searchParams);return t.has("negotiateVersion")||t.append("negotiateVersion",this._negotiateVersion.toString()),t.has("useStatefulReconnect")?t.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&t.append("useStatefulReconnect","true"),i.search=t.toString(),i.toString()}};function qh(r,e){return!r||(e&r)!==0}var ws=class r{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Pt,this._transportResult=new Pt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Pt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return R(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Pt;let e=this._transportResult;this._transportResult=void 0;let i=typeof this._buffer[0]=="string"?this._buffer.join(""):r._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(i),e.resolve()}catch(t){e.reject(t)}}})}static _concatBuffers(e){let i=e.map(s=>s.byteLength).reduce((s,o)=>s+o),t=new Uint8Array(i),n=0;for(let s of e)t.set(new Uint8Array(s),n),n+=s.byteLength;return t.buffer}},Pt=class{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var Yh="json",Tn=class{constructor(){this.name=Yh,this.version=2,this.transferFormat=X.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=Le.instance);let t=be.parse(e),n=[];for(let s of t){let o=JSON.parse(s);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case T.Invocation:this._isInvocationMessage(o);break;case T.StreamItem:this._isStreamItemMessage(o);break;case T.Completion:this._isCompletionMessage(o);break;case T.Ping:break;case T.Close:break;case T.Ack:this._isAckMessage(o);break;case T.Sequence:this._isSequenceMessage(o);break;default:i.log(f.Information,"Unknown message type '"+o.type+"' ignored.");continue}n.push(o)}return n}writeMessage(e){return be.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}};var Xh={trace:f.Trace,debug:f.Debug,info:f.Information,information:f.Information,warn:f.Warning,warning:f.Warning,error:f.Error,critical:f.Critical,none:f.None};function Kh(r){let e=Xh[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}var Mi=class{configureLogging(e){if(U.isRequired(e,"logging"),Qh(e))this.logger=e;else if(typeof e=="string"){let i=Kh(e);this.logger=new lt(i)}else this.logger=new lt(e);return this}withUrl(e,i){return U.isRequired(e,"url"),U.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions=_(_({},this.httpConnectionOptions),i):this.httpConnectionOptions=z(_({},this.httpConnectionOptions),{transport:i}),this}withHubProtocol(e){return U.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Oi(e):this.reconnectPolicy=e:this.reconnectPolicy=new Oi,this}withServerTimeout(e){return U.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return U.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let i=new In(this.url,e);return xi.create(i,this.logger||Le.instance,this.protocol||new Tn,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function Qh(r){return r.log!==void 0}var Va=(()=>{let e=class e{constructor(){this.hubConnection=new Mi().withUrl(Si.endpointUrl+"/hub",{skipNegotiation:!0,transport:Y.WebSockets}).withAutomaticReconnect().build()}startConnection(){return new Yn(t=>{this.hubConnection.start().then(()=>{console.log("Connection established with SignalR hub"),t.next(),t.complete()}).catch(n=>{console.error("Error connecting to SignalR hub:",n),t.error(n)})})}getState(){return this.hubConnection.state}receiveMessage(){return new Yn(t=>{this.hubConnection.on("RM",n=>{t.next(n)})})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=F({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var Na=new K("");var eu={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},$f=z(_({},eu),{"[class.ng-submitted]":"isSubmitted"});var _e=typeof window<"u"?window:{screen:{},navigator:{}},kt=(_e.matchMedia||function(){return{matches:!1}}).bind(_e),Ha=!1,tu={get passive(){return Ha=!0}},Fa=function(){};_e.addEventListener&&_e.addEventListener("p",Fa,tu);_e.removeEventListener&&_e.removeEventListener("p",Fa,!1);var Pn=Ha,zf="PointerEvent"in _e,bs="ontouchstart"in _e,iu="TouchEvent"in _e,nu=bs||iu&&kt("(any-pointer: coarse)").matches,Wf=(_e.navigator.maxTouchPoints||0)>0||nu,Ua=_e.navigator.userAgent||"",ru=kt("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Ua)&&Math.min(_e.screen.width||0,_e.screen.height||0)>=768,Gf=(kt("(pointer: coarse)").matches||!kt("(pointer: fine)").matches&&bs)&&!/Windows.*Firefox/.test(Ua),qf=kt("(any-pointer: fine)").matches||kt("(any-hover: hover)").matches||ru||!bs;var ou=(r,e,i)=>({tooltip:r,placement:e,content:i});function au(r,e){}function lu(r,e){r&1&&qe(0,au,0,0,"ng-template")}function cu(r,e){if(r&1&&(fr(0),qe(1,lu,1,0,null,1),gr()),r&2){let i=ue();ee(),Q("ngTemplateOutlet",i.template)("ngTemplateOutletContext",ho(2,ou,i.tooltip,i.placement,i.content))}}function hu(r,e){if(r&1&&(fr(0),ne(1,"div",2),Kt(2),le(),gr()),r&2){let i=ue();ee(),Xt("title",i.tooltip)("data-tooltip-placement",i.placement),ee(),no(" ",i.content," ")}}var uu=["tooltipTemplate"],du=["leftOuterSelectionBar"],pu=["rightOuterSelectionBar"],fu=["fullBar"],gu=["selectionBar"],mu=["minHandle"],vu=["maxHandle"],yu=["floorLabel"],wu=["ceilLabel"],bu=["minHandleLabel"],_u=["maxHandleLabel"],Cu=["combinedLabel"],Su=["ticksElement"],Eu=r=>({"ngx-slider-selected":r});function xu(r,e){if(r&1&&Z(0,"ngx-slider-tooltip-wrapper",32),r&2){let i=ue().$implicit,t=ue();Q("template",t.tooltipTemplate)("tooltip",i.valueTooltip)("placement",i.valueTooltipPlacement)("content",i.value)}}function Ou(r,e){if(r&1&&Z(0,"span",33),r&2){let i=ue().$implicit;Q("innerText",i.legend)}}function Du(r,e){if(r&1&&Z(0,"span",34),r&2){let i=ue().$implicit;Q("innerHTML",i.legend,qs)}}function Mu(r,e){if(r&1&&(ne(0,"span",27),Z(1,"ngx-slider-tooltip-wrapper",28),qe(2,xu,1,4,"ngx-slider-tooltip-wrapper",29)(3,Ou,1,1,"span",30)(4,Du,1,1,"span",31),le()),r&2){let i=e.$implicit,t=ue();Q("ngClass",co(8,Eu,i.selected))("ngStyle",i.style),ee(),Q("template",t.tooltipTemplate)("tooltip",i.tooltip)("placement",i.tooltipPlacement),ee(),Q("ngIf",i.value!==null&&i.value!==void 0),ee(),Q("ngIf",i.legend!==null&&i.legend!==void 0&&t.allowUnsafeHtmlInSlider===!1),ee(),Q("ngIf",i.legend!==null&&i.legend!==void 0&&(t.allowUnsafeHtmlInSlider===null||t.allowUnsafeHtmlInSlider===void 0||t.allowUnsafeHtmlInSlider))}}var Ne=function(r){return r[r.Low=0]="Low",r[r.High=1]="High",r[r.Floor=2]="Floor",r[r.Ceil=3]="Ceil",r[r.TickValue=4]="TickValue",r}(Ne||{}),Vt=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},$a=new K("AllowUnsafeHtmlInSlider"),x=function(r){return r[r.Min=0]="Min",r[r.Max=1]="Max",r}(x||{}),Cs=class{value;highValue;pointerType},v=class{static isNullOrUndefined(e){return e==null}static areArraysEqual(e,i){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0}static linearValueToPosition(e,i,t){let n=t-i;return(e-i)/n}static logValueToPosition(e,i,t){e=Math.log(e),i=Math.log(i),t=Math.log(t);let n=t-i;return(e-i)/n}static linearPositionToValue(e,i,t){return e*(t-i)+i}static logPositionToValue(e,i,t){i=Math.log(i),t=Math.log(t);let n=e*(t-i)+i;return Math.exp(n)}static findStepIndex(e,i){let t=i.map(s=>Math.abs(e-s.value)),n=0;for(let s=0;s<i.length;s++)t[s]!==t[n]&&t[s]<t[n]&&(n=s);return n}},He=class{static isTouchEvent(e){return window.TouchEvent!==void 0?e instanceof TouchEvent:e.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},G=class{static roundToPrecisionLimit(e,i){return+e.toPrecision(i)}static isModuloWithinPrecisionLimit(e,i,t){let n=Math.pow(10,-t);return Math.abs(e%i)<=n||Math.abs(Math.abs(e%i)-i)<=n}static clampToRange(e,i,t){return Math.min(Math.max(e,i),t)}},kn=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},Ln=class{renderer;constructor(e){this.renderer=e}attachPassiveEventListener(e,i,t,n){if(Pn!==!0)return this.attachEventListener(e,i,t,n);let s=new kn;s.eventName=i,s.events=new Se;let o=a=>{s.events.next(a)};return e.addEventListener(i,o,{passive:!0,capture:!1}),s.teardownCallback=()=>{e.removeEventListener(i,o,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?J(()=>{}):ir(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}detachEventListener(e){v.isNullOrUndefined(e.eventsSubscription)||(e.eventsSubscription.unsubscribe(),e.eventsSubscription=null),v.isNullOrUndefined(e.events)||(e.events.complete(),e.events=null),v.isNullOrUndefined(e.teardownCallback)||(e.teardownCallback(),e.teardownCallback=null)}attachEventListener(e,i,t,n){let s=new kn;s.eventName=i,s.events=new Se;let o=a=>{s.events.next(a)};return s.teardownCallback=this.renderer.listen(e,i,o),s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?J(()=>{}):ir(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}},et=(()=>{class r{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(i,t,n){this.elemRef=i,this.renderer=t,this.changeDetectionRef=n,this.eventListenerHelper=new Ln(this.renderer)}setAlwaysHide(i){this._alwaysHide=i,i?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(i){this._vertical=i,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(i){this._scale=i}setRotate(i){this._rotate=i,this.transform="rotate("+i+"deg)"}getRotate(){return this._rotate}setPosition(i){this._position!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=i,this._vertical?this.bottom=Math.round(i)+"px":this.left=Math.round(i)+"px"}calculateDimension(){let i=this.getBoundingClientRect();this.vertical?this._dimension=(i.bottom-i.top)*this.scale:this._dimension=(i.right-i.left)*this.scale}setDimension(i){this._dimension!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=i,this._vertical?this.height=Math.round(i)+"px":this.width=Math.round(i)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(i,t,n){let s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}onPassive(i,t,n){let s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}off(i){let t,n;v.isNullOrUndefined(i)?(t=[],n=this.eventListeners):(t=this.eventListeners.filter(s=>s.eventName!==i),n=this.eventListeners.filter(s=>s.eventName===i));for(let s of n)this.eventListenerHelper.detachEventListener(s);this.eventListeners=t}isRefDestroyed(){return v.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(t){return new(t||r)(te(vt),te(yt),te($e))};static \u0275dir=gt({type:r,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(t,n){t&2&&pr("opacity",n.opacity)("visibility",n.visibility)("left",n.left)("bottom",n.bottom)("height",n.height)("width",n.width)("transform",n.transform)}})}return r})(),_s=(()=>{class r extends et{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}focusIfNeeded(){document.activeElement!==this.elemRef.nativeElement&&this.elemRef.nativeElement.focus()}constructor(i,t,n){super(i,t,n)}static \u0275fac=function(t){return new(t||r)(te(vt),te(yt),te($e))};static \u0275dir=gt({type:r,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,n){t&2&&(Xt("role",n.role)("tabindex",n.tabindex)("aria-orientation",n.ariaOrientation)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy)("aria-valuenow",n.ariaValueNow)("aria-valuetext",n.ariaValueText)("aria-valuemin",n.ariaValueMin)("aria-valuemax",n.ariaValueMax),wt("ngx-slider-active",n.active))},features:[ur]})}return r})(),Lt=(()=>{class r extends et{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(i,t,n,s){super(i,t,n),this.allowUnsafeHtmlInSlider=s}setValue(i){let t=!1;!this.alwaysHide&&(v.isNullOrUndefined(this.value)||this.value.length!==i.length||this.value.length>0&&this.dimension===0)&&(t=!0),this._value=i,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=i:this.elemRef.nativeElement.innerHTML=i,t&&this.calculateDimension()}static \u0275fac=function(t){return new(t||r)(te(vt),te(yt),te($e),te($a,8))};static \u0275dir=gt({type:r,selectors:[["","ngxSliderLabel",""]],features:[ur]})}return r})(),Au=(()=>{class r{template;tooltip;placement;content;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=it({type:r,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,n){t&1&&qe(0,cu,2,6,"ng-container",0)(1,hu,3,3,"ng-container",0),t&2&&(Q("ngIf",n.template),ee(),Q("ngIf",!n.template))},dependencies:[Zt,Do],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return r})(),Ss=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},Vn=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},Nt=class{value;highValue;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue}},Nn=class extends Nt{forceChange;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue&&e.forceChange===i.forceChange}};var Ru={provide:Na,useExisting:nr(()=>Es),multi:!0},Es=(()=>{class r{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;sliderElementNgxSliderClass=!0;value=null;valueChange=new xe;highValue=null;highValueChange=new xe;options=new Vt;userChangeStart=new xe;userChange=new xe;userChangeEnd=new xe;manualRefreshSubscription;set manualRefresh(i){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=i.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(i){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=i.subscribe(t=>{this.focusPointer(t)})}get range(){return!v.isNullOrUndefined(this.value)&&!v.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Se;inputModelChangeSubscription=null;outputModelChangeSubject=new Se;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Vt;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new Vn;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(i,t,n,s,o){this.renderer=i,this.elementRef=t,this.changeDetectionRef=n,this.zone=s,this.allowUnsafeHtmlInSlider=o,this.eventListenerHelper=new Ln(this.renderer)}ngOnInit(){this.viewOptions=new Vt,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(i){!v.isNullOrUndefined(i.options)&&JSON.stringify(i.options.previousValue)!==JSON.stringify(i.options.currentValue)&&this.onChangeOptions(),(!v.isNullOrUndefined(i.value)||!v.isNullOrUndefined(i.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(i){i instanceof Array?(this.value=i[0],this.highValue=i[1]):this.value=i,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.viewOptions.disabled=i,this.updateDisabledState()}setAriaLabel(i){this.viewOptions.ariaLabel=i,this.updateAriaLabel()}onResize(i){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(er(Nn.compare),Ue(i=>!i.forceChange&&!i.internalChange)).subscribe(i=>this.applyInputModelChange(i))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(er(Nn.compare)).subscribe(i=>this.publishOutputModelChange(i))}subscribeResizeObserver(){He.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){He.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){v.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){v.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){v.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){v.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){v.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){v.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(i){return i===x.Min?this.minHandleElement:i===x.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===x.Min?this.viewLowValue:this.currentTrackingPointer===x.Max?this.viewHighValue:null}modelValueToViewValue(i){return v.isNullOrUndefined(i)?NaN:!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?v.findStepIndex(+i,this.viewOptions.stepsArray):+i}viewValueToModelValue(i){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(i):i}getStepValue(i){let t=this.viewOptions.stepsArray[i];return v.isNullOrUndefined(t)?NaN:t.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(i){let t=this.normaliseModelValues(i),n=!Nt.compare(i,t);n&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.range?this.viewHighValue=this.modelValueToViewValue(t.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:n,userEventInitiated:!1})}publishOutputModelChange(i){let t=()=>{this.valueChange.emit(i.value),this.range&&this.highValueChange.emit(i.highValue),v.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([i.value,i.highValue]):this.onChangeCallback(i.value)),v.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([i.value,i.highValue]):this.onTouchedCallback(i.value))};i.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(i){let t=new Nt;if(t.value=i.value,t.highValue=i.highValue,!v.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let n=v.findStepIndex(t.value,this.viewOptions.stepsArray);if(t.value=this.viewOptions.stepsArray[n].value,this.range){let s=v.findStepIndex(t.highValue,this.viewOptions.stepsArray);t.highValue=this.viewOptions.stepsArray[s].value}}return t}if(this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),this.viewOptions.enforceRange&&(t.value=G.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=G.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&i.value>i.highValue))if(this.viewOptions.noSwitching)t.value=t.highValue;else{let n=i.value;t.value=i.highValue,t.highValue=n}return t}renormaliseModelValues(){let i={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(i);Nt.compare(t,i)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let i=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let t=this.getOptionsInfluencingEventBindings(this.viewOptions),n=!v.areArraysEqual(i,t);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(n)}applyOptions(){if(this.viewOptions=new Vt,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!v.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!v.isNullOrUndefined(this.viewOptions.tickStep)||!v.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),v.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),v.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(i,t)=>i+" - "+t),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(i)):String(i))}applyFloorCeilOptions(){if(v.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),v.isNullOrUndefined(this.viewOptions.ceil)||v.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(i))}resetSlider(i=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),i&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(i){i!==x.Min&&i!==x.Max&&(i=x.Min),i===x.Min?this.minHandleElement.focus():this.range&&i===x.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){v.isNullOrUndefined(this.currentFocusPointer)||this.getPointerElement(this.currentFocusPointer).focusIfNeeded()}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let i=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(i||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.setVertical(this.viewOptions.vertical)}updateScale(){for(let i of this.getAllSliderElements())i.setScale(this.viewOptions.scale)}updateRotate(){for(let i of this.getAllSliderElements())i.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabel)?v.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?v.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Ne.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Ne.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){v.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let i=this.minHandleElement.dimension;this.handleHalfDimension=i/2,v.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-i,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let i=v.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&i.reverse();let n=v.isNullOrUndefined(this.viewOptions.tickValueStep)?v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,s=!1,o=i.map(a=>{let l=this.valueToPosition(a);this.viewOptions.vertical&&(l=this.maxHandlePosition-l);let c=t+"("+Math.round(l)+"px)",p=new Ss;p.selected=this.isTickSelected(a),p.style={"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c,transform:c},p.selected&&!v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(p.style["background-color"]=this.getSelectionBarColor()),!p.selected&&!v.isNullOrUndefined(this.viewOptions.getTickColor)&&(p.style["background-color"]=this.getTickColor(a)),v.isNullOrUndefined(this.viewOptions.ticksTooltip)||(p.tooltip=this.viewOptions.ticksTooltip(a),p.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!v.isNullOrUndefined(n)&&G.isModuloWithinPrecisionLimit(a,n,this.viewOptions.precisionLimit)&&(p.value=this.getDisplayValue(a,Ne.TickValue),v.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(p.valueTooltip=this.viewOptions.ticksValuesTooltip(a),p.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let S=null;if(v.isNullOrUndefined(this.viewOptions.stepsArray))v.isNullOrUndefined(this.viewOptions.getLegend)||(S=this.viewOptions.getLegend(a));else{let O=this.viewOptions.stepsArray[a];v.isNullOrUndefined(this.viewOptions.getStepLegend)?v.isNullOrUndefined(O)||(S=O.legend):S=this.viewOptions.getStepLegend(O)}return v.isNullOrUndefined(S)||(p.legend=S,s=!0),p});if(this.sliderElementWithLegendClass!==s&&setTimeout(()=>{this.sliderElementWithLegendClass=s}),!v.isNullOrUndefined(this.ticks)&&this.ticks.length===o.length)for(let a=0;a<o.length;++a)Object.assign(this.ticks[a],o[a]);else this.ticks=o,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){if(!this.viewOptions.showTicks)return[];let i=v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],n=1+Math.floor(G.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/i,this.viewOptions.precisionLimit));for(let s=0;s<n;++s)t.push(G.roundToPrecisionLimit(this.viewOptions.floor+i*s,this.viewOptions.precisionLimit));return t}isTickSelected(i){if(!this.range)if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(i>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&i<=this.viewLowValue)return!0}else{let t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&i>=t&&i<=this.viewLowValue)return!0;if(this.viewLowValue<t&&i<=t&&i>=this.viewLowValue)return!0}return!!(this.range&&i>=this.viewLowValue&&i<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Ne.Floor)),this.floorLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(i)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Ne.Ceil)),this.ceilLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(i)}}updateHandles(i,t){i===x.Min?this.updateLowHandle(t):i===x.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(i,t){let n=i===x.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=t-n/2+this.handleHalfDimension,o=this.fullBarElement.dimension-n;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&i===x.Min||!this.viewOptions.rightToLeft&&i===x.Max?Math.min(s,o):Math.min(Math.max(s,0),o):s}updateLowHandle(i){this.minHandleElement.setPosition(i),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Ne.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(x.Min,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(x.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(i){this.maxHandleElement.setPosition(i),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Ne.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(x.Max,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(x.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let i=!1,t=!1,n=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),a=this.isLabelBelowFloorLabel(this.combinedLabelElement),l=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(n?(i=!0,this.floorLabelElement.hide()):(i=!1,this.floorLabelElement.show()),s?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){let c=this.combinedLabelElement.isVisible()?l:o,p=this.combinedLabelElement.isVisible()?a:n;c?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),p?this.floorLabelElement.hide():i||this.floorLabelElement.show()}}isLabelBelowFloorLabel(i){let t=i.position,n=i.dimension,s=this.floorLabelElement.position,o=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?t+n>=s-2:t<=s+o+2}isLabelAboveCeilLabel(i){let t=i.position,n=i.dimension,s=this.ceilLabelElement.position,o=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?t<=s+o+2:t+n>=s-2}updateSelectionBar(){let i=0,t=0,n=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),i=s;else if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))n?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),i=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,i=0);else{let o=this.viewOptions.showSelectionBarFromValue,a=this.valueToPosition(o);(this.viewOptions.rightToLeft?this.viewLowValue<=o:this.viewLowValue>o)?(t=this.minHandleElement.position-a,i=a+this.handleHalfDimension):(t=a-this.minHandleElement.position,i=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(i),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(i),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.leftOuterSelectionBarElement.setPosition(i+t)):(this.leftOuterSelectionBarElement.setDimension(i),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.rightOuterSelectionBarElement.setPosition(i+t))),v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!v.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let o=v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),a=o-i>0&&!n||o-i<=0&&n,l=this.viewOptions.vertical?a?"bottom":"top":a?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+l+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(o+t+i+(a?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=o-i+(a?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let o=this.getSelectionBarColor();this.barStyle={backgroundColor:o}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(i){return i===x.Max?this.viewOptions.getPointerColor(this.highValue,i):this.viewOptions.getPointerColor(this.value,i)}getTickColor(i){return this.viewOptions.getTickColor(i)}updateCombinedLabel(){let i=null;if(this.viewOptions.rightToLeft?i=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:i=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,i){let t=this.getDisplayValue(this.viewLowValue,Ne.Low),n=this.getDisplayValue(this.viewHighValue,Ne.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(n,t):this.viewOptions.combineLabels(t,n);this.combinedLabelElement.setValue(s);let o=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(o),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(i,t){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(i=this.getStepValue(i)),this.viewOptions.translate(i,t)}roundStep(i,t){let n=v.isNullOrUndefined(t)?this.viewOptions.step:t,s=G.roundToPrecisionLimit((i-this.viewOptions.floor)/n,this.viewOptions.precisionLimit);return s=Math.round(s)*n,G.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(i){let t=v.linearValueToPosition;v.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=v.logValueToPosition):t=this.viewOptions.customValueToPosition,i=G.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil);let n=t(i,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(n)&&(n=0),this.viewOptions.rightToLeft&&(n=1-n),n*this.maxHandlePosition}positionToValue(i){let t=i/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let n=v.linearPositionToValue;v.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(n=v.logPositionToValue):n=this.viewOptions.customPositionToValue;let s=n(t,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(s)?0:s}getEventXY(i,t){if(i instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?i.clientY:i.clientX;let n=0,s=i.touches;if(!v.isNullOrUndefined(t)){for(let o=0;o<s.length;o++)if(s[o].identifier===t){n=o;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?s[n].clientY:s[n].clientX}getEventPosition(i,t){let n=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical||this.viewOptions.rotate!==0?n.bottom:n.left,o=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?o=-this.getEventXY(i,t)+s:o=this.getEventXY(i,t)-s,o*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(i){if(!this.range)return x.Min;let t=this.getEventPosition(i),n=Math.abs(t-this.minHandleElement.position),s=Math.abs(t-this.maxHandleElement.position);return n<s?x.Min:n>s?x.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?x.Min:x.Max:t<this.minHandleElement.position?x.Min:x.Max}bindEvents(){let i=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(x.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(x.Max)))}getOptionsInfluencingEventBindings(i){return[i.disabled,i.readOnly,i.draggableRange,i.draggableRangeOnly,i.onlyBindHandles,i.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.off()}onBarStart(i,t,n,s,o,a,l){t?this.onDragStart(i,n,s,o):this.onStart(i,n,s,o,a,l)}onStart(i,t,n,s,o,a){t.stopPropagation(),!He.isTouchEvent(t)&&!Pn&&t.preventDefault(),this.moving=!1,this.calculateViewDimensions(),v.isNullOrUndefined(i)&&(i=this.getNearestHandle(t)),this.currentTrackingPointer=i;let l=this.getPointerElement(i);if(l.active=!0,this.viewOptions.keyboardSupport&&l.focus(),n){this.unsubscribeOnMove();let c=p=>this.dragging.active?this.onDragMove(p):this.onMove(p);He.isTouchEvent(t)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",c):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",c)}if(s){this.unsubscribeOnEnd();let c=p=>this.onEnd(p);He.isTouchEvent(t)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",c):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",c)}this.userChangeStart.emit(this.getChangeContext()),He.isTouchEvent(t)&&!v.isNullOrUndefined(t.changedTouches)&&v.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),o&&this.onMove(t,!0),a&&this.onEnd(t)}onMove(i,t){let n=null;if(He.isTouchEvent(i)){let c=i.changedTouches;for(let p=0;p<c.length;p++)if(c[p].identifier===this.touchId){n=c[p];break}if(v.isNullOrUndefined(n))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let s=v.isNullOrUndefined(n)?this.getEventPosition(i):this.getEventPosition(i,n.identifier),o,a=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,l=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;s<=0?o=l:s>=this.maxHandlePosition?o=a:(o=this.positionToValue(s),t&&!v.isNullOrUndefined(this.viewOptions.tickStep)?o=this.roundStep(o,this.viewOptions.tickStep):o=this.roundStep(o)),this.positionTrackingHandle(o)}onEnd(i){He.isTouchEvent(i)&&i.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(i){let t=this.getPointerElement(i);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",n=>this.onKeyboardEvent(n)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=i,this.currentFocusPointer=i,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(i){i.off("blur"),i.off("keydown"),i.off("keyup"),i.active=!1,v.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(i){let t=this.viewOptions.ceil-this.viewOptions.floor,n=i+this.viewOptions.step,s=i-this.viewOptions.step,o=i+t/10,a=i-t/10;this.viewOptions.reversedControls&&(n=i-this.viewOptions.step,s=i+this.viewOptions.step,o=i-t/10,a=i+t/10);let l={UP:n,DOWN:s,LEFT:s,RIGHT:n,PAGEUP:o,PAGEDOWN:a,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(l.LEFT=n,l.RIGHT=s,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(l.UP=s,l.DOWN=n)),l}onKeyboardEvent(i){let t=this.getCurrentTrackingValue(),n=v.isNullOrUndefined(i.keyCode)?i.which:i.keyCode,s={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},o=this.getKeyActions(t),a=s[n],l=o[a];if(v.isNullOrUndefined(l)||v.isNullOrUndefined(this.currentTrackingPointer))return;i.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let c=G.clampToRange(l,this.viewOptions.floor,this.viewOptions.ceil),p=this.roundStep(c);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(p);else{let S=this.viewHighValue-this.viewLowValue,O,L;this.currentTrackingPointer===x.Min?(O=p,L=p+S,L>this.viewOptions.ceil&&(L=this.viewOptions.ceil,O=L-S)):this.currentTrackingPointer===x.Max&&(L=p,O=p-S,O<this.viewOptions.floor&&(O=this.viewOptions.floor,L=O+S)),this.positionTrackingBar(O,L)}}onDragStart(i,t,n,s){let o=this.getEventPosition(t);this.dragging=new Vn,this.dragging.active=!0,this.dragging.value=this.positionToValue(o),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-o:o-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?o-this.maxHandleElement.position:this.maxHandleElement.position-o,this.onStart(i,t,n,s)}getMinValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:o=s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:o=s?this.positionToValue(i+this.dragging.lowLimit):this.positionToValue(i-this.dragging.lowLimit),this.roundStep(o)}getMaxValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:o=s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?o=this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:o=this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)}onDragMove(i){let t=this.getEventPosition(i);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let n,s,o,a;this.viewOptions.rightToLeft?(n=this.dragging.lowLimit,s=this.dragging.highLimit,o=this.maxHandleElement,a=this.minHandleElement):(n=this.dragging.highLimit,s=this.dragging.lowLimit,o=this.minHandleElement,a=this.maxHandleElement);let l=t<=s,c=t>=this.maxHandlePosition-n,p,S;if(l){if(o.position===0)return;p=this.getMinValue(t,!0,!1),S=this.getMaxValue(t,!0,!1)}else if(c){if(a.position===this.maxHandlePosition)return;S=this.getMaxValue(t,!0,!0),p=this.getMinValue(t,!0,!0)}else p=this.getMinValue(t,!1,!1),S=this.getMaxValue(t,!1,!1);this.positionTrackingBar(p,S)}positionTrackingBar(i,t){!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit&&(i=this.viewOptions.minLimit,t=G.roundToPrecisionLimit(i+this.dragging.difference,this.viewOptions.precisionLimit)),!v.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(t=this.viewOptions.maxLimit,i=G.roundToPrecisionLimit(t-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=i,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(i)),this.updateHandles(x.Max,this.valueToPosition(t))}positionTrackingHandle(i){i=this.applyMinMaxLimit(i),this.range&&(this.viewOptions.pushRange?i=this.applyPushRange(i):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===x.Min&&i>this.viewHighValue?i=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(i=this.applyMinMaxRange(this.viewLowValue))),i=this.applyMinMaxRange(i),this.currentTrackingPointer===x.Min&&i>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(x.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(x.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==i&&(this.currentTrackingPointer===x.Min?(this.viewLowValue=i,this.applyViewChange()):this.currentTrackingPointer===x.Max&&(this.viewHighValue=i,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(i)),this.updateAriaAttributes())}applyMinMaxLimit(i){return!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit?this.viewOptions.minLimit:!v.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit?this.viewOptions.maxLimit:i}applyMinMaxRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue:this.viewLowValue,n=Math.abs(i-t);if(!v.isNullOrUndefined(this.viewOptions.minRange)&&n<this.viewOptions.minRange){if(this.currentTrackingPointer===x.Min)return G.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return G.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!v.isNullOrUndefined(this.viewOptions.maxRange)&&n>this.viewOptions.maxRange){if(this.currentTrackingPointer===x.Min)return G.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return G.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return i}applyPushRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue-i:i-this.viewLowValue,n=v.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return t<n?(this.currentTrackingPointer===x.Min?(this.viewHighValue=G.roundToPrecisionLimit(Math.min(i+n,this.viewOptions.ceil),this.viewOptions.precisionLimit),i=G.roundToPrecisionLimit(this.viewHighValue-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=G.roundToPrecisionLimit(Math.max(i-n,this.viewOptions.floor),this.viewOptions.precisionLimit),i=G.roundToPrecisionLimit(this.viewLowValue+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!v.isNullOrUndefined(s)&&t>s&&(this.currentTrackingPointer===x.Min?(this.viewHighValue=G.roundToPrecisionLimit(i+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=G.roundToPrecisionLimit(i-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),i}getChangeContext(){let i=new Cs;return i.pointerType=this.currentTrackingPointer,i.value=+this.value,this.range&&(i.highValue=+this.highValue),i}static \u0275fac=function(t){return new(t||r)(te(yt),te(vt),te($e),te(ae),te($a,8))};static \u0275cmp=it({type:r,selectors:[["ngx-slider"]],contentQueries:function(t,n,s){if(t&1&&mr(s,uu,5),t&2){let o;ce(o=he())&&(n.tooltipTemplate=o.first)}},viewQuery:function(t,n){if(t&1&&(ge(du,5,et),ge(pu,5,et),ge(fu,5,et),ge(gu,5,et),ge(mu,5,_s),ge(vu,5,_s),ge(yu,5,Lt),ge(wu,5,Lt),ge(bu,5,Lt),ge(_u,5,Lt),ge(Cu,5,Lt),ge(Su,5,et)),t&2){let s;ce(s=he())&&(n.leftOuterSelectionBarElement=s.first),ce(s=he())&&(n.rightOuterSelectionBarElement=s.first),ce(s=he())&&(n.fullBarElement=s.first),ce(s=he())&&(n.selectionBarElement=s.first),ce(s=he())&&(n.minHandleElement=s.first),ce(s=he())&&(n.maxHandleElement=s.first),ce(s=he())&&(n.floorLabelElement=s.first),ce(s=he())&&(n.ceilLabelElement=s.first),ce(s=he())&&(n.minHandleLabelElement=s.first),ce(s=he())&&(n.maxHandleLabelElement=s.first),ce(s=he())&&(n.combinedLabelElement=s.first),ce(s=he())&&(n.ticksElement=s.first)}},hostVars:10,hostBindings:function(t,n){t&1&&bt("resize",function(o){return n.onResize(o)},!1,Xs),t&2&&(Xt("disabled",n.sliderElementDisabledAttr)("aria-label",n.sliderElementAriaLabel),wt("ngx-slider",n.sliderElementNgxSliderClass)("vertical",n.sliderElementVerticalClass)("animate",n.sliderElementAnimateClass)("with-legend",n.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[ao([Ru]),ki],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,n){t&1&&(ne(0,"span",12,0),Z(2,"span",13),le(),ne(3,"span",14,1),Z(5,"span",13),le(),ne(6,"span",15,2),Z(8,"span",13),le(),ne(9,"span",16,3),Z(11,"span",17),le(),Z(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),ne(26,"span",25,11),qe(28,Mu,5,10,"span",26),le()),t&2&&(ee(6),wt("ngx-slider-transparent",n.fullBarTransparentClass),ee(3),wt("ngx-slider-draggable",n.selectionBarDraggableClass),ee(2),Q("ngStyle",n.barStyle),ee(),Q("ngStyle",n.minPointerStyle),ee(2),pr("display",n.range?"inherit":"none"),Q("ngStyle",n.maxPointerStyle),ee(12),wt("ngx-slider-ticks-values-under",n.ticksUnderValuesClass),Q("hidden",!n.showTicks),ee(2),Q("ngForOf",n.ticks))},dependencies:[Eo,xo,Zt,Oo,et,_s,Lt,Au],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}']})}return r})(),Ba=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=Ie({type:r});static \u0275inj=Re({imports:[ji]})}return r})();function Tu(r,e){if(r&1){let i=to();ne(0,"ngx-slider",18),oo("valueChange",function(n){Wt(i);let s=ue();return so(s.sliderValue,n)||(s.sliderValue=n),Gt(n)}),bt("userChange",function(){Wt(i);let n=ue();return Gt(n.onSliderChange())})("userChangeStart",function(){Wt(i);let n=ue();return Gt(n.onSliderStart())})("userChangeEnd",function(){Wt(i);let n=ue();return Gt(n.onSliderEnd())}),le()}if(r&2){let i=ue();ro("value",i.sliderValue),Q("options",i.sliderOptions)}}var za=(()=>{let e=class e{constructor(t){this.signalRService=t,this.title="Open Place",this.colorPalette=["000000","000000","FFFFFF","0000FF","00FFFF","FF0000","00FF00","FFFF00","FF00FF","7c4dff"],this.defaultColor="FFFFFF",this.username=localStorage.getItem("username"),this.defaultUsername="Anonymous",this.timeoutId=null,this.zoomLevel=1,this.audio=new Audio("assets/sfx/place.mp3"),this.pickr=null,this.hoverPixel=new at(-1,-1,""),this.boardArr=[],this.pixelQueue=[],this.dimensions={width:256,height:256},this.minZoom=1,this.maxZoom=Math.min(this.dimensions.width,this.dimensions.height)/10,this.originX=0,this.originY=0,this.selectedColor=1,this.sliderValue=0,this.sliderDragState=!1,this.isSliderVisible=!1,this.sliderOptions={ceil:0,vertical:!0,showSelectionBar:!0,rightToLeft:!0}}ngOnInit(){return R(this,null,function*(){this.init(),this.initCanvasEvents(),this.initWindowResizeEvent(),this.initSignalR(),this.initDocumentEvents(),this.initPaletteContainer(),this.initColorPicker()})}initColorPicker(){this.pickr=ja.default.create({el:".color-picker",theme:"monolith",useAsButton:!0,position:"top-middle",autoReposition:!0,default:this.colorPalette[0],swatches:["rgb(244, 67, 54)","rgb(233, 30, 99)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(3, 169, 244","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(205, 220, 57)","rgb(255, 235, 59)","rgb(255, 193, 7)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!0,rgba:!0,cancel:!1,input:!0,clear:!1,save:!1}}}),this.pickr.on("hide",()=>{this.pickr?.applyColor()}),this.pickr.on("change",t=>{let n=t.toHEXA();this.colorPalette[0]=n[0]+n[1]+n[2];let s="#"+this.colorPalette[0],o=document.getElementById("0-color");o.style.backgroundColor=s,localStorage.setItem("customColor",this.colorPalette[0])})}init(){return R(this,null,function*(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.setAttribute("tabindex","0"),yield this.loadBoard()})}initCanvasEvents(){this.resizeCanvas(),this.canvas.addEventListener("keydown",t=>this.handleMovement(t)),this.canvas.addEventListener("contextmenu",t=>t.preventDefault()),this.canvas.addEventListener("wheel",this.zoom.bind(this)),this.canvas.addEventListener("click",t=>this.handleCanvasClick(t)),this.canvas.addEventListener("mousedown",t=>this.getColor(t)),this.canvas.addEventListener("mousemove",this.onHover.bind(this)),this.canvas.addEventListener("mouseleave",this.onLeave.bind(this)),this.canvas.addEventListener("mouseover",t=>{!this.pickr?.isOpen()&&t.buttons==0&&this.sliderDragState==!1&&this.canvas.focus()})}initPaletteContainer(){let t=localStorage.getItem("customColor");t!==null&&(this.colorPalette[0]=t);let n=document.getElementById("palette-container");n&&this.colorPalette.forEach((s,o)=>{let a=document.createElement("div");a.style.width="40px",a.style.height="40px",a.style.backgroundColor=`#${s}`,a.style.borderRadius="50%",a.style.cursor="pointer",a.style.transition="transform 0.2s ease",a.style.border="2px solid #ffffff",a.style.display="inline-block",a.id=o.toString()+"-color",o==this.selectedColor&&(a.style.transform="scale(1.3)",a.style.border="3px solid #0080FF"),a.addEventListener("click",()=>this.handleColorDivClick(a)),a.addEventListener("mouseover",()=>a.style.transform="scale(1.3)"),a.addEventListener("mouseout",()=>a.style.transform="scale(1)"),n.appendChild(a)})}handleColorDivClick(t){this.selectedColor=parseInt(t.id.at(0)),document.querySelectorAll(".palette-container div").forEach(n=>{n.style.border="2px solid #ffffff",n.style.transform="scale(1.0)"}),t.style.border="3px solid #0080FF",t.style.transform="scale(1.3)",this.selectedColor==0&&this.pickr?.show()}initWindowResizeEvent(){window.addEventListener("resize",()=>{this.zoomLevel=1,this.resizeCanvas(),this.drawBoard()})}initSignalR(){this.signalRService.startConnection().subscribe(()=>{this.signalRService.receiveMessage().subscribe(t=>{this.receivePixel(t)})})}receivePixel(t){let n=JSON.parse(t);n.placedBy==""&&(n.placedBy=this.defaultUsername),this.boardArr.push(n),this.sliderValue+1==this.boardArr.length?(this.drawPixel(n.x,n.y,n.color),this.isSliderVisible&&this.setSliderToMax()):this.sliderOptions=z(_({},this.sliderOptions),{ceil:this.boardArr.length}),this.updateLeaderboard()}initDocumentEvents(){document.addEventListener("wheel",t=>t.preventDefault(),{passive:!1}),document.addEventListener("keydown",t=>this.handleColorSelection(t)),document.addEventListener("selectionchange",()=>{document.activeElement?.id=="canvas"&&window.getSelection().removeAllRanges()})}getColor(t){if(t.button!=2)return;let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(!a)if(s<this.dimensions.width&&o<this.dimensions.height)a=new It(s,o,this.defaultColor,"","");else return;let l=this.colorPalette.indexOf(a.color);l==-1&&(l=0,localStorage.setItem("customColor",a.color),this.pickr?.setColor("#"+a.color,!1),this.colorPalette[0]=a.color),this.selectedColor=l;let c=document.getElementById(l+"-color");document.querySelectorAll(".palette-container div").forEach(p=>{p.style.border="2px solid #ffffff",p.style.transform="scale(1.0)"}),c.style.border="3px solid #0080FF",c.style.transform="scale(1.3)",this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel?.color??this.defaultColor,!0)}handleColorSelection(t){if(!this.pickr?.isOpen()&&t.code.startsWith("Digit")){let n=t.code.slice(5),s=9;n!="0"&&(s=parseInt(n)-1),this.selectedColor=s,this.drawHoverPixel(this.hoverPixel?.x??0,this.hoverPixel?.y??0,this.hoverPixel?.color??this.defaultColor,!0),document.querySelectorAll(".palette-container div").forEach(a=>{a.style.border="2px solid #ffffff",a.style.transform="scale(1.0)"});let o=document.getElementById(s.toString()+"-color");o.style.border="3px solid #0080FF",o.style.transform="scale(1.3)",this.pickr?.hide()}}handleMovement(t){switch(t.preventDefault(),t.key.toLocaleLowerCase()){case"w":case"arrowup":this.moveAndRedraw(0,-5);break;case"a":case"arrowleft":this.moveAndRedraw(-5,0);break;case"s":case"arrowdown":this.moveAndRedraw(0,5);break;case"d":case"arrowright":this.moveAndRedraw(5,0);break}}moveAndRedraw(t,n){this.resizeCanvas(),this.originX=Math.min(Math.max(this.originX+t,0),this.dimensions.width),this.originY=Math.min(Math.max(this.originY+n,0),this.dimensions.height),this.applyTransformations(),this.drawBoard()}handleCanvasClick(t){if(this.sliderValue!=this.sliderOptions.ceil){this.setSliderToMax(),this.drawBoard(),this.hoverPixel=this.findLatestPixel(this.hoverPixel.x,this.hoverPixel.y)||this.hoverPixel;return}let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.getValidPixelOrNull(s,o,this.colorPalette[this.selectedColor],this.username,new Date);a&&(this.hoverPixel=a,this.drawPixel(a.x,a.y,a.color),this.sendPixel(a.x,a.y,a.color,t))}increaseCounter(){let t=localStorage.getItem("placedPixels"),n=1;t&&(n=parseInt(t)+1),localStorage.setItem("placedPixels",n.toString())}playSound(){return R(this,null,function*(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0),this.audio.play()})}onHover(t){let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(this.drawHoverPixel(s,o,a?.color,!1),a){let l={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},c=`(${a.x}, ${a.y}) ${a.placedBy||this.defaultUsername}<br/>${new Date(a.timestamp).toLocaleDateString(void 0,l)}`;this.showBubble(c,t.clientX,t.clientY)}else this.hideBubble(!0)}findLatestPixel(t,n){let s=this.boardArr.length;this.isSliderVisible&&(s=this.sliderValue);for(let o=s-1;o>=0;o--){let a=this.boardArr[o];if(a.x===t&&a.y===n)return a}return null}calculateXPosition(t,n){return Math.floor((t-n.left)/n.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX)}calculateYPosition(t,n){return Math.floor((t-n.top)/n.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}hideBubble(t){let n=document.getElementById("bubble");t&&n?.innerText.startsWith("Wait")||n&&(n.style.visibility="hidden",n.style.opacity="0")}onLeave(){this.hoverPixel&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new at(-1,-1,"")),this.hideBubble(!1)}drawHoverPixel(t,n,s,o){this.hoverPixel?(this.hoverPixel.x!==t||this.hoverPixel.y!==n||o)&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new at(t,n,s||this.defaultColor),this.drawPixel(t,n,this.colorPalette[this.selectedColor])):this.hoverPixel=new at(t,n,s||this.defaultColor)}showBubble(t,n,s){let o=document.getElementById("bubble"),a=this.canvas.getBoundingClientRect();o.innerHTML=t;let l=o.clientHeight*1.3;s-a.top<l&&(l=-20);let c=o.clientWidth*1.15;n-a.left<a.width-c&&(c=-30),o.style.visibility="visible",o.style.opacity="1",o.style.left=`${n-c}px`,o.style.top=`${s-l}px`,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.hideBubble,2e3)}loadBoard(){return R(this,null,function*(){let n=0,s;do{let o=yield fetch(Si.endpointUrl+`/GetRange?offset=${n}&limit=10000`);s||this.restoreViewSettings(),s=yield o.json(),s.forEach(a=>{a.placedBy==""&&(a.placedBy=this.defaultUsername),this.boardArr.push(a)}),this.drawBoard(),this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color,!0),this.updateLeaderboard(),n+=1e4}while(s.length==1e4);this.isSliderVisible=!0,this.setSliderToMax();try{let o=localStorage.getItem("board");if(o&&JSON.parse(o).length>=this.boardArr.length)return;localStorage.setItem("board",JSON.stringify(this.boardArr))}catch{console.log("Could not save board array.")}})}setSliderToMax(){this.sliderOptions=z(_({},this.sliderOptions),{ceil:this.boardArr.length}),this.sliderValue=this.sliderOptions.ceil}updateLeaderboard(){let t=[];for(let s of this.boardArr){let o=t.find(a=>a.name===s.placedBy);o?o.placedPixels++:t.push({name:s.placedBy,placedPixels:1})}let n=document.getElementById("leaderboard-list");n.innerHTML="",t.sort((s,o)=>o.placedPixels-s.placedPixels);for(let s=0;s<Math.min(10,t.length);s++){let o=s+1,a=document.createElement("li");a.className="leaderboard-item",a.innerHTML=`
        <span class="position">${o}.</span>
        <span class="name">${t[s].name}</span>
        <span class="score">${t[s].placedPixels}</span>
        `,n.appendChild(a)}}onSliderChange(){setTimeout(()=>{this.drawBoard()},20)}onSliderStart(){this.sliderDragState=!0}onSliderEnd(){this.sliderDragState=!1}getValidPixelOrNull(t,n,s,o,a){return t<0||t>=this.dimensions.width||n<0||n>=this.dimensions.height?null:((!s||!/^[0-9A-F]{6}$/i.test(s))&&(s=this.defaultColor),new It(t,n,s,o,a))}sendPixel(t,n,s,o){return R(this,null,function*(){let a=this.findLatestPixel(t,n);if(a&&a.color===s&&a.placedBy===(this.username||this.defaultUsername))return;let l=new It(t,n,s,this.username||this.defaultUsername,"");if(this.getIndex(l)!=-1){console.log("BLOCKED");return}this.pixelQueue.push(l),this.playSound(),(this.signalRService.getState()==j.Disconnecting||this.signalRService.getState()==j.Disconnected)&&this.initSignalR();try{let c=yield fetch(Si.endpointUrl+"/SendPixel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});c.ok?(this.pixelQueue.splice(this.getIndex(l),1),this.increaseCounter(),console.log("Success.")):c.status===429&&(this.showBubble(`Wait ${c.headers.get("retry-after")} seconds.`,o.clientX,o.clientY),this.drawBoard())}catch(c){this.hoverPixel=a,this.drawBoard(),console.log(c)}})}drawBoard(){let t=this.boardArr.length;this.isSliderVisible&&(t=this.sliderValue),this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height);for(let n=0;n<t;n++){let s=this.boardArr[n];this.drawPixel(s.x,s.y,s.color)}}drawPixel(t,n,s){this.getValidPixelOrNull(t,n,s,null,null)!=null&&(this.ctx.fillStyle="#"+s,this.ctx.fillRect(t,n,1,1))}resizeCanvas(){this.canvas.width=this.dimensions.width,this.canvas.height=this.dimensions.height;let t=Math.min(window.innerWidth,window.innerHeight/1.15);this.canvas.style.width=t+"px",this.canvas.style.height=t+"px";let n=document.getElementById("palette-container");n.style.width=t+"px"}usernameChange(t){let n=t.target.value;if(n.length>16){t.target.value=this.username||"",alert("Username cannot be longer than 16 characters.");return}this.username=n,localStorage.setItem("username",n)}zoom(t){this.updateZoomLevel(t.deltaY),this.resizeCanvas();let n=this.canvas.getBoundingClientRect();t.deltaY<0&&this.calculateOrigin(n,t.clientX,t.clientY),this.applyTransformations(),this.drawBoardAndHoverPixel(t,n)}drawBoardAndHoverPixel(t,n){this.drawBoard();let s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n);this.drawHoverPixel(s,o,this.findLatestPixel(s,o)?.color,!1)}updateZoomLevel(t){t<0?this.zoomLevel<this.maxZoom&&(this.zoomLevel=Math.ceil(this.zoomLevel*1.5)):this.zoomLevel>this.minZoom&&(this.zoomLevel=Math.floor(this.zoomLevel/1.5))}calculateOrigin(t,n,s){this.originX=Math.floor((n-t.left)/t.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX),this.originY=Math.floor((s-t.top)/t.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}applyTransformations(){this.ctx.translate(this.originX,this.originY),this.ctx.scale(this.zoomLevel,this.zoomLevel),this.ctx.translate(-this.originX,-this.originY),this.saveViewSettings()}saveViewSettings(){let t={originX:this.originX,originY:this.originY,zoom:this.zoomLevel};localStorage.setItem("canvasViewSettings",JSON.stringify(t))}restoreViewSettings(){let t=localStorage.getItem("canvasViewSettings");if(!t)return;let n=JSON.parse(t);this.originX=n.originX,this.originY=n.originY,this.zoomLevel=n.zoom,this.resizeCanvas(),this.applyTransformations()}getIndex(t){return this.pixelQueue.findIndex(n=>n.x==t.x&&n.y==t.y&&n.color==t.color&&n.placedBy==t.placedBy)}};e.\u0275fac=function(n){return new(n||e)(te(Va))},e.\u0275cmp=it({type:e,selectors:[["app-root"]],decls:22,vars:2,consts:[["rel","stylesheet","href",Ys`https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css`],[1,"min-h-screen","body","p-4"],[1,"container"],[1,"color-picker",2,"margin-right","30px"],["id","div"],["id","palette-container",1,"palette-container"],[2,"display","flex"],["id","canvas",1,"canvas",2,"flex","1"],[2,"flex","1"],["style","margin-left: 3vw","id","slider",3,"value","options","valueChange","userChange","userChangeStart","userChangeEnd",4,"ngIf"],["id","bubble",1,"text-center","bg-red-400","font-bold","text-white","rounded","transition","py-1","px-2","animate-[showoff_100ms_ease-in]",2,"position","absolute","white-space","nowrap","touch-action","manipulation","visibility","hidden"],[2,"height","50%"],[1,"w-full","max-w-sm","p-6","bg-white","rounded-lg","shadow-md","username-input-container"],["for","username",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["id","username","type","text","placeholder","Enter your username",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","duration-300","ease-in-out",3,"change","value"],[1,"leaderboard"],[1,"leaderboard-header"],["id","leaderboard-list",1,"leaderboard-list"],["id","slider",2,"margin-left","3vw",3,"valueChange","userChange","userChangeStart","userChangeEnd","value","options"]],template:function(n,s){n&1&&(ne(0,"head"),Z(1,"link",0),le(),ne(2,"body",1)(3,"div",2),Z(4,"div",3),ne(5,"div",4),Z(6,"div",5),ne(7,"div",6),Z(8,"canvas",7),ne(9,"div",8),qe(10,Tu,1,2,"ngx-slider",9),le()(),Z(11,"span",10),le(),ne(12,"div",11)(13,"div",12)(14,"label",13),Kt(15,"Username"),le(),ne(16,"input",14),bt("change",function(a){return s.usernameChange(a)}),le()(),ne(17,"div",15)(18,"div",16),Kt(19," Leaderboard "),le(),Z(20,"ul",17),le()()()(),Z(21,"router-outlet")),n&2&&(ee(10),Q("ngIf",s.isSliderVisible),ee(6),io("value",s.username))},dependencies:[Zt,cs,Es],styles:[".canvas[_ngcontent-%COMP%]{display:block;background-color:#fff;image-rendering:pixelated;touch-action:manipulation;outline:none;border-radius:10px}.body[_ngcontent-%COMP%]{display:flex;justify-content:center;height:98vh;margin:0}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-start}.username-input-container[_ngcontent-%COMP%]{flex-shrink:0;margin-top:12vh;width:280px}}@media (max-width: 1199px){.container[_ngcontent-%COMP%]{display:block;text-align:center}#div[_ngcontent-%COMP%]{margin-bottom:1rem}}.palette-container[_ngcontent-%COMP%]{background-color:#223a70;border-radius:20px;padding:8px;margin-bottom:20px;display:flex;justify-content:space-evenly}.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.transition[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out,visibility .3s ease-in-out}.leaderboard[_ngcontent-%COMP%]{margin-top:4vh;width:100%;max-width:600px;background-color:#fff;border-radius:10px;overflow:hidden}.leaderboard-header[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:20px;text-align:center;font-size:1.5rem;font-weight:700}.leaderboard-list[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}"]});let r=e;return r})();var Pu="@",ku=(()=>{let e=class e{constructor(t,n,s,o,a){this.doc=t,this.delegate=n,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=A(Ks,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-SC4DKJLP.js")).catch(n=>{throw new q(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,n){let s=this.delegate.createRenderer(t,n);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new xs(s);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(t,n);o.use(l)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(n){Vi()},e.\u0275prov=F({token:e,factory:e.\u0275fac});let r=e;return r})(),xs=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,t,n){this.delegate.insertBefore(e,i,t,n)}removeChild(e,i,t){this.delegate.removeChild(e,i,t)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,n){this.delegate.setAttribute(e,i,t,n)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,n){this.delegate.setStyle(e,i,t,n)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){this.shouldReplay(i)&&this.replay.push(n=>n.setProperty(e,i,t)),this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.shouldReplay(i)&&this.replay.push(n=>n.listen(e,i,t)),this.delegate.listen(e,i,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(Pu)}};function Wa(r="animations"){return Qs("NgAsyncAnimations"),Pi([{provide:Ni,useFactory:(e,i,t)=>new ku(e,i,t,r),deps:[me,Wi,ae]},{provide:Gs,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var Ga=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=Ie({type:e,bootstrap:[za]}),e.\u0275inj=Re({providers:[Wa()],imports:[Fo,Ra,Ba]});let r=e;return r})();Ho().bootstrapModule(Ga).catch(r=>console.error(r));
