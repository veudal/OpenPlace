import{$ as cr,$a as he,A as $e,Aa as Yt,Ab as bo,B as pt,Ba as te,Bb as _o,C as ft,Ca as ie,Cb as Co,D as nr,Da as Ni,Db as Fi,E as gt,Ea as to,Eb as So,F as $s,Fa as Ui,Fb as Eo,G as rr,Ga as wt,Gb as ve,H as Ti,Ha as io,Hb as xo,I as ze,Ia as le,Ib as xr,J as sr,Ja as fr,Jb as Mo,K as Bs,Ka as no,Kb as Oo,L as Fs,La as gr,Lb as Jt,M as qs,Ma as ro,Mb as Io,N as Re,Na as mr,Nb as Ro,O as zs,Oa as so,Ob as Do,P as ee,Pa as Ke,Pb as ei,Q as or,Qa as Qt,Qb as Ao,R as G,Ra as Q,Rb as ko,S as We,Sa as vr,Sb as qi,T as ar,Ta as bt,Tb as To,U as H,Ua as re,Ub as Mr,V as Ae,Va as ce,Vb as Po,W as Ws,Wa as Z,Wb as Lo,X as Y,Xa as yr,Y as lr,Ya as wr,Z as $,Za as oo,_ as R,_a as _t,a as _,aa as Gs,ab as ao,b as F,ba as Wt,bb as br,c as ht,ca as nt,cb as me,da as ke,db as ue,e as bl,ea as mt,eb as de,f as _l,fa as Pi,fb as Zt,g as D,ga as Ks,gb as lo,h as Vs,ha as vt,hb as co,i as Ns,ia as Ge,ib as uo,j as Zn,ja as Li,jb as ho,k as Jn,ka as Gt,kb as po,l as er,la as Kt,lb as fo,m as Ee,ma as ur,mb as go,n as xe,na as dr,nb as mo,o as qe,oa as hr,ob as Hi,p as fe,pa as yt,pb as vo,q as A,qa as Me,qb as ji,r as zt,ra as Xs,rb as $i,s as Us,sa as Vi,sb as _r,t as Hs,ta as Ys,tb as Cr,u as q,ua as Xt,ub as Sr,v as ki,va as Qs,vb as yo,w as ge,wa as pr,wb as Er,x as tr,xa as Zs,xb as Bi,y as js,ya as Js,yb as wo,z as ir,za as eo,zb as Be}from"./chunk-FDRKUU5Y.js";var Ha=bl((mn,Cs)=>{"use strict";(function(r,e){typeof mn=="object"&&typeof Cs=="object"?Cs.exports=e():typeof define=="function"&&define.amd?define([],e):typeof mn=="object"?mn.Pickr=e():r.Pickr=e()})(self,()=>(()=>{"use strict";var r={d:(S,w)=>{for(var u in w)r.o(w,u)&&!r.o(S,u)&&Object.defineProperty(S,u,{enumerable:!0,get:w[u]})},o:(S,w)=>Object.prototype.hasOwnProperty.call(S,w),r:S=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(S,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(S,"__esModule",{value:!0})}},e={};r.d(e,{default:()=>al});var i={};function t(S,w,u,p,g={}){w instanceof HTMLCollection||w instanceof NodeList?w=Array.from(w):Array.isArray(w)||(w=[w]),Array.isArray(u)||(u=[u]);for(let d of w)for(let m of u)d[S](m,p,_({capture:!1},g));return Array.prototype.slice.call(arguments,1)}r.r(i),r.d(i,{adjustableInputNumbers:()=>h,createElementFromString:()=>o,createFromTemplate:()=>a,eventPath:()=>l,off:()=>s,on:()=>n,resolveElement:()=>c});let n=t.bind(null,"addEventListener"),s=t.bind(null,"removeEventListener");function o(S){let w=document.createElement("div");return w.innerHTML=S.trim(),w.firstElementChild}function a(S){let w=(p,g)=>{let d=p.getAttribute(g);return p.removeAttribute(g),d},u=(p,g={})=>{let d=w(p,":obj"),m=w(p,":ref"),y=d?g[d]={}:g;m&&(g[m]=p);for(let b of Array.from(p.children)){let I=w(b,":arr"),O=u(b,I?{}:y);I&&(y[I]||(y[I]=[])).push(Object.keys(O).length?O:b)}return g};return u(o(S))}function l(S){let w=S.path||S.composedPath&&S.composedPath();if(w)return w;let u=S.target.parentElement;for(w=[S.target,u];u=u.parentElement;)w.push(u);return w.push(document,window),w}function c(S){return S instanceof Element?S:typeof S=="string"?S.split(/>>/g).reduce((w,u,p,g)=>(w=w.querySelector(u),p<g.length-1?w.shadowRoot:w),document):null}function h(S,w=u=>u){function u(p){let g=[.001,.01,.1][Number(p.shiftKey||2*p.ctrlKey)]*(p.deltaY<0?1:-1),d=0,m=S.selectionStart;S.value=S.value.replace(/[\d.]+/g,(y,b)=>b<=m&&b+y.length>=m?(m=b,w(Number(y),g,d)):(d++,y)),S.focus(),S.setSelectionRange(m,m),p.preventDefault(),S.dispatchEvent(new Event("input"))}n(S,"focus",()=>n(window,"wheel",u,{passive:!1})),n(S,"blur",()=>s(window,"wheel",u))}let{min:C,max:M,floor:L,round:it}=Math;function je(S,w,u){w/=100,u/=100;let p=L(S=S/360*6),g=S-p,d=u*(1-w),m=u*(1-g*w),y=u*(1-(1-g)*w),b=p%6;return[255*[u,m,d,d,y,u][b],255*[y,u,u,m,d,d][b],255*[d,d,y,u,u,m][b]]}function jt(S,w,u){let p=(2-(w/=100))*(u/=100)/2;return p!==0&&(w=p===1?0:p<.5?w*u/(2*p):w*u/(2-2*p)),[S,100*w,100*p]}function Ie(S,w,u){let p=C(S/=255,w/=255,u/=255),g=M(S,w,u),d=g-p,m,y;if(d===0)m=y=0;else{y=d/g;let b=((g-S)/6+d/2)/d,I=((g-w)/6+d/2)/d,O=((g-u)/6+d/2)/d;S===g?m=O-I:w===g?m=1/3+b-O:u===g&&(m=2/3+I-b),m<0?m+=1:m>1&&(m-=1)}return[360*m,100*y,100*g]}function Bn(S,w,u,p){return w/=100,u/=100,[...Ie(255*(1-C(1,(S/=100)*(1-(p/=100))+p)),255*(1-C(1,w*(1-p)+p)),255*(1-C(1,u*(1-p)+p)))]}function tl(S,w,u){w/=100;let p=2*(w*=(u/=100)<.5?u:1-u)/(u+w)*100,g=100*(u+w);return[S,isNaN(p)?0:p,g]}function il(S){return Ie(...S.match(/.{2}/g).map(w=>parseInt(w,16)))}function nl(S){S=S.match(/^[a-zA-Z]+$/)?function(g){if(g.toLowerCase()==="black")return"#000";let d=document.createElement("canvas").getContext("2d");return d.fillStyle=g,d.fillStyle==="#000"?null:d.fillStyle}(S):S;let w={cmyk:/^cmyk\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)/i,rgba:/^rgba?\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D+([\d.]+)(%?)\D*?(([\d.]+)(%?)|$)/i,hsla:/^hsla?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hsva:/^hsva?\D+([\d.]+)\D+([\d.]+)\D+([\d.]+)\D*?(([\d.]+)(%?)|$)/i,hexa:/^#?(([\dA-Fa-f]{3,4})|([\dA-Fa-f]{6})|([\dA-Fa-f]{8}))$/i},u=g=>g.map(d=>/^(|\d+)\.\d+|\d+$/.test(d)?Number(d):void 0),p;e:for(let g in w)if(p=w[g].exec(S))switch(g){case"cmyk":{let[,d,m,y,b]=u(p);if(d>100||m>100||y>100||b>100)break e;return{values:Bn(d,m,y,b),type:g}}case"rgba":{let[,d,,m,,y,,,b]=u(p);if(d=p[2]==="%"?d/100*255:d,m=p[4]==="%"?m/100*255:m,y=p[6]==="%"?y/100*255:y,b=p[9]==="%"?b/100:b,d>255||m>255||y>255||b<0||b>1)break e;return{values:[...Ie(d,m,y),b],a:b,type:g}}case"hexa":{let[,d]=p;d.length!==4&&d.length!==3||(d=d.split("").map(b=>b+b).join(""));let m=d.substring(0,6),y=d.substring(6);return y=y?parseInt(y,16)/255:void 0,{values:[...il(m),y],a:y,type:g}}case"hsla":{let[,d,m,y,,b]=u(p);if(b=p[6]==="%"?b/100:b,d>360||m>100||y>100||b<0||b>1)break e;return{values:[...tl(d,m,y),b],a:b,type:g}}case"hsva":{let[,d,m,y,,b]=u(p);if(b=p[6]==="%"?b/100:b,d>360||m>100||y>100||b<0||b>1)break e;return{values:[d,m,y,b],a:b,type:g}}}return{values:null,type:null}}function $t(S=0,w=0,u=0,p=1){let g=(m,y)=>(b=-1)=>y(~b?m.map(I=>Number(I.toFixed(b))):m),d={h:S,s:w,v:u,a:p,toHSVA(){let m=[d.h,d.s,d.v,d.a];return m.toString=g(m,y=>`hsva(${y[0]}, ${y[1]}%, ${y[2]}%, ${d.a})`),m},toHSLA(){let m=[...jt(d.h,d.s,d.v),d.a];return m.toString=g(m,y=>`hsla(${y[0]}, ${y[1]}%, ${y[2]}%, ${d.a})`),m},toRGBA(){let m=[...je(d.h,d.s,d.v),d.a];return m.toString=g(m,y=>`rgba(${y[0]}, ${y[1]}, ${y[2]}, ${d.a})`),m},toCMYK(){let m=function(y,b,I){let O=je(y,b,I),E=O[0]/255,V=O[1]/255,N=O[2]/255,P=C(1-E,1-V,1-N);return[100*(P===1?0:(1-E-P)/(1-P)),100*(P===1?0:(1-V-P)/(1-P)),100*(P===1?0:(1-N-P)/(1-P)),100*P]}(d.h,d.s,d.v);return m.toString=g(m,y=>`cmyk(${y[0]}%, ${y[1]}%, ${y[2]}%, ${y[3]}%)`),m},toHEXA(){let m=function(b,I,O){return je(b,I,O).map(E=>it(E).toString(16).padStart(2,"0"))}(d.h,d.s,d.v),y=d.a>=1?"":Number((255*d.a).toFixed(0)).toString(16).toUpperCase().padStart(2,"0");return y&&m.push(y),m.toString=()=>`#${m.join("").toUpperCase()}`,m},clone:()=>$t(d.h,d.s,d.v,d.a)};return d}let Di=S=>Math.max(Math.min(S,1),0);function Fn(S){let w={options:Object.assign({lock:null,onchange:()=>0,onstop:()=>0},S),_keyboard(d){let{options:m}=w,{type:y,key:b}=d;if(document.activeElement===m.wrapper){let{lock:I}=w.options,O=b==="ArrowUp",E=b==="ArrowRight",V=b==="ArrowDown",N=b==="ArrowLeft";if(y==="keydown"&&(O||E||V||N)){let P=0,ne=0;I==="v"?P=O||E?1:-1:I==="h"?P=O||E?-1:1:(ne=O?-1:V?1:0,P=N?-1:E?1:0),w.update(Di(w.cache.x+.01*P),Di(w.cache.y+.01*ne)),d.preventDefault()}else b.startsWith("Arrow")&&(w.options.onstop(),d.preventDefault())}},_tapstart(d){n(document,["mouseup","touchend","touchcancel"],w._tapstop),n(document,["mousemove","touchmove"],w._tapmove),d.cancelable&&d.preventDefault(),w._tapmove(d)},_tapmove(d){let{options:m,cache:y}=w,{lock:b,element:I,wrapper:O}=m,E=O.getBoundingClientRect(),V=0,N=0;if(d){let pe=d&&d.touches&&d.touches[0];V=d?(pe||d).clientX:0,N=d?(pe||d).clientY:0,V<E.left?V=E.left:V>E.left+E.width&&(V=E.left+E.width),N<E.top?N=E.top:N>E.top+E.height&&(N=E.top+E.height),V-=E.left,N-=E.top}else y&&(V=y.x*E.width,N=y.y*E.height);b!=="h"&&(I.style.left=`calc(${V/E.width*100}% - ${I.offsetWidth/2}px)`),b!=="v"&&(I.style.top=`calc(${N/E.height*100}% - ${I.offsetHeight/2}px)`),w.cache={x:V/E.width,y:N/E.height};let P=Di(V/E.width),ne=Di(N/E.height);switch(b){case"v":return m.onchange(P);case"h":return m.onchange(ne);default:return m.onchange(P,ne)}},_tapstop(){w.options.onstop(),s(document,["mouseup","touchend","touchcancel"],w._tapstop),s(document,["mousemove","touchmove"],w._tapmove)},trigger(){w._tapmove()},update(d=0,m=0){let{left:y,top:b,width:I,height:O}=w.options.wrapper.getBoundingClientRect();w.options.lock==="h"&&(m=d),w._tapmove({clientX:y+I*d,clientY:b+O*m})},destroy(){let{options:d,_tapstart:m,_keyboard:y}=w;s(document,["keydown","keyup"],y),s([d.wrapper,d.element],"mousedown",m),s([d.wrapper,d.element],"touchstart",m,{passive:!1})}},{options:u,_tapstart:p,_keyboard:g}=w;return n([u.wrapper,u.element],"mousedown",p),n([u.wrapper,u.element],"touchstart",p,{passive:!1}),n(document,["keydown","keyup"],g),w}function rl(S={}){S=Object.assign({onchange:()=>0,className:"",elements:[]},S);let w=n(S.elements,"click",u=>{S.elements.forEach(p=>p.classList[u.target===p?"add":"remove"](S.className)),S.onchange(u),u.stopPropagation()});return{destroy:()=>s(...w)}}let sl={variantFlipOrder:{start:"sme",middle:"mse",end:"ems"},positionFlipOrder:{top:"tbrl",right:"rltb",bottom:"btrl",left:"lrbt"},position:"bottom",margin:8,padding:0},ol=(S,w,u)=>{let p=typeof S!="object"||S instanceof HTMLElement?_({reference:S,popper:w},u):S;return{update(g=p){let{reference:d,popper:m}=Object.assign(p,g);if(!m||!d)throw new Error("Popper- or reference-element missing.");return((y,b,I)=>{let{container:O,arrow:E,margin:V,padding:N,position:P,variantFlipOrder:ne,positionFlipOrder:pe}=_(_({container:document.documentElement.getBoundingClientRect()},sl),I),{left:qn,top:zn}=b.style;b.style.left="0",b.style.top="0";let ae=y.getBoundingClientRect(),Se=b.getBoundingClientRect(),ll={t:ae.top-Se.height-V,b:ae.bottom+V,r:ae.right+V,l:ae.left-Se.width-V},cl={vs:ae.left,vm:ae.left+ae.width/2-Se.width/2,ve:ae.left+ae.width-Se.width,hs:ae.top,hm:ae.bottom-ae.height/2-Se.height/2,he:ae.bottom-Se.height},[ul,dl="middle"]=P.split("-"),hl=pe[ul],pl=ne[dl],{top:As,left:ks,bottom:Ts,right:Ps}=O;for(let Bt of hl){let dt=Bt==="t"||Bt==="b",Ft=ll[Bt],[Wn,Gn]=dt?["top","left"]:["left","top"],[Kn,Xn]=dt?[Se.height,Se.width]:[Se.width,Se.height],[fl,gl]=dt?[Ts,Ps]:[Ps,Ts],[ml,vl]=dt?[As,ks]:[ks,As];if(!(Ft<ml||Ft+Kn+N>fl))for(let Yn of pl){let qt=cl[(dt?"v":"h")+Yn];if(!(qt<vl||qt+Xn+N>gl)){if(qt-=Se[Gn],Ft-=Se[Wn],b.style[Gn]=`${qt}px`,b.style[Wn]=`${Ft}px`,E){let Qn=dt?ae.width/2:ae.height/2,Ai=Xn/2,Ls=Qn>Ai,yl=qt+{s:Ls?Ai:Qn,m:Ai,e:Ls?Ai:Xn-Qn}[Yn],wl=Ft+{t:Kn,b:0,r:0,l:Kn}[Bt];E.style[Gn]=`${yl}px`,E.style[Wn]=`${wl}px`}return Bt+Yn}}}return b.style.left=qn,b.style.top=zn,null})(d,m,p)}}},al=(()=>{class S{static utils=i;static version="1.9.1";static I18N_DEFAULTS={"ui:dialog":"color picker dialog","btn:toggle":"toggle color picker dialog","btn:swatch":"color swatch","btn:last-color":"use previous color","btn:save":"Save","btn:cancel":"Cancel","btn:clear":"Clear","aria:btn:save":"save and close","aria:btn:cancel":"cancel and close","aria:btn:clear":"clear and close","aria:input":"color input field","aria:palette":"color selection area","aria:hue":"hue selection slider","aria:opacity":"selection slider"};static DEFAULT_OPTIONS={appClass:null,theme:"classic",useAsButton:!1,padding:8,disabled:!1,comparison:!0,closeOnScroll:!1,outputPrecision:0,lockOpacity:!1,autoReposition:!0,container:"body",components:{interaction:{}},i18n:{},swatches:null,inline:!1,sliders:null,default:"#42445a",defaultRepresentation:null,position:"bottom-middle",adjustableNumbers:!0,showAlways:!1,closeWithKey:"Escape"};_initializingActive=!0;_recalc=!0;_nanopop=null;_root=null;_color=$t();_lastColor=$t();_swatchColors=[];_setupAnimationFrame=null;_eventListener={init:[],save:[],hide:[],show:[],clear:[],change:[],changestop:[],cancel:[],swatchselect:[]};constructor(u){this.options=u=Object.assign(_({},S.DEFAULT_OPTIONS),u);let{swatches:p,components:g,theme:d,sliders:m,lockOpacity:y,padding:b}=u;["nano","monolith"].includes(d)&&!m&&(u.sliders="h"),g.interaction||(g.interaction={});let{preview:I,opacity:O,hue:E,palette:V}=g;g.opacity=!y&&O,g.palette=V||I||O||E,this._preBuild(),this._buildComponents(),this._bindEvents(),this._finalBuild(),p&&p.length&&p.forEach(pe=>this.addSwatch(pe));let{button:N,app:P}=this._root;this._nanopop=ol(N,P,{margin:b}),N.setAttribute("role","button"),N.setAttribute("aria-label",this._t("btn:toggle"));let ne=this;this._setupAnimationFrame=requestAnimationFrame(function pe(){if(!P.offsetWidth)return requestAnimationFrame(pe);ne.setColor(u.default),ne._rePositioningPicker(),u.defaultRepresentation&&(ne._representation=u.defaultRepresentation,ne.setColorRepresentation(ne._representation)),u.showAlways&&ne.show(),ne._initializingActive=!1,ne._emit("init")})}static create=u=>new S(u);_preBuild(){let{options:u}=this;for(let p of["el","container"])u[p]=c(u[p]);this._root=(p=>{let{components:g,useAsButton:d,inline:m,appClass:y,theme:b,lockOpacity:I}=p.options,O=P=>P?"":'style="display:none" hidden',E=P=>p._t(P),V=a(`
      <div :ref="root" class="pickr">

        ${d?"":'<button type="button" :ref="button" class="pcr-button"></button>'}

        <div :ref="app" class="pcr-app ${y||""}" data-theme="${b}" ${m?'style="position: unset"':""} aria-label="${E("ui:dialog")}" role="window">
          <div class="pcr-selection" ${O(g.palette)}>
            <div :obj="preview" class="pcr-color-preview" ${O(g.preview)}>
              <button type="button" :ref="lastColor" class="pcr-last-color" aria-label="${E("btn:last-color")}"></button>
              <div :ref="currentColor" class="pcr-current-color"></div>
            </div>

            <div :obj="palette" class="pcr-color-palette">
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="palette" class="pcr-palette" tabindex="0" aria-label="${E("aria:palette")}" role="listbox"></div>
            </div>

            <div :obj="hue" class="pcr-color-chooser" ${O(g.hue)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-hue pcr-slider" tabindex="0" aria-label="${E("aria:hue")}" role="slider"></div>
            </div>

            <div :obj="opacity" class="pcr-color-opacity" ${O(g.opacity)}>
              <div :ref="picker" class="pcr-picker"></div>
              <div :ref="slider" class="pcr-opacity pcr-slider" tabindex="0" aria-label="${E("aria:opacity")}" role="slider"></div>
            </div>
          </div>

          <div class="pcr-swatches ${g.palette?"":"pcr-last"}" :ref="swatches"></div>

          <div :obj="interaction" class="pcr-interaction" ${O(Object.keys(g.interaction).length)}>
            <input :ref="result" class="pcr-result" type="text" spellcheck="false" ${O(g.interaction.input)} aria-label="${E("aria:input")}">

            <input :arr="options" class="pcr-type" data-type="HEXA" value="${I?"HEX":"HEXA"}" type="button" ${O(g.interaction.hex)}>
            <input :arr="options" class="pcr-type" data-type="RGBA" value="${I?"RGB":"RGBA"}" type="button" ${O(g.interaction.rgba)}>
            <input :arr="options" class="pcr-type" data-type="HSLA" value="${I?"HSL":"HSLA"}" type="button" ${O(g.interaction.hsla)}>
            <input :arr="options" class="pcr-type" data-type="HSVA" value="${I?"HSV":"HSVA"}" type="button" ${O(g.interaction.hsva)}>
            <input :arr="options" class="pcr-type" data-type="CMYK" value="CMYK" type="button" ${O(g.interaction.cmyk)}>

            <input :ref="save" class="pcr-save" value="${E("btn:save")}" type="button" ${O(g.interaction.save)} aria-label="${E("aria:btn:save")}">
            <input :ref="cancel" class="pcr-cancel" value="${E("btn:cancel")}" type="button" ${O(g.interaction.cancel)} aria-label="${E("aria:btn:cancel")}">
            <input :ref="clear" class="pcr-clear" value="${E("btn:clear")}" type="button" ${O(g.interaction.clear)} aria-label="${E("aria:btn:clear")}">
          </div>
        </div>
      </div>
    `),N=V.interaction;return N.options.find(P=>!P.hidden&&!P.classList.add("active")),N.type=()=>N.options.find(P=>P.classList.contains("active")),V})(this),u.useAsButton&&(this._root.button=u.el),u.container.appendChild(this._root.root)}_finalBuild(){let u=this.options,p=this._root;if(u.container.removeChild(p.root),u.inline){let g=u.el.parentElement;u.el.nextSibling?g.insertBefore(p.app,u.el.nextSibling):g.appendChild(p.app)}else u.container.appendChild(p.app);u.useAsButton?u.inline&&u.el.remove():u.el.parentNode.replaceChild(p.root,u.el),u.disabled&&this.disable(),u.comparison||(p.button.style.transition="none",u.useAsButton||(p.preview.lastColor.style.transition="none")),this.hide()}_buildComponents(){let u=this,p=this.options.components,g=(u.options.sliders||"v").repeat(2),[d,m]=g.match(/^[vh]+$/g)?g:[],y=()=>this._color||(this._color=this._lastColor.clone()),b={palette:Fn({element:u._root.palette.picker,wrapper:u._root.palette.palette,onstop:()=>u._emit("changestop","slider",u),onchange(I,O){if(!p.palette)return;let E=y(),{_root:V,options:N}=u,{lastColor:P,currentColor:ne}=V.preview;u._recalc&&(E.s=100*I,E.v=100-100*O,E.v<0&&(E.v=0),u._updateOutput("slider"));let pe=E.toRGBA().toString(0);this.element.style.background=pe,this.wrapper.style.background=`
                        linear-gradient(to top, rgba(0, 0, 0, ${E.a}), transparent),
                        linear-gradient(to left, hsla(${E.h}, 100%, 50%, ${E.a}), rgba(255, 255, 255, ${E.a}))
                    `,N.comparison?N.useAsButton||u._lastColor||P.style.setProperty("--pcr-color",pe):(V.button.style.setProperty("--pcr-color",pe),V.button.classList.remove("clear"));let qn=E.toHEXA().toString();for(let{el:zn,color:ae}of u._swatchColors)zn.classList[qn===ae.toHEXA().toString()?"add":"remove"]("pcr-active");ne.style.setProperty("--pcr-color",pe)}}),hue:Fn({lock:m==="v"?"h":"v",element:u._root.hue.picker,wrapper:u._root.hue.slider,onstop:()=>u._emit("changestop","slider",u),onchange(I){if(!p.hue||!p.palette)return;let O=y();u._recalc&&(O.h=360*I),this.element.style.backgroundColor=`hsl(${O.h}, 100%, 50%)`,b.palette.trigger()}}),opacity:Fn({lock:d==="v"?"h":"v",element:u._root.opacity.picker,wrapper:u._root.opacity.slider,onstop:()=>u._emit("changestop","slider",u),onchange(I){if(!p.opacity||!p.palette)return;let O=y();u._recalc&&(O.a=Math.round(100*I)/100),this.element.style.background=`rgba(0, 0, 0, ${O.a})`,b.palette.trigger()}}),selectable:rl({elements:u._root.interaction.options,className:"active",onchange(I){u._representation=I.target.getAttribute("data-type").toUpperCase(),u._recalc&&u._updateOutput("swatch")}})};this._components=b}_bindEvents(){let{_root:u,options:p}=this,g=[n(u.interaction.clear,"click",()=>this._clearColor()),n([u.interaction.cancel,u.preview.lastColor],"click",()=>{this.setHSVA(...(this._lastColor||this._color).toHSVA(),!0),this._emit("cancel")}),n(u.interaction.save,"click",()=>{!this.applyColor()&&!p.showAlways&&this.hide()}),n(u.interaction.result,["keyup","input"],d=>{this.setColor(d.target.value,!0)&&!this._initializingActive&&(this._emit("change",this._color,"input",this),this._emit("changestop","input",this)),d.stopImmediatePropagation()}),n(u.interaction.result,["focus","blur"],d=>{this._recalc=d.type==="blur",this._recalc&&this._updateOutput(null)}),n([u.palette.palette,u.palette.picker,u.hue.slider,u.hue.picker,u.opacity.slider,u.opacity.picker],["mousedown","touchstart"],()=>this._recalc=!0,{passive:!0})];if(!p.showAlways){let d=p.closeWithKey;g.push(n(u.button,"click",()=>this.isOpen()?this.hide():this.show()),n(document,"keyup",m=>this.isOpen()&&(m.key===d||m.code===d)&&this.hide()),n(document,["touchstart","mousedown"],m=>{this.isOpen()&&!l(m).some(y=>y===u.app||y===u.button)&&this.hide()},{capture:!0}))}if(p.adjustableNumbers){let d={rgba:[255,255,255,1],hsva:[360,100,100,1],hsla:[360,100,100,1],cmyk:[100,100,100,100]};h(u.interaction.result,(m,y,b)=>{let I=d[this.getColorRepresentation().toLowerCase()];if(I){let O=I[b],E=m+(O>=100?1e3*y:y);return E<=0?0:Number((E<O?E:O).toPrecision(3))}return m})}if(p.autoReposition&&!p.inline){let d=null,m=this;g.push(n(window,["scroll","resize"],()=>{m.isOpen()&&(p.closeOnScroll&&m.hide(),d===null?(d=setTimeout(()=>d=null,100),requestAnimationFrame(function y(){m._rePositioningPicker(),d!==null&&requestAnimationFrame(y)})):(clearTimeout(d),d=setTimeout(()=>d=null,100)))},{capture:!0}))}this._eventBindings=g}_rePositioningPicker(){let{options:u}=this;if(!u.inline&&!this._nanopop.update({container:document.body.getBoundingClientRect(),position:u.position})){let p=this._root.app,g=p.getBoundingClientRect();p.style.top=(window.innerHeight-g.height)/2+"px",p.style.left=(window.innerWidth-g.width)/2+"px"}}_updateOutput(u){let{_root:p,_color:g,options:d}=this;if(p.interaction.type()){let m=`to${p.interaction.type().getAttribute("data-type")}`;p.interaction.result.value=typeof g[m]=="function"?g[m]().toString(d.outputPrecision):""}!this._initializingActive&&this._recalc&&this._emit("change",g,u,this)}_clearColor(u=!1){let{_root:p,options:g}=this;g.useAsButton||p.button.style.setProperty("--pcr-color","rgba(0, 0, 0, 0.15)"),p.button.classList.add("clear"),g.showAlways||this.hide(),this._lastColor=null,this._initializingActive||u||(this._emit("save",null),this._emit("clear"))}_parseLocalColor(u){let{values:p,type:g,a:d}=nl(u),{lockOpacity:m}=this.options,y=d!==void 0&&d!==1;return p&&p.length===3&&(p[3]=void 0),{values:!p||m&&y?null:p,type:g}}_t(u){return this.options.i18n[u]||S.I18N_DEFAULTS[u]}_emit(u,...p){this._eventListener[u].forEach(g=>g(...p,this))}on(u,p){return this._eventListener[u].push(p),this}off(u,p){let g=this._eventListener[u]||[],d=g.indexOf(p);return~d&&g.splice(d,1),this}addSwatch(u){let{values:p}=this._parseLocalColor(u);if(p){let{_swatchColors:g,_root:d}=this,m=$t(...p),y=o(`<button type="button" style="--pcr-color: ${m.toRGBA().toString(0)}" aria-label="${this._t("btn:swatch")}"/>`);return d.swatches.appendChild(y),g.push({el:y,color:m}),this._eventBindings.push(n(y,"click",()=>{this.setHSVA(...m.toHSVA(),!0),this._emit("swatchselect",m),this._emit("change",m,"swatch",this)})),!0}return!1}removeSwatch(u){let p=this._swatchColors[u];if(p){let{el:g}=p;return this._root.swatches.removeChild(g),this._swatchColors.splice(u,1),!0}return!1}applyColor(u=!1){let{preview:p,button:g}=this._root,d=this._color.toRGBA().toString(0);return p.lastColor.style.setProperty("--pcr-color",d),this.options.useAsButton||g.style.setProperty("--pcr-color",d),g.classList.remove("clear"),this._lastColor=this._color.clone(),this._initializingActive||u||this._emit("save",this._color),this}destroy(){cancelAnimationFrame(this._setupAnimationFrame),this._eventBindings.forEach(u=>s(...u)),Object.keys(this._components).forEach(u=>this._components[u].destroy())}destroyAndRemove(){this.destroy();let{root:u,app:p}=this._root;u.parentElement&&u.parentElement.removeChild(u),p.parentElement.removeChild(p),Object.keys(this).forEach(g=>this[g]=null)}hide(){return!!this.isOpen()&&(this._root.app.classList.remove("visible"),this._emit("hide"),!0)}show(){return!this.options.disabled&&!this.isOpen()&&(this._root.app.classList.add("visible"),this._rePositioningPicker(),this._emit("show",this._color),this)}isOpen(){return this._root.app.classList.contains("visible")}setHSVA(u=360,p=0,g=0,d=1,m=!1){let y=this._recalc;if(this._recalc=!1,u<0||u>360||p<0||p>100||g<0||g>100||d<0||d>1)return!1;this._color=$t(u,p,g,d);let{hue:b,opacity:I,palette:O}=this._components;return b.update(u/360),I.update(d),O.update(p/100,1-g/100),m||this.applyColor(),y&&this._updateOutput(),this._recalc=y,!0}setColor(u,p=!1){if(u===null)return this._clearColor(p),!0;let{values:g,type:d}=this._parseLocalColor(u);if(g){let m=d.toUpperCase(),{options:y}=this._root.interaction,b=y.find(I=>I.getAttribute("data-type")===m);if(b&&!b.hidden)for(let I of y)I.classList[I===b?"add":"remove"]("active");return!!this.setHSVA(...g,p)&&this.setColorRepresentation(m)}return!1}setColorRepresentation(u){return u=u.toUpperCase(),!!this._root.interaction.options.find(p=>p.getAttribute("data-type").startsWith(u)&&!p.click())}getColorRepresentation(){return this._representation}getColor(){return this._color}getSelectedColor(){return this._lastColor}getRoot(){return this._root}disable(){return this.hide(),this.options.disabled=!0,this._root.button.classList.add("disabled"),this}enable(){return this.options.disabled=!1,this._root.button.classList.remove("disabled"),this}}return S})();return e=e.default})())});var Rr=class extends Eo{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dr=class r extends Rr{static makeCurrent(){So(new r)}onAndCancel(e,i,t){return e.addEventListener(i,t),()=>{e.removeEventListener(i,t)}}dispatchEvent(e,i){e.dispatchEvent(i)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,i){return i=i||this.getDefaultDocument(),i.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,i){return i==="window"?window:i==="document"?e:i==="body"?e.body:null}getBaseHref(e){let i=Sl();return i==null?null:El(i)}resetBaseElement(){ti=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Io(document.cookie,e)}},ti=null;function Sl(){return ti=ti||document.querySelector("base"),ti?ti.getAttribute("href"):null}function El(r){return new URL(r,document.baseURI).pathname}var Ar=class{addToWindow(e){We.getAngularTestability=(t,n=!0)=>{let s=e.findTestabilityInTree(t,n);if(s==null)throw new G(5103,!1);return s},We.getAllAngularTestabilities=()=>e.getAllTestabilities(),We.getAllAngularRootElements=()=>e.getAllRootElements();let i=t=>{let n=We.getAllAngularTestabilities(),s=n.length,o=function(){s--,s==0&&t()};n.forEach(a=>{a.whenStable(o)})};We.frameworkStabilizers||(We.frameworkStabilizers=[]),We.frameworkStabilizers.push(i)}findTestabilityInTree(e,i,t){if(i==null)return null;let n=e.getTestability(i);return n??(t?Fi().isShadowRoot(i)?this.findTestabilityInTree(e,i.host,!0):this.findTestabilityInTree(e,i.parentElement,!0):null)}},xl=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),kr=new Y(""),Ho=(()=>{let e=class e{constructor(t,n){this._zone=n,this._eventNameToPlugin=new Map,t.forEach(s=>{s.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,n,s){return this._findPluginFor(n).addEventListener(t,n,s)}getZone(){return this._zone}_findPluginFor(t){let n=this._eventNameToPlugin.get(t);if(n)return n;if(n=this._plugins.find(o=>o.supports(t)),!n)throw new G(5101,!1);return this._eventNameToPlugin.set(t,n),n}};e.\u0275fac=function(n){return new(n||e)($(kr),$(le))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),zi=class{constructor(e){this._doc=e}},Or="ng-app-id",jo=(()=>{let e=class e{constructor(t,n,s,o={}){this.doc=t,this.appId=n,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Mr(o),this.resetHostNodes()}addStyles(t){for(let n of t)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(t){for(let n of t)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(n=>n.remove()),t.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let n of this.getAllStyles())this.addStyleToHost(t,n)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let n of this.hostNodes)this.addStyleToHost(n,t)}onStyleRemoved(t){let n=this.styleRef;n.get(t)?.elements?.forEach(s=>s.remove()),n.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Or}="${this.appId}"]`);if(t?.length){let n=new Map;return t.forEach(s=>{s.textContent!=null&&n.set(s.textContent,s)}),n}return null}changeUsageCount(t,n){let s=this.styleRef;if(s.has(t)){let o=s.get(t);return o.usage+=n,o.usage}return s.set(t,{usage:n,elements:[]}),n}getStyleElement(t,n){let s=this.styleNodesInDOM,o=s?.get(n);if(o?.parentNode===t)return s.delete(n),o.removeAttribute(Or),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=n,this.platformIsServer&&a.setAttribute(Or,this.appId),t.appendChild(a),a}}addStyleToHost(t,n){let s=this.getStyleElement(t,n),o=this.styleRef,a=o.get(n)?.elements;a?a.push(s):o.set(n,{elements:[s],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(n){return new(n||e)($(ve),$(Vi),$(pr,8),$(Xt))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Ir={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pr=/%COMP%/g,$o="%COMP%",Ml=`_nghost-${$o}`,Ol=`_ngcontent-${$o}`,Il=!0,Rl=new Y("",{providedIn:"root",factory:()=>Il});function Dl(r){return Ol.replace(Pr,r)}function Al(r){return Ml.replace(Pr,r)}function Bo(r,e){return e.map(i=>i.replace(Pr,r))}var Wi=(()=>{let e=class e{constructor(t,n,s,o,a,l,c,h=null){this.eventManager=t,this.sharedStylesHost=n,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Mr(l),this.defaultRenderer=new ii(t,a,c,this.platformIsServer)}createRenderer(t,n){if(!t||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Wt.ShadowDom&&(n=F(_({},n),{encapsulation:Wt.Emulated}));let s=this.getOrCreateRenderer(t,n);return s instanceof Gi?s.applyToHost(t):s instanceof ni&&s.applyStyles(),s}getOrCreateRenderer(t,n){let s=this.rendererByCompId,o=s.get(n.id);if(!o){let a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,C=this.removeStylesOnCompDestroy,M=this.platformIsServer;switch(n.encapsulation){case Wt.Emulated:o=new Gi(c,h,n,this.appId,C,a,l,M);break;case Wt.ShadowDom:return new Tr(c,h,t,n,a,l,this.nonce,M);default:o=new ni(c,h,n,C,a,l,M);break}s.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(n){return new(n||e)($(Ho),$(jo),$(Vi),$(Rl),$(ve),$(Xt),$(le),$(pr))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),ii=class{constructor(e,i,t,n){this.eventManager=e,this.doc=i,this.ngZone=t,this.platformIsServer=n,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,i){return i?this.doc.createElementNS(Ir[i]||i,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,i){(Vo(e)?e.content:e).appendChild(i)}insertBefore(e,i,t){e&&(Vo(e)?e.content:e).insertBefore(i,t)}removeChild(e,i){e&&e.removeChild(i)}selectRootElement(e,i){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new G(-5104,!1);return i||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,i,t,n){if(n){i=n+":"+i;let s=Ir[n];s?e.setAttributeNS(s,i,t):e.setAttribute(i,t)}else e.setAttribute(i,t)}removeAttribute(e,i,t){if(t){let n=Ir[t];n?e.removeAttributeNS(n,i):e.removeAttribute(`${t}:${i}`)}else e.removeAttribute(i)}addClass(e,i){e.classList.add(i)}removeClass(e,i){e.classList.remove(i)}setStyle(e,i,t,n){n&(Yt.DashCase|Yt.Important)?e.style.setProperty(i,t,n&Yt.Important?"important":""):e.style[i]=t}removeStyle(e,i,t){t&Yt.DashCase?e.style.removeProperty(i):e.style[i]=""}setProperty(e,i,t){e!=null&&(e[i]=t)}setValue(e,i){e.nodeValue=i}listen(e,i,t){if(typeof e=="string"&&(e=Fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${i}`);return this.eventManager.addEventListener(e,i,this.decoratePreventDefault(t))}decoratePreventDefault(e){return i=>{if(i==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(i)):e(i))===!1&&i.preventDefault()}}};function Vo(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Tr=class extends ii{constructor(e,i,t,n,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=i,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Bo(n.id,n.styles);for(let h of c){let C=document.createElement("style");a&&C.setAttribute("nonce",a),C.textContent=h,this.shadowRoot.appendChild(C)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,i){return super.appendChild(this.nodeOrShadowRoot(e),i)}insertBefore(e,i,t){return super.insertBefore(this.nodeOrShadowRoot(e),i,t)}removeChild(e,i){return super.removeChild(this.nodeOrShadowRoot(e),i)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ni=class extends ii{constructor(e,i,t,n,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=i,this.removeStylesOnCompDestroy=n,this.styles=l?Bo(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Gi=class extends ni{constructor(e,i,t,n,s,o,a,l){let c=n+"-"+t.id;super(e,i,t,s,o,a,l,c),this.contentAttr=Dl(c),this.hostAttr=Al(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,i){let t=super.createElement(e,i);return super.setAttribute(t,this.contentAttr,""),t}},kl=(()=>{let e=class e extends zi{constructor(t){super(t)}supports(t){return!0}addEventListener(t,n,s){return t.addEventListener(n,s,!1),()=>this.removeEventListener(t,n,s)}removeEventListener(t,n,s){return t.removeEventListener(n,s)}};e.\u0275fac=function(n){return new(n||e)($(ve))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),No=["alt","control","meta","shift"],Tl={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Pl={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},Ll=(()=>{let e=class e extends zi{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,n,s){let o=e.parseEventName(n),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(t,o.domEventName,a))}static parseEventName(t){let n=t.toLowerCase().split("."),s=n.shift();if(n.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(n.pop()),a="",l=n.indexOf("code");if(l>-1&&(n.splice(l,1),a="code."),No.forEach(h=>{let C=n.indexOf(h);C>-1&&(n.splice(C,1),a+=h+".")}),a+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=s,c.fullKey=a,c}static matchEventFullKeyCode(t,n){let s=Tl[t.key]||t.key,o="";return n.indexOf("code.")>-1&&(s=t.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),No.forEach(a=>{if(a!==s){let l=Pl[a];l(t)&&(o+=a+".")}}),o+=s,o===n)}static eventCallback(t,n,s){return o=>{e.matchEventFullKeyCode(o,t)&&s.runGuarded(()=>n(o))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(n){return new(n||e)($(ve))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function Vl(){Dr.makeCurrent()}function Nl(){return new hr}function Ul(){return Xs(document),document}var Hl=[{provide:Xt,useValue:To},{provide:Ys,useValue:Vl,multi:!0},{provide:ve,useFactory:Ul,deps:[]}],Fo=wo(bo,"browser",Hl),jl=new Y(""),$l=[{provide:ji,useClass:Ar,deps:[]},{provide:vo,useClass:$i,deps:[le,_r,ji]},{provide:$i,useClass:$i,deps:[le,_r,ji]}],Bl=[{provide:Ks,useValue:"root"},{provide:hr,useFactory:Nl,deps:[]},{provide:kr,useClass:kl,multi:!0,deps:[ve,le,Xt]},{provide:kr,useClass:Ll,multi:!0,deps:[ve]},Wi,jo,Ho,{provide:Ui,useExisting:Wi},{provide:Lo,useClass:xl,deps:[]},[]],qo=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:Vi,useValue:t.appId}]}}};e.\u0275fac=function(n){return new(n||e)($(jl,12))},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({providers:[...Bl,...$l],imports:[qi,_o]});let r=e;return r})();var zo=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(n){return new(n||e)($(ve))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var T="primary",yi=Symbol("RouteTitle"),Hr=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i[0]:i}return null}getAll(e){if(this.has(e)){let i=this.params[e];return Array.isArray(i)?i:[i]}return[]}get keys(){return Object.keys(this.params)}};function Mt(r){return new Hr(r)}function ql(r,e,i){let t=i.path.split("/");if(t.length>r.length||i.pathMatch==="full"&&(e.hasChildren()||t.length<r.length))return null;let n={};for(let s=0;s<t.length;s++){let o=t[s],a=r[s];if(o.startsWith(":"))n[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,t.length),posParams:n}}function zl(r,e){if(r.length!==e.length)return!1;for(let i=0;i<r.length;++i)if(!Te(r[i],e[i]))return!1;return!0}function Te(r,e){let i=r?jr(r):void 0,t=e?jr(e):void 0;if(!i||!t||i.length!=t.length)return!1;let n;for(let s=0;s<i.length;s++)if(n=i[s],!ta(r[n],e[n]))return!1;return!0}function jr(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function ta(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let i=[...r].sort(),t=[...e].sort();return i.every((n,s)=>t[s]===n)}else return r===e}function ia(r){return r.length>0?r[r.length-1]:null}function Ze(r){return Us(r)?r:Cr(r)?fe(Promise.resolve(r)):A(r)}var Wl={exact:ra,subset:sa},na={exact:Gl,subset:Kl,ignored:()=>!0};function Go(r,e,i){return Wl[i.paths](r.root,e.root,i.matrixParams)&&na[i.queryParams](r.queryParams,e.queryParams)&&!(i.fragment==="exact"&&r.fragment!==e.fragment)}function Gl(r,e){return Te(r,e)}function ra(r,e,i){if(!ot(r.segments,e.segments)||!Yi(r.segments,e.segments,i)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!r.children[t]||!ra(r.children[t],e.children[t],i))return!1;return!0}function Kl(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(i=>ta(r[i],e[i]))}function sa(r,e,i){return oa(r,e,e.segments,i)}function oa(r,e,i,t){if(r.segments.length>i.length){let n=r.segments.slice(0,i.length);return!(!ot(n,i)||e.hasChildren()||!Yi(n,i,t))}else if(r.segments.length===i.length){if(!ot(r.segments,i)||!Yi(r.segments,i,t))return!1;for(let n in e.children)if(!r.children[n]||!sa(r.children[n],e.children[n],t))return!1;return!0}else{let n=i.slice(0,r.segments.length),s=i.slice(r.segments.length);return!ot(r.segments,n)||!Yi(r.segments,n,t)||!r.children[T]?!1:oa(r.children[T],e,s,t)}}function Yi(r,e,i){return e.every((t,n)=>na[i](r[n].parameters,t.parameters))}var Xe=class{constructor(e=new U([],{}),i={},t=null){this.root=e,this.queryParams=i,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Mt(this.queryParams),this._queryParamMap}toString(){return Ql.serialize(this)}},U=class{constructor(e,i){this.segments=e,this.children=i,this.parent=null,Object.values(i).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Qi(this)}},st=class{constructor(e,i){this.path=e,this.parameters=i}get parameterMap(){return this._parameterMap??=Mt(this.parameters),this._parameterMap}toString(){return la(this)}};function Xl(r,e){return ot(r,e)&&r.every((i,t)=>Te(i.parameters,e[t].parameters))}function ot(r,e){return r.length!==e.length?!1:r.every((i,t)=>i.path===e[t].path)}function Yl(r,e){let i=[];return Object.entries(r.children).forEach(([t,n])=>{t===T&&(i=i.concat(e(n,t)))}),Object.entries(r.children).forEach(([t,n])=>{t!==T&&(i=i.concat(e(n,t)))}),i}var wi=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>new ui,providedIn:"root"});let r=e;return r})(),ui=class{parse(e){let i=new Br(e);return new Xe(i.parseRootSegment(),i.parseQueryParams(),i.parseFragment())}serialize(e){let i=`/${ri(e.root,!0)}`,t=ec(e.queryParams),n=typeof e.fragment=="string"?`#${Zl(e.fragment)}`:"";return`${i}${t}${n}`}},Ql=new ui;function Qi(r){return r.segments.map(e=>la(e)).join("/")}function ri(r,e){if(!r.hasChildren())return Qi(r);if(e){let i=r.children[T]?ri(r.children[T],!1):"",t=[];return Object.entries(r.children).forEach(([n,s])=>{n!==T&&t.push(`${n}:${ri(s,!1)}`)}),t.length>0?`${i}(${t.join("//")})`:i}else{let i=Yl(r,(t,n)=>n===T?[ri(r.children[T],!1)]:[`${n}:${ri(t,!1)}`]);return Object.keys(r.children).length===1&&r.children[T]!=null?`${Qi(r)}/${i[0]}`:`${Qi(r)}/(${i.join("//")})`}}function aa(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ki(r){return aa(r).replace(/%3B/gi,";")}function Zl(r){return encodeURI(r)}function $r(r){return aa(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zi(r){return decodeURIComponent(r)}function Ko(r){return Zi(r.replace(/\+/g,"%20"))}function la(r){return`${$r(r.path)}${Jl(r.parameters)}`}function Jl(r){return Object.entries(r).map(([e,i])=>`;${$r(e)}=${$r(i)}`).join("")}function ec(r){let e=Object.entries(r).map(([i,t])=>Array.isArray(t)?t.map(n=>`${Ki(i)}=${Ki(n)}`).join("&"):`${Ki(i)}=${Ki(t)}`).filter(i=>i);return e.length?`?${e.join("&")}`:""}var tc=/^[^\/()?;#]+/;function Lr(r){let e=r.match(tc);return e?e[0]:""}var ic=/^[^\/()?;=#]+/;function nc(r){let e=r.match(ic);return e?e[0]:""}var rc=/^[^=?&#]+/;function sc(r){let e=r.match(rc);return e?e[0]:""}var oc=/^[^&#]+/;function ac(r){let e=r.match(oc);return e?e[0]:""}var Br=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new U([],{}):new U([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let i={};this.peekStartsWith("/(")&&(this.capture("/"),i=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(i).length>0)&&(t[T]=new U(e,i)),t}parseSegment(){let e=Lr(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new st(Zi(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let i=nc(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let n=Lr(this.remaining);n&&(t=n,this.capture(t))}e[Zi(i)]=Zi(t)}parseQueryParam(e){let i=sc(this.remaining);if(!i)return;this.capture(i);let t="";if(this.consumeOptional("=")){let o=ac(this.remaining);o&&(t=o,this.capture(t))}let n=Ko(i),s=Ko(t);if(e.hasOwnProperty(n)){let o=e[n];Array.isArray(o)||(o=[o],e[n]=o),o.push(s)}else e[n]=s}parseParens(e){let i={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=Lr(this.remaining),n=this.remaining[t.length];if(n!=="/"&&n!==")"&&n!==";")throw new G(4010,!1);let s;t.indexOf(":")>-1?(s=t.slice(0,t.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=T);let o=this.parseChildren();i[s]=Object.keys(o).length===1?o[T]:new U([],o),this.consumeOptional("//")}return i}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function ca(r){return r.segments.length>0?new U([],{[T]:r}):r}function ua(r){let e={};for(let[t,n]of Object.entries(r.children)){let s=ua(n);if(t===T&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[t]=s)}let i=new U(r.segments,e);return lc(i)}function lc(r){if(r.numberOfChildren===1&&r.children[T]){let e=r.children[T];return new U(r.segments.concat(e.segments),e.children)}return r}function Ot(r){return r instanceof Xe}function cc(r,e,i=null,t=null){let n=da(r);return ha(n,e,i,t)}function da(r){let e;function i(s){let o={};for(let l of s.children){let c=i(l);o[l.outlet]=c}let a=new U(s.url,o);return s===r&&(e=a),a}let t=i(r.root),n=ca(t);return e??n}function ha(r,e,i,t){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return Vr(n,n,n,i,t);let s=uc(e);if(s.toRoot())return Vr(n,n,new U([],{}),i,t);let o=dc(s,n,r),a=o.processChildren?ai(o.segmentGroup,o.index,s.commands):fa(o.segmentGroup,o.index,s.commands);return Vr(n,o.segmentGroup,a,i,t)}function Ji(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function di(r){return typeof r=="object"&&r!=null&&r.outlets}function Vr(r,e,i,t,n){let s={};t&&Object.entries(t).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`});let o;r===e?o=i:o=pa(r,e,i);let a=ca(ua(o));return new Xe(a,s,n)}function pa(r,e,i){let t={};return Object.entries(r.children).forEach(([n,s])=>{s===e?t[n]=i:t[n]=pa(s,e,i)}),new U(r.segments,t)}var en=class{constructor(e,i,t){if(this.isAbsolute=e,this.numberOfDoubleDots=i,this.commands=t,e&&t.length>0&&Ji(t[0]))throw new G(4003,!1);let n=t.find(di);if(n&&n!==ia(t))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function uc(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new en(!0,0,r);let e=0,i=!1,t=r.reduce((n,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...n,{outlets:a}]}if(s.segmentPath)return[...n,s.segmentPath]}return typeof s!="string"?[...n,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?i=!0:a===".."?e++:a!=""&&n.push(a))}),n):[...n,s]},[]);return new en(i,e,t)}var Et=class{constructor(e,i,t){this.segmentGroup=e,this.processChildren=i,this.index=t}};function dc(r,e,i){if(r.isAbsolute)return new Et(e,!0,0);if(!i)return new Et(e,!1,NaN);if(i.parent===null)return new Et(i,!0,0);let t=Ji(r.commands[0])?0:1,n=i.segments.length-1+t;return hc(i,n,r.numberOfDoubleDots)}function hc(r,e,i){let t=r,n=e,s=i;for(;s>n;){if(s-=n,t=t.parent,!t)throw new G(4005,!1);n=t.segments.length}return new Et(t,!1,n-s)}function pc(r){return di(r[0])?r[0].outlets:{[T]:r}}function fa(r,e,i){if(r??=new U([],{}),r.segments.length===0&&r.hasChildren())return ai(r,e,i);let t=fc(r,e,i),n=i.slice(t.commandIndex);if(t.match&&t.pathIndex<r.segments.length){let s=new U(r.segments.slice(0,t.pathIndex),{});return s.children[T]=new U(r.segments.slice(t.pathIndex),r.children),ai(s,0,n)}else return t.match&&n.length===0?new U(r.segments,{}):t.match&&!r.hasChildren()?Fr(r,e,i):t.match?ai(r,0,n):Fr(r,e,i)}function ai(r,e,i){if(i.length===0)return new U(r.segments,{});{let t=pc(i),n={};if(Object.keys(t).some(s=>s!==T)&&r.children[T]&&r.numberOfChildren===1&&r.children[T].segments.length===0){let s=ai(r.children[T],e,i);return new U(r.segments,s.children)}return Object.entries(t).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(n[s]=fa(r.children[s],e,o))}),Object.entries(r.children).forEach(([s,o])=>{t[s]===void 0&&(n[s]=o)}),new U(r.segments,n)}}function fc(r,e,i){let t=0,n=e,s={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(t>=i.length)return s;let o=r.segments[n],a=i[t];if(di(a))break;let l=`${a}`,c=t<i.length-1?i[t+1]:null;if(n>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Yo(l,c,o))return s;t+=2}else{if(!Yo(l,{},o))return s;t++}n++}return{match:!0,pathIndex:n,commandIndex:t}}function Fr(r,e,i){let t=r.segments.slice(0,e),n=0;for(;n<i.length;){let s=i[n];if(di(s)){let l=gc(s.outlets);return new U(t,l)}if(n===0&&Ji(i[0])){let l=r.segments[e];t.push(new st(l.path,Xo(i[0]))),n++;continue}let o=di(s)?s.outlets[T]:`${s}`,a=n<i.length-1?i[n+1]:null;o&&a&&Ji(a)?(t.push(new st(o,Xo(a))),n+=2):(t.push(new st(o,{})),n++)}return new U(t,{})}function gc(r){let e={};return Object.entries(r).forEach(([i,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[i]=Fr(new U([],{}),0,t))}),e}function Xo(r){let e={};return Object.entries(r).forEach(([i,t])=>e[i]=`${t}`),e}function Yo(r,e,i){return r==i.path&&Te(e,i.parameters)}var li="imperative",se=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(se||{}),Oe=class{constructor(e,i){this.id=e,this.url=i}},It=class extends Oe{constructor(e,i,t="imperative",n=null){super(e,i),this.type=se.NavigationStart,this.navigationTrigger=t,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fe=class extends Oe{constructor(e,i,t){super(e,i),this.urlAfterRedirects=t,this.type=se.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},we=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(we||{}),tn=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(tn||{}),Ye=class extends Oe{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=se.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qe=class extends Oe{constructor(e,i,t,n){super(e,i),this.reason=t,this.code=n,this.type=se.NavigationSkipped}},hi=class extends Oe{constructor(e,i,t,n){super(e,i),this.error=t,this.target=n,this.type=se.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},nn=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=se.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qr=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=se.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zr=class extends Oe{constructor(e,i,t,n,s){super(e,i),this.urlAfterRedirects=t,this.state=n,this.shouldActivate=s,this.type=se.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wr=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=se.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gr=class extends Oe{constructor(e,i,t,n){super(e,i),this.urlAfterRedirects=t,this.state=n,this.type=se.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kr=class{constructor(e){this.route=e,this.type=se.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xr=class{constructor(e){this.route=e,this.type=se.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yr=class{constructor(e){this.snapshot=e,this.type=se.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qr=class{constructor(e){this.snapshot=e,this.type=se.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zr=class{constructor(e){this.snapshot=e,this.type=se.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jr=class{constructor(e){this.snapshot=e,this.type=se.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},rn=class{constructor(e,i,t){this.routerEvent=e,this.position=i,this.anchor=t,this.type=se.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},pi=class{},fi=class{constructor(e){this.url=e}};var es=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new bi,this.attachRef=null}},bi=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(t,n){let s=this.getOrCreateContext(t);s.outlet=n,this.contexts.set(t,s)}onChildOutletDestroyed(t){let n=this.getContext(t);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let n=this.getContext(t);return n||(n=new es,this.contexts.set(t,n)),n}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),sn=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let i=this.pathFromRoot(e);return i.length>1?i[i.length-2]:null}children(e){let i=ts(e,this._root);return i?i.children.map(t=>t.value):[]}firstChild(e){let i=ts(e,this._root);return i&&i.children.length>0?i.children[0].value:null}siblings(e){let i=is(e,this._root);return i.length<2?[]:i[i.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return is(e,this._root).map(i=>i.value)}};function ts(r,e){if(r===e.value)return e;for(let i of e.children){let t=ts(r,i);if(t)return t}return null}function is(r,e){if(r===e.value)return[e];for(let i of e.children){let t=is(r,i);if(t.length)return t.unshift(e),t}return[]}var ye=class{constructor(e,i){this.value=e,this.children=i}toString(){return`TreeNode(${this.value})`}};function St(r){let e={};return r&&r.children.forEach(i=>e[i.value.outlet]=i),e}var on=class extends sn{constructor(e,i){super(e),this.snapshot=i,hs(this,e)}toString(){return this.snapshot.toString()}};function ga(r){let e=mc(r),i=new xe([new st("",{})]),t=new xe({}),n=new xe({}),s=new xe({}),o=new xe(""),a=new Rt(i,t,s,o,n,T,r,e.root);return a.snapshot=e.root,new on(new ye(a,[]),e)}function mc(r){let e={},i={},t={},n="",s=new gi([],e,t,n,i,T,r,null,{});return new an("",new ye(s,[]))}var Rt=class{constructor(e,i,t,n,s,o,a,l){this.urlSubject=e,this.paramsSubject=i,this.queryParamsSubject=t,this.fragmentSubject=n,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(q(c=>c[yi]))??A(void 0),this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(q(e=>Mt(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(q(e=>Mt(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ds(r,e,i="emptyOnly"){let t,{routeConfig:n}=r;return e!==null&&(i==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:_(_({},e.params),r.params),data:_(_({},e.data),r.data),resolve:_(_(_(_({},r.data),e.data),n?.data),r._resolvedData)}:t={params:_({},r.params),data:_({},r.data),resolve:_(_({},r.data),r._resolvedData??{})},n&&va(n)&&(t.resolve[yi]=n.title),t}var gi=class{get title(){return this.data?.[yi]}constructor(e,i,t,n,s,o,a,l,c){this.url=e,this.params=i,this.queryParams=t,this.fragment=n,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Mt(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Mt(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),i=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${i}')`}},an=class extends sn{constructor(e,i){super(i),this.url=e,hs(this,i)}toString(){return ma(this._root)}};function hs(r,e){e.value._routerState=r,e.children.forEach(i=>hs(r,i))}function ma(r){let e=r.children.length>0?` { ${r.children.map(ma).join(", ")} } `:"";return`${r.value}${e}`}function Nr(r){if(r.snapshot){let e=r.snapshot,i=r._futureSnapshot;r.snapshot=i,Te(e.queryParams,i.queryParams)||r.queryParamsSubject.next(i.queryParams),e.fragment!==i.fragment&&r.fragmentSubject.next(i.fragment),Te(e.params,i.params)||r.paramsSubject.next(i.params),zl(e.url,i.url)||r.urlSubject.next(i.url),Te(e.data,i.data)||r.dataSubject.next(i.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function ns(r,e){let i=Te(r.params,e.params)&&Xl(r.url,e.url),t=!r.parent!=!e.parent;return i&&!t&&(!r.parent||ns(r.parent,e.parent))}function va(r){return typeof r.title=="string"||r.title===null}var ps=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=T,this.activateEvents=new Me,this.deactivateEvents=new Me,this.attachEvents=new Me,this.detachEvents=new Me,this.parentContexts=R(bi),this.location=R(no),this.changeDetector=R(Be),this.environmentInjector=R(vt),this.inputBinder=R(hn,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:n,previousValue:s}=t.name;if(n)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,n){this.activated=t,this._activatedRoute=n,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,n){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let s=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new rs(t,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275dir=mt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Li]});let r=e;return r})(),rs=class r{__ngOutletInjector(e){return new r(this.route,this.childContexts,e)}constructor(e,i,t){this.route=e,this.childContexts=i,this.parent=t}get(e,i){return e===Rt?this.route:e===bi?this.childContexts:this.parent.get(e,i)}},hn=new Y(""),Qo=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:n}=t,s=ki([n.queryParams,n.params,n.data]).pipe(Re(([o,a,l],c)=>(l=_(_(_({},o),a),l),c===0?A(l):Promise.resolve(l)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(t);return}let a=Co(n.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,o[l])});this.outletDataSubscriptions.set(t,s)}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function vc(r,e,i){let t=mi(r,e._root,i?i._root:void 0);return new on(t,e)}function mi(r,e,i){if(i&&r.shouldReuseRoute(e.value,i.value.snapshot)){let t=i.value;t._futureSnapshot=e.value;let n=yc(r,e,i);return new ye(t,n)}else{if(r.shouldAttach(e.value)){let s=r.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>mi(r,a)),o}}let t=wc(e.value),n=e.children.map(s=>mi(r,s));return new ye(t,n)}}function yc(r,e,i){return e.children.map(t=>{for(let n of i.children)if(r.shouldReuseRoute(t.value,n.value.snapshot))return mi(r,t,n);return mi(r,t)})}function wc(r){return new Rt(new xe(r.url),new xe(r.params),new xe(r.queryParams),new xe(r.fragment),new xe(r.data),r.outlet,r.component,r)}var ya="ngNavigationCancelingError";function wa(r,e){let{redirectTo:i,navigationBehaviorOptions:t}=Ot(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=ba(!1,we.Redirect);return n.url=i,n.navigationBehaviorOptions=t,n}function ba(r,e){let i=new Error(`NavigationCancelingError: ${r||""}`);return i[ya]=!0,i.cancellationCode=e,i}function bc(r){return _a(r)&&Ot(r.url)}function _a(r){return!!r&&r[ya]}var _c=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[fo],decls:1,vars:0,template:function(n,s){n&1&&Z(0,"router-outlet")},dependencies:[ps],encapsulation:2});let r=e;return r})();function Cc(r,e){return r.providers&&!r._injector&&(r._injector=mr(r.providers,e,`Route: ${r.path}`)),r._injector??e}function fs(r){let e=r.children&&r.children.map(fs),i=e?F(_({},r),{children:e}):_({},r);return!i.component&&!i.loadComponent&&(e||i.loadChildren)&&i.outlet&&i.outlet!==T&&(i.component=_c),i}function Pe(r){return r.outlet||T}function Sc(r,e){let i=r.filter(t=>Pe(t)===e);return i.push(...r.filter(t=>Pe(t)!==e)),i}function _i(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let i=e.routeConfig;if(i?._loadedInjector)return i._loadedInjector;if(i?._injector)return i._injector}return null}var Ec=(r,e,i,t)=>q(n=>(new ss(e,n.targetRouterState,n.currentRouterState,i,t).activate(r),n)),ss=class{constructor(e,i,t,n,s){this.routeReuseStrategy=e,this.futureState=i,this.currState=t,this.forwardEvent=n,this.inputBindingEnabled=s}activate(e){let i=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(i,t,e),Nr(this.futureState.root),this.activateChildRoutes(i,t,e)}deactivateChildRoutes(e,i,t){let n=St(i);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,n[o],t),delete n[o]}),Object.values(n).forEach(s=>{this.deactivateRouteAndItsChildren(s,t)})}deactivateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(n===s)if(n.component){let o=t.getContext(n.outlet);o&&this.deactivateChildRoutes(e,i,o.children)}else this.deactivateChildRoutes(e,i,t);else s&&this.deactivateRouteAndItsChildren(i,t)}deactivateRouteAndItsChildren(e,i){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,i):this.deactivateRouteAndOutlet(e,i)}detachAndStoreRouteSubtree(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=St(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);if(t&&t.outlet){let o=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,i){let t=i.getContext(e.value.outlet),n=t&&e.value.component?t.children:i,s=St(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,n);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,i,t){let n=St(i);e.children.forEach(s=>{this.activateRoutes(s,n[s.value.outlet],t),this.forwardEvent(new Jr(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Qr(e.value.snapshot))}activateRoutes(e,i,t){let n=e.value,s=i?i.value:null;if(Nr(n),n===s)if(n.component){let o=t.getOrCreateContext(n.outlet);this.activateChildRoutes(e,i,o.children)}else this.activateChildRoutes(e,i,t);else if(n.component){let o=t.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let a=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Nr(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=_i(n.snapshot);o.attachRef=null,o.route=n,o.injector=a,o.outlet&&o.outlet.activateWith(n,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,t)}},ln=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},xt=class{constructor(e,i){this.component=e,this.route=i}};function xc(r,e,i){let t=r._root,n=e?e._root:null;return si(t,n,i,[t.value])}function Mc(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function At(r,e){let i=Symbol(),t=e.get(r,i);return t===i?typeof r=="function"&&!Ws(r)?r:e.get(r):t}function si(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=St(e);return r.children.forEach(o=>{Oc(o,s[o.value.outlet],i,t.concat([o.value]),n),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>ci(a,i.getContext(o),n)),n}function Oc(r,e,i,t,n={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=e?e.value:null,a=i?i.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Ic(o,s,s.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new ln(t)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?si(r,e,a?a.children:null,t,n):si(r,e,i,t,n),l&&a&&a.outlet&&a.outlet.isActivated&&n.canDeactivateChecks.push(new xt(a.outlet.component,o))}else o&&ci(e,a,n),n.canActivateChecks.push(new ln(t)),s.component?si(r,null,a?a.children:null,t,n):si(r,null,i,t,n);return n}function Ic(r,e,i){if(typeof i=="function")return i(r,e);switch(i){case"pathParamsChange":return!ot(r.url,e.url);case"pathParamsOrQueryParamsChange":return!ot(r.url,e.url)||!Te(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ns(r,e)||!Te(r.queryParams,e.queryParams);case"paramsChange":default:return!ns(r,e)}}function ci(r,e,i){let t=St(r),n=r.value;Object.entries(t).forEach(([s,o])=>{n.component?e?ci(o,e.children.getContext(s),i):ci(o,null,i):ci(o,e,i)}),n.component?e&&e.outlet&&e.outlet.isActivated?i.canDeactivateChecks.push(new xt(e.outlet.component,n)):i.canDeactivateChecks.push(new xt(null,n)):i.canDeactivateChecks.push(new xt(null,n))}function Ci(r){return typeof r=="function"}function Rc(r){return typeof r=="boolean"}function Dc(r){return r&&Ci(r.canLoad)}function Ac(r){return r&&Ci(r.canActivate)}function kc(r){return r&&Ci(r.canActivateChild)}function Tc(r){return r&&Ci(r.canDeactivate)}function Pc(r){return r&&Ci(r.canMatch)}function Ca(r){return r instanceof Hs||r?.name==="EmptyError"}var Xi=Symbol("INITIAL_VALUE");function Dt(){return Re(r=>ki(r.map(e=>e.pipe(gt(1),qs(Xi)))).pipe(q(e=>{for(let i of e)if(i!==!0){if(i===Xi)return Xi;if(i===!1||i instanceof Xe)return i}return!0}),$e(e=>e!==Xi),gt(1)))}function Lc(r,e){return ge(i=>{let{targetSnapshot:t,currentSnapshot:n,guards:{canActivateChecks:s,canDeactivateChecks:o}}=i;return o.length===0&&s.length===0?A(F(_({},i),{guardsResult:!0})):Vc(o,t,n,r).pipe(ge(a=>a&&Rc(a)?Nc(t,s,r,e):A(a)),q(a=>F(_({},i),{guardsResult:a})))})}function Vc(r,e,i,t){return fe(r).pipe(ge(n=>Bc(n.component,n.route,i,e,t)),ze(n=>n!==!0,!0))}function Nc(r,e,i,t){return fe(e).pipe(ft(n=>js(Hc(n.route.parent,t),Uc(n.route,t),$c(r,n.path,i),jc(r,n.route,i))),ze(n=>n!==!0,!0))}function Uc(r,e){return r!==null&&e&&e(new Zr(r)),A(!0)}function Hc(r,e){return r!==null&&e&&e(new Yr(r)),A(!0)}function jc(r,e,i){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return A(!0);let n=t.map(s=>ir(()=>{let o=_i(e)??i,a=At(s,o),l=Ac(a)?a.canActivate(e,r):Ge(o,()=>a(e,r));return Ze(l).pipe(ze())}));return A(n).pipe(Dt())}function $c(r,e,i){let t=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Mc(o)).filter(o=>o!==null).map(o=>ir(()=>{let a=o.guards.map(l=>{let c=_i(o.node)??i,h=At(l,c),C=kc(h)?h.canActivateChild(t,r):Ge(c,()=>h(t,r));return Ze(C).pipe(ze())});return A(a).pipe(Dt())}));return A(s).pipe(Dt())}function Bc(r,e,i,t,n){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return A(!0);let o=s.map(a=>{let l=_i(e)??n,c=At(a,l),h=Tc(c)?c.canDeactivate(r,e,i,t):Ge(l,()=>c(r,e,i,t));return Ze(h).pipe(ze())});return A(o).pipe(Dt())}function Fc(r,e,i,t){let n=e.canLoad;if(n===void 0||n.length===0)return A(!0);let s=n.map(o=>{let a=At(o,r),l=Dc(a)?a.canLoad(e,i):Ge(r,()=>a(e,i));return Ze(l)});return A(s).pipe(Dt(),Sa(t))}function Sa(r){return Ns(ee(e=>{if(Ot(e))throw wa(r,e)}),q(e=>e===!0))}function qc(r,e,i,t){let n=e.canMatch;if(!n||n.length===0)return A(!0);let s=n.map(o=>{let a=At(o,r),l=Pc(a)?a.canMatch(e,i):Ge(r,()=>a(e,i));return Ze(l)});return A(s).pipe(Dt(),Sa(t))}var vi=class{constructor(e){this.segmentGroup=e||null}},cn=class extends Error{constructor(e){super(),this.urlTree=e}};function Ct(r){return zt(new vi(r))}function zc(r){return zt(new G(4e3,!1))}function Wc(r){return zt(ba(!1,we.GuardRejected))}var os=class{constructor(e,i){this.urlSerializer=e,this.urlTree=i}lineralizeSegments(e,i){let t=[],n=i.root;for(;;){if(t=t.concat(n.segments),n.numberOfChildren===0)return A(t);if(n.numberOfChildren>1||!n.children[T])return zc(e.redirectTo);n=n.children[T]}}applyRedirectCommands(e,i,t){let n=this.applyRedirectCreateUrlTree(i,this.urlSerializer.parse(i),e,t);if(i.startsWith("/"))throw new cn(n);return n}applyRedirectCreateUrlTree(e,i,t,n){let s=this.createSegmentGroup(e,i.root,t,n);return new Xe(s,this.createQueryParams(i.queryParams,this.urlTree.queryParams),i.fragment)}createQueryParams(e,i){let t={};return Object.entries(e).forEach(([n,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);t[n]=i[a]}else t[n]=s}),t}createSegmentGroup(e,i,t,n){let s=this.createSegments(e,i.segments,t,n),o={};return Object.entries(i.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,t,n)}),new U(s,o)}createSegments(e,i,t,n){return i.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,n):this.findOrReturn(s,t))}findPosParam(e,i,t){let n=t[i.path.substring(1)];if(!n)throw new G(4001,!1);return n}findOrReturn(e,i){let t=0;for(let n of i){if(n.path===e.path)return i.splice(t),n;t++}return e}},as={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Gc(r,e,i,t,n){let s=gs(r,e,i);return s.matched?(t=Cc(e,t),qc(t,e,i,n).pipe(q(o=>o===!0?s:_({},as)))):A(s)}function gs(r,e,i){if(e.path==="**")return Kc(i);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||i.length>0)?_({},as):{matched:!0,consumedSegments:[],remainingSegments:i,parameters:{},positionalParamSegments:{}};let n=(e.matcher||ql)(i,r,e);if(!n)return _({},as);let s={};Object.entries(n.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=n.consumed.length>0?_(_({},s),n.consumed[n.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:n.consumed,remainingSegments:i.slice(n.consumed.length),parameters:o,positionalParamSegments:n.posParams??{}}}function Kc(r){return{matched:!0,parameters:r.length>0?ia(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function Zo(r,e,i,t){return i.length>0&&Qc(r,i,t)?{segmentGroup:new U(e,Yc(t,new U(i,r.children))),slicedSegments:[]}:i.length===0&&Zc(r,i,t)?{segmentGroup:new U(r.segments,Xc(r,i,t,r.children)),slicedSegments:i}:{segmentGroup:new U(r.segments,r.children),slicedSegments:i}}function Xc(r,e,i,t){let n={};for(let s of i)if(pn(r,e,s)&&!t[Pe(s)]){let o=new U([],{});n[Pe(s)]=o}return _(_({},t),n)}function Yc(r,e){let i={};i[T]=e;for(let t of r)if(t.path===""&&Pe(t)!==T){let n=new U([],{});i[Pe(t)]=n}return i}function Qc(r,e,i){return i.some(t=>pn(r,e,t)&&Pe(t)!==T)}function Zc(r,e,i){return i.some(t=>pn(r,e,t))}function pn(r,e,i){return(r.hasChildren()||e.length>0)&&i.pathMatch==="full"?!1:i.path===""}function Jc(r,e,i,t){return Pe(r)!==t&&(t===T||!pn(e,i,r))?!1:gs(e,r,i).matched}function eu(r,e,i){return e.length===0&&!r.children[i]}var ls=class{};function tu(r,e,i,t,n,s,o="emptyOnly"){return new cs(r,e,i,t,n,o,s).recognize()}var iu=31,cs=class{constructor(e,i,t,n,s,o,a){this.injector=e,this.configLoader=i,this.rootComponentType=t,this.config=n,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new os(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=Zo(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(q(i=>{let t=new gi([],Object.freeze({}),Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,{},T,this.rootComponentType,null,{}),n=new ye(t,i),s=new an("",n),o=cc(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,T).pipe(pt(t=>{if(t instanceof cn)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof vi?this.noMatchError(t):t}))}inheritParamsAndData(e,i){let t=e.value,n=ds(t,i,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(s=>this.inheritParamsAndData(s,t))}processSegmentGroup(e,i,t,n){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,i,t):this.processSegment(e,i,t,t.segments,n,!0).pipe(q(s=>s instanceof ye?[s]:[]))}processChildren(e,i,t){let n=[];for(let s of Object.keys(t.children))s==="primary"?n.unshift(s):n.push(s);return fe(n).pipe(ft(s=>{let o=t.children[s],a=Sc(i,s);return this.processSegmentGroup(e,a,o,s)}),Fs((s,o)=>(s.push(...o),s)),nr(null),Bs(),ge(s=>{if(s===null)return Ct(t);let o=Ea(s);return nu(o),A(o)}))}processSegment(e,i,t,n,s,o){return fe(i).pipe(ft(a=>this.processSegmentAgainstRoute(a._injector??e,i,a,t,n,s,o).pipe(pt(l=>{if(l instanceof vi)return A(null);throw l}))),ze(a=>!!a),pt(a=>{if(Ca(a))return eu(t,n,s)?A(new ls):Ct(t);throw a}))}processSegmentAgainstRoute(e,i,t,n,s,o,a){return Jc(t,n,s,o)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,t,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,n,i,t,s,o):Ct(n):Ct(n)}expandSegmentAgainstRouteUsingRedirect(e,i,t,n,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:h}=gs(i,n,s);if(!a)return Ct(i);n.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>iu&&(this.allowRedirects=!1));let C=this.applyRedirects.applyRedirectCommands(l,n.redirectTo,c);return this.applyRedirects.lineralizeSegments(n,C).pipe(ge(M=>this.processSegment(e,t,i,M.concat(h),o,!1)))}matchSegmentAgainstRoute(e,i,t,n,s){let o=Gc(i,t,n,e,this.urlSerializer);return t.path==="**"&&(i.children={}),o.pipe(Re(a=>a.matched?(e=t._injector??e,this.getChildConfig(e,t,n).pipe(Re(({routes:l})=>{let c=t._loadedInjector??e,{consumedSegments:h,remainingSegments:C,parameters:M}=a,L=new gi(h,M,Object.freeze(_({},this.urlTree.queryParams)),this.urlTree.fragment,su(t),Pe(t),t.component??t._loadedComponent??null,t,ou(t)),{segmentGroup:it,slicedSegments:je}=Zo(i,h,C,l);if(je.length===0&&it.hasChildren())return this.processChildren(c,l,it).pipe(q(Ie=>Ie===null?null:new ye(L,Ie)));if(l.length===0&&je.length===0)return A(new ye(L,[]));let jt=Pe(t)===s;return this.processSegment(c,l,it,je,jt?T:s,!0).pipe(q(Ie=>new ye(L,Ie instanceof ye?[Ie]:[])))}))):Ct(i)))}getChildConfig(e,i,t){return i.children?A({routes:i.children,injector:e}):i.loadChildren?i._loadedRoutes!==void 0?A({routes:i._loadedRoutes,injector:i._loadedInjector}):Fc(e,i,t,this.urlSerializer).pipe(ge(n=>n?this.configLoader.loadChildren(e,i).pipe(ee(s=>{i._loadedRoutes=s.routes,i._loadedInjector=s.injector})):Wc(i))):A({routes:[],injector:e})}};function nu(r){r.sort((e,i)=>e.value.outlet===T?-1:i.value.outlet===T?1:e.value.outlet.localeCompare(i.value.outlet))}function ru(r){let e=r.value.routeConfig;return e&&e.path===""}function Ea(r){let e=[],i=new Set;for(let t of r){if(!ru(t)){e.push(t);continue}let n=e.find(s=>t.value.routeConfig===s.value.routeConfig);n!==void 0?(n.children.push(...t.children),i.add(n)):e.push(t)}for(let t of i){let n=Ea(t.children);e.push(new ye(t.value,n))}return e.filter(t=>!i.has(t))}function su(r){return r.data||{}}function ou(r){return r.resolve||{}}function au(r,e,i,t,n,s){return ge(o=>tu(r,e,i,t,o.extractedUrl,n,s).pipe(q(({state:a,tree:l})=>F(_({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function lu(r,e){return ge(i=>{let{targetSnapshot:t,guards:{canActivateChecks:n}}=i;if(!n.length)return A(i);let s=new Set(n.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of xa(l))o.add(c);let a=0;return fe(o).pipe(ft(l=>s.has(l)?cu(l,t,r,e):(l.data=ds(l,l.parent,r).resolve,A(void 0))),ee(()=>a++),sr(1),ge(l=>a===o.size?A(i):qe))})}function xa(r){let e=r.children.map(i=>xa(i)).flat();return[r,...e]}function cu(r,e,i,t){let n=r.routeConfig,s=r._resolve;return n?.title!==void 0&&!va(n)&&(s[yi]=n.title),uu(s,r,e,t).pipe(q(o=>(r._resolvedData=o,r.data=ds(r,r.parent,i).resolve,null)))}function uu(r,e,i,t){let n=jr(r);if(n.length===0)return A({});let s={};return fe(n).pipe(ge(o=>du(r[o],e,i,t).pipe(ze(),ee(a=>{s[o]=a}))),sr(1),$s(s),pt(o=>Ca(o)?qe:zt(o)))}function du(r,e,i,t){let n=_i(e)??t,s=At(r,n),o=s.resolve?s.resolve(e,i):Ge(n,()=>s(e,i));return Ze(o)}function Ur(r){return Re(e=>{let i=r(e);return i?fe(i).pipe(q(()=>e)):A(e)})}var Ma=(()=>{let e=class e{buildTitle(t){let n,s=t.root;for(;s!==void 0;)n=this.getResolvedTitleForRoute(s)??n,s=s.children.find(o=>o.outlet===T);return n}getResolvedTitleForRoute(t){return t.data[yi]}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>R(hu),providedIn:"root"});let r=e;return r})(),hu=(()=>{let e=class e extends Ma{constructor(t){super(),this.title=t}updateTitle(t){let n=this.buildTitle(t);n!==void 0&&this.title.setTitle(n)}};e.\u0275fac=function(n){return new(n||e)($(zo))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Si=new Y("",{providedIn:"root",factory:()=>({})}),un=new Y(""),ms=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=R(Bi)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return A(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let n=Ze(t.loadComponent()).pipe(q(Oa),ee(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Ti(()=>{this.componentLoaders.delete(t)})),s=new er(n,()=>new Ee).pipe(Jn());return this.componentLoaders.set(t,s),s}loadChildren(t,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return A({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=pu(n,this.compiler,t,this.onLoadEndListener).pipe(Ti(()=>{this.childrenLoaders.delete(n)})),a=new er(o,()=>new Ee).pipe(Jn());return this.childrenLoaders.set(n,a),a}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function pu(r,e,i,t){return Ze(r.loadChildren()).pipe(q(Oa),ge(n=>n instanceof ro||Array.isArray(n)?A(n):fe(e.compileModuleAsync(n))),q(n=>{t&&t(r);let s,o,a=!1;return Array.isArray(n)?(o=n,a=!0):(s=n.create(i).injector,o=s.get(un,[],{optional:!0,self:!0}).flat()),{routes:o.map(fs),injector:s}}))}function fu(r){return r&&typeof r=="object"&&"default"in r}function Oa(r){return fu(r)?r.default:r}var vs=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>R(gu),providedIn:"root"});let r=e;return r})(),gu=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,n){return t}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Ia=new Y(""),Ra=new Y("");function mu(r,e,i){let t=r.get(Ra),n=r.get(ve);return r.get(le).runOutsideAngular(()=>{if(!n.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=n.startViewTransition(()=>(s(),vu(r))),{onViewTransitionCreated:l}=t;return l&&Ge(r,()=>l({transition:a,from:e,to:i})),o})}function vu(r){return new Promise(e=>{fr(e,{injector:r})})}var ys=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ee,this.transitionAbortSubject=new Ee,this.configLoader=R(ms),this.environmentInjector=R(vt),this.urlSerializer=R(wi),this.rootContexts=R(bi),this.location=R(Jt),this.inputBindingEnabled=R(hn,{optional:!0})!==null,this.titleStrategy=R(Ma),this.options=R(Si,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=R(vs),this.createViewTransition=R(Ia,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>A(void 0),this.rootComponentType=null;let t=s=>this.events.next(new Kr(s)),n=s=>this.events.next(new Xr(s));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let n=++this.navigationId;this.transitions?.next(F(_(_({},this.transitions.value),t),{id:n}))}setupNavigations(t,n,s){return this.transitions=new xe({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:li,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe($e(o=>o.id!==0),q(o=>F(_({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Re(o=>{let a=!1,l=!1;return A(o).pipe(Re(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",we.SupersededByNewNavigation),qe;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?F(_({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),C=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&C!=="reload"){let M="";return this.events.next(new Qe(c.id,this.urlSerializer.serialize(c.rawUrl),M,tn.IgnoredSameUrlNavigation)),c.resolve(null),qe}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return A(c).pipe(Re(M=>{let L=this.transitions?.getValue();return this.events.next(new It(M.id,this.urlSerializer.serialize(M.extractedUrl),M.source,M.restoredState)),L!==this.transitions?.getValue()?qe:Promise.resolve(M)}),au(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),ee(M=>{o.targetSnapshot=M.targetSnapshot,o.urlAfterRedirects=M.urlAfterRedirects,this.currentNavigation=F(_({},this.currentNavigation),{finalUrl:M.urlAfterRedirects});let L=new nn(M.id,this.urlSerializer.serialize(M.extractedUrl),this.urlSerializer.serialize(M.urlAfterRedirects),M.targetSnapshot);this.events.next(L)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:M,extractedUrl:L,source:it,restoredState:je,extras:jt}=c,Ie=new It(M,this.urlSerializer.serialize(L),it,je);this.events.next(Ie);let Bn=ga(this.rootComponentType).snapshot;return this.currentTransition=o=F(_({},c),{targetSnapshot:Bn,urlAfterRedirects:L,extras:F(_({},jt),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=L,A(o)}else{let M="";return this.events.next(new Qe(c.id,this.urlSerializer.serialize(c.extractedUrl),M,tn.IgnoredByUrlHandlingStrategy)),c.resolve(null),qe}}),ee(c=>{let h=new qr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),q(c=>(this.currentTransition=o=F(_({},c),{guards:xc(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),Lc(this.environmentInjector,c=>this.events.next(c)),ee(c=>{if(o.guardsResult=c.guardsResult,Ot(c.guardsResult))throw wa(this.urlSerializer,c.guardsResult);let h=new zr(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),$e(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",we.GuardRejected),!1)),Ur(c=>{if(c.guards.canActivateChecks.length)return A(c).pipe(ee(h=>{let C=new Wr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(C)}),Re(h=>{let C=!1;return A(h).pipe(lu(this.paramsInheritanceStrategy,this.environmentInjector),ee({next:()=>C=!0,complete:()=>{C||this.cancelNavigationTransition(h,"",we.NoDataFromResolver)}}))}),ee(h=>{let C=new Gr(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(C)}))}),Ur(c=>{let h=C=>{let M=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&M.push(this.configLoader.loadComponent(C.routeConfig).pipe(ee(L=>{C.component=L}),q(()=>{})));for(let L of C.children)M.push(...h(L));return M};return ki(h(c.targetSnapshot.root)).pipe(nr(null),gt(1))}),Ur(()=>this.afterPreactivation()),Re(()=>{let{currentSnapshot:c,targetSnapshot:h}=o,C=this.createViewTransition?.(this.environmentInjector,c.root,h.root);return C?fe(C).pipe(q(()=>o)):A(o)}),q(c=>{let h=vc(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=F(_({},c),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),ee(()=>{this.events.next(new pi)}),Ec(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),gt(1),ee({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fe(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),zs(this.transitionAbortSubject.pipe(ee(c=>{throw c}))),Ti(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",we.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pt(c=>{if(l=!0,_a(c))this.events.next(new Ye(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),bc(c)?this.events.next(new fi(c.url)):o.resolve(!1);else{this.events.next(new hi(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(t.errorHandler(c))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return qe}))}))}cancelNavigationTransition(t,n,s){let o=new Ye(t.id,this.urlSerializer.serialize(t.extractedUrl),n,s);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function yu(r){return r!==li}var wu=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>R(bu),providedIn:"root"});let r=e;return r})(),us=class{shouldDetach(e){return!1}store(e,i){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,i){return e.routeConfig===i.routeConfig}},bu=(()=>{let e=class e extends us{};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=ur(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),Da=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:()=>R(_u),providedIn:"root"});let r=e;return r})(),_u=(()=>{let e=class e extends Da{constructor(){super(...arguments),this.location=R(Jt),this.urlSerializer=R(wi),this.options=R(Si,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=R(vs),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Xe,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=ga(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(n=>{n.type==="popstate"&&t(n.url,n.state)})}handleRouterEvent(t,n){if(t instanceof It)this.stateMemento=this.createStateMemento();else if(t instanceof Qe)this.rawUrlTree=n.initialUrl;else if(t instanceof nn){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(s,n)}}else t instanceof pi?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):t instanceof Ye&&(t.code===we.GuardRejected||t.code===we.NoDataFromResolver)?this.restoreHistory(n):t instanceof hi?this.restoreHistory(n,!0):t instanceof Fe&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,n){let s=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(s)||n.extras.replaceUrl){let o=this.browserPageId,a=_(_({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(s,"",a)}else{let o=_(_({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(t,n=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,n){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:n}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(s){return(t||(t=ur(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),oi=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(oi||{});function Aa(r,e){r.events.pipe($e(i=>i instanceof Fe||i instanceof Ye||i instanceof hi||i instanceof Qe),q(i=>i instanceof Fe||i instanceof Qe?oi.COMPLETE:(i instanceof Ye?i.code===we.Redirect||i.code===we.SupersededByNewNavigation:!1)?oi.REDIRECTING:oi.FAILED),$e(i=>i!==oi.REDIRECTING),gt(1)).subscribe(()=>{e()})}function Cu(r){throw r}var Su={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Eu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},at=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=R(Hi),this.stateManager=R(Da),this.options=R(Si,{optional:!0})||{},this.pendingTasks=R(so),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=R(ys),this.urlSerializer=R(wi),this.location=R(Jt),this.urlHandlingStrategy=R(vs),this._events=new Ee,this.errorHandler=this.options.errorHandler||Cu,this.navigated=!1,this.routeReuseStrategy=R(wu),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=R(un,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!R(hn,{optional:!0}),this.eventsSubscription=new Vs,this.isNgZoneEnabled=R(le)instanceof le&&le.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(n=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof Ye&&n.code!==we.Redirect&&n.code!==we.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof Fe)this.navigated=!0;else if(n instanceof fi){let a=this.urlHandlingStrategy.merge(n.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||yu(s.source)};this.scheduleNavigation(a,li,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}Mu(n)&&this._events.next(n)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),li,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",n)},0)})}navigateToSyncWithBrowser(t,n,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let c=_({},s);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,n,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(fs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,n={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:c}=n,h=c?this.currentUrlTree.fragment:a,C=null;switch(l){case"merge":C=_(_({},this.currentUrlTree.queryParams),o);break;case"preserve":C=this.currentUrlTree.queryParams;break;default:C=o||null}C!==null&&(C=this.removeEmptyProps(C));let M;try{let L=s?s.snapshot:this.routerState.snapshot.root;M=da(L)}catch{(typeof t[0]!="string"||!t[0].startsWith("/"))&&(t=[]),M=this.currentUrlTree.root}return ha(M,t,C,h??null)}navigateByUrl(t,n={skipLocationChange:!1}){let s=Ot(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,li,null,n)}navigate(t,n={skipLocationChange:!1}){return xu(t),this.navigateByUrl(this.createUrlTree(t,n),n)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,n){let s;if(n===!0?s=_({},Su):n===!1?s=_({},Eu):s=n,Ot(t))return Go(this.currentUrlTree,t,s);let o=this.parseUrl(t);return Go(this.currentUrlTree,o,s)}removeEmptyProps(t){return Object.entries(t).reduce((n,[s,o])=>(o!=null&&(n[s]=o),n),{})}scheduleNavigation(t,n,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((M,L)=>{l=M,c=L});let C=this.pendingTasks.add();return Aa(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(C))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(M=>Promise.reject(M))}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();function xu(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new G(4008,!1)}function Mu(r){return!(r instanceof pi)&&!(r instanceof fi)}var dn=class{};var Ou=(()=>{let e=class e{constructor(t,n,s,o,a){this.router=t,this.injector=s,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe($e(t=>t instanceof Fe),ft(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,n){let s=[];for(let o of n){o.providers&&!o._injector&&(o._injector=mr(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,l=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&s.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&s.push(this.processRoutes(l,o.children??o._loadedRoutes))}return fe(s).pipe(tr())}preloadConfig(t,n){return this.preloadingStrategy.preload(n,()=>{let s;n.loadChildren&&n.canLoad===void 0?s=this.loader.loadChildren(t,n):s=A(null);let o=s.pipe(ge(a=>a===null?A(void 0):(n._loadedRoutes=a.routes,n._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(n.loadComponent&&!n._loadedComponent){let a=this.loader.loadComponent(n);return fe([o,a]).pipe(tr())}else return o})}};e.\u0275fac=function(n){return new(n||e)($(at),$(Bi),$(vt),$(dn),$(ms))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})(),ka=new Y(""),Iu=(()=>{let e=class e{constructor(t,n,s,o,a={}){this.urlSerializer=t,this.transitions=n,this.viewportScroller=s,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=R(vt),a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof It?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Fe?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof Qe&&t.code===tn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof rn&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,n){this.zone.runOutsideAngular(()=>D(this,null,function*(){yield new Promise(s=>{setTimeout(()=>{s()}),fr(()=>{s()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new rn(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(n){Ni()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})();function Ru(r){return r.routerState.root}function Ei(r,e){return{\u0275kind:r,\u0275providers:e}}function Du(){let r=R(dr);return e=>{let i=r.get(Er);if(e!==i.components[0])return;let t=r.get(at),n=r.get(Ta);r.get(ws)===1&&t.initialNavigation(),r.get(Pa,null,lr.Optional)?.setUpPreloading(),r.get(ka,null,lr.Optional)?.init(),t.resetRootComponentType(i.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var Ta=new Y("",{factory:()=>new Ee}),ws=new Y("",{providedIn:"root",factory:()=>1});function Au(){return Ei(2,[{provide:ws,useValue:0},{provide:Sr,multi:!0,deps:[dr],useFactory:e=>{let i=e.get(xo,Promise.resolve());return()=>i.then(()=>new Promise(t=>{let n=e.get(at),s=e.get(Ta);Aa(n,()=>{t(!0)}),e.get(ys).afterPreactivation=()=>(t(!0),s.closed?A(void 0):s),n.initialNavigation()}))}}])}function ku(){return Ei(3,[{provide:Sr,multi:!0,useFactory:()=>{let e=R(at);return()=>{e.setUpLocationChangeListener()}}},{provide:ws,useValue:2}])}var Pa=new Y("");function Tu(r){return Ei(0,[{provide:Pa,useExisting:Ou},{provide:dn,useExisting:r}])}function Pu(){return Ei(8,[Qo,{provide:hn,useExisting:Qo}])}function Lu(r){let e=[{provide:Ia,useValue:mu},{provide:Ra,useValue:_({skipNextTransition:!!r?.skipInitialTransition},r)}];return Ei(9,e)}var Jo=new Y("ROUTER_FORROOT_GUARD"),Vu=[Jt,{provide:wi,useClass:ui},at,bi,{provide:Rt,useFactory:Ru,deps:[at]},ms,[]],bs=(()=>{let e=class e{constructor(t){}static forRoot(t,n){return{ngModule:e,providers:[Vu,[],{provide:un,multi:!0,useValue:t},{provide:Jo,useFactory:ju,deps:[[at,new cr,new Gs]]},{provide:Si,useValue:n||{}},n?.useHash?Uu():Hu(),Nu(),n?.preloadingStrategy?Tu(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?$u(n):[],n?.bindToComponentInputs?Pu().\u0275providers:[],n?.enableViewTransitions?Lu().\u0275providers:[],Bu()]}}static forChild(t){return{ngModule:e,providers:[{provide:un,multi:!0,useValue:t}]}}};e.\u0275fac=function(n){return new(n||e)($(Jo,8))},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({});let r=e;return r})();function Nu(){return{provide:ka,useFactory:()=>{let r=R(Po),e=R(le),i=R(Si),t=R(ys),n=R(wi);return i.scrollOffset&&r.setOffset(i.scrollOffset),new Iu(n,t,r,e,i)}}}function Uu(){return{provide:xr,useClass:Oo}}function Hu(){return{provide:xr,useClass:Mo}}function ju(r){return"guarded"}function $u(r){return[r.initialNavigation==="disabled"?ku().\u0275providers:[],r.initialNavigation==="enabledBlocking"?Au().\u0275providers:[]]}var ea=new Y("");function Bu(){return[{provide:ea,useFactory:Du},{provide:yo,multi:!0,useExisting:ea}]}var qu=[],La=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ke({type:e}),e.\u0275inj=Ae({imports:[bs.forRoot(qu),bs]});let r=e;return r})();function kt(r,e,i,t){function n(s){return s instanceof i?s:new i(function(o){o(s)})}return new(i||(i=Promise))(function(s,o){function a(h){try{c(t.next(h))}catch(C){o(C)}}function l(h){try{c(t.throw(h))}catch(C){o(C)}}function c(h){h.done?s(h.value):n(h.value).then(a,l)}c((t=t.apply(r,e||[])).next())})}function zu(r,e,i,t){if(i==="a"&&!t)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!t:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?t:i==="a"?t.call(r):t?t.value:e.get(r)}var Va=(()=>{class r{constructor(i){this.client=i}static flatten(i,t=""){let n={};for(let[s,o]of Object.entries(i)){let a=t?t+"["+s+"]":s;Array.isArray(o)?n=Object.assign(Object.assign({},n),r.flatten(o,a)):n[a]=o}return n}}return r.CHUNK_SIZE=5*1024*1024,r})();var J=class extends Error{constructor(e,i=0,t="",n=""){super(e),this.name="AppwriteException",this.message=e,this.code=i,this.type=t,this.response=n}},fn=class{constructor(){this.config={endpoint:"https://cloud.appwrite.io/v1",endpointRealtime:"",project:"",jwt:"",locale:"",session:""},this.headers={"x-sdk-name":"Web","x-sdk-platform":"client","x-sdk-language":"web","x-sdk-version":"15.0.0","X-Appwrite-Response-Format":"1.5.0"},this.realtime={socket:void 0,timeout:void 0,url:"",channels:new Set,subscriptions:new Map,subscriptionsCounter:0,reconnect:!0,reconnectAttempts:0,lastMessage:void 0,connect:()=>{clearTimeout(this.realtime.timeout),this.realtime.timeout=window?.setTimeout(()=>{this.realtime.createSocket()},50)},getTimeout:()=>{switch(!0){case this.realtime.reconnectAttempts<5:return 1e3;case this.realtime.reconnectAttempts<15:return 5e3;case this.realtime.reconnectAttempts<100:return 1e4;default:return 6e4}},createSocket:()=>{var e,i,t;if(this.realtime.channels.size<1){this.realtime.reconnect=!1,(e=this.realtime.socket)===null||e===void 0||e.close();return}let n=new URLSearchParams;n.set("project",this.config.project),this.realtime.channels.forEach(o=>{n.append("channels[]",o)});let s=this.config.endpointRealtime+"/realtime?"+n.toString();(s!==this.realtime.url||!this.realtime.socket||((i=this.realtime.socket)===null||i===void 0?void 0:i.readyState)>WebSocket.OPEN)&&(this.realtime.socket&&((t=this.realtime.socket)===null||t===void 0?void 0:t.readyState)<WebSocket.CLOSING&&(this.realtime.reconnect=!1,this.realtime.socket.close()),this.realtime.url=s,this.realtime.socket=new WebSocket(s),this.realtime.socket.addEventListener("message",this.realtime.onMessage),this.realtime.socket.addEventListener("open",o=>{this.realtime.reconnectAttempts=0}),this.realtime.socket.addEventListener("close",o=>{var a,l,c;if(!this.realtime.reconnect||((l=(a=this.realtime)===null||a===void 0?void 0:a.lastMessage)===null||l===void 0?void 0:l.type)==="error"&&((c=this.realtime)===null||c===void 0?void 0:c.lastMessage.data).code===1008){this.realtime.reconnect=!0;return}let h=this.realtime.getTimeout();console.error(`Realtime got disconnected. Reconnect will be attempted in ${h/1e3} seconds.`,o.reason),setTimeout(()=>{this.realtime.reconnectAttempts++,this.realtime.createSocket()},h)}))},onMessage:e=>{var i,t;try{let n=JSON.parse(e.data);switch(this.realtime.lastMessage=n,n.type){case"connected":let s=JSON.parse((i=window.localStorage.getItem("cookieFallback"))!==null&&i!==void 0?i:"{}"),o=s?.[`a_session_${this.config.project}`],a=n.data;o&&!a.user&&((t=this.realtime.socket)===null||t===void 0||t.send(JSON.stringify({type:"authentication",data:{session:o}})));break;case"event":let l=n.data;if(l?.channels){if(!l.channels.some(h=>this.realtime.channels.has(h)))return;this.realtime.subscriptions.forEach(h=>{l.channels.some(C=>h.channels.includes(C))&&setTimeout(()=>h.callback(l))})}break;case"error":throw n.data;default:break}}catch(n){console.error(n)}},cleanUp:e=>{this.realtime.channels.forEach(i=>{e.includes(i)&&(Array.from(this.realtime.subscriptions).some(([n,s])=>s.channels.includes(i))||this.realtime.channels.delete(i))})}}}setEndpoint(e){return this.config.endpoint=e,this.config.endpointRealtime=this.config.endpointRealtime||this.config.endpoint.replace("https://","wss://").replace("http://","ws://"),this}setEndpointRealtime(e){return this.config.endpointRealtime=e,this}setProject(e){return this.headers["X-Appwrite-Project"]=e,this.config.project=e,this}setJWT(e){return this.headers["X-Appwrite-JWT"]=e,this.config.jwt=e,this}setLocale(e){return this.headers["X-Appwrite-Locale"]=e,this.config.locale=e,this}setSession(e){return this.headers["X-Appwrite-Session"]=e,this.config.session=e,this}subscribe(e,i){let t=typeof e=="string"?[e]:e;t.forEach(s=>this.realtime.channels.add(s));let n=this.realtime.subscriptionsCounter++;return this.realtime.subscriptions.set(n,{channels:t,callback:i}),this.realtime.connect(),()=>{this.realtime.subscriptions.delete(n),this.realtime.cleanUp(t),this.realtime.connect()}}call(e,i,t={},n={}){var s;return kt(this,void 0,void 0,function*(){e=e.toUpperCase(),t=Object.assign({},this.headers,t);let o={method:e,headers:t,credentials:"include"};if(typeof window<"u"&&window.localStorage){let a=window.localStorage.getItem("cookieFallback");a&&(t["X-Fallback-Cookies"]=a)}if(e==="GET")for(let[a,l]of Object.entries(Va.flatten(n)))i.searchParams.append(a,l);else switch(t["content-type"]){case"application/json":o.body=JSON.stringify(n);break;case"multipart/form-data":let a=new FormData;for(let l in n)Array.isArray(n[l])?n[l].forEach(c=>{a.append(l+"[]",c)}):a.append(l,n[l]);o.body=a,delete t["content-type"];break}try{let a=null,l=yield fetch(i.toString(),o);if(!((s=l.headers.get("content-type"))===null||s===void 0)&&s.includes("application/json")?a=yield l.json():a={message:yield l.text()},400<=l.status)throw new J(a?.message,l.status,a?.type,a);let c=l.headers.get("X-Fallback-Cookies");return typeof window<"u"&&window.localStorage&&c&&(window.console.warn("Appwrite is using localStorage for session management. Increase your security by adding a custom domain as your API endpoint."),window.localStorage.setItem("cookieFallback",c)),a}catch(a){throw a instanceof J?a:new J(a.message)}})}};var gn=class extends Va{constructor(e){super(e)}listDocuments(e,i,t){return kt(this,void 0,void 0,function*(){if(typeof e>"u")throw new J('Missing required parameter: "databaseId"');if(typeof i>"u")throw new J('Missing required parameter: "collectionId"');let n="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",i),s={};typeof t<"u"&&(s.queries=t);let o=new URL(this.client.config.endpoint+n);return yield this.client.call("get",o,{"content-type":"application/json"},s)})}createDocument(e,i,t,n,s){return kt(this,void 0,void 0,function*(){if(typeof e>"u")throw new J('Missing required parameter: "databaseId"');if(typeof i>"u")throw new J('Missing required parameter: "collectionId"');if(typeof t>"u")throw new J('Missing required parameter: "documentId"');if(typeof n>"u")throw new J('Missing required parameter: "data"');let o="/databases/{databaseId}/collections/{collectionId}/documents".replace("{databaseId}",e).replace("{collectionId}",i),a={};typeof t<"u"&&(a.documentId=t),typeof n<"u"&&(a.data=n),typeof s<"u"&&(a.permissions=s);let l=new URL(this.client.config.endpoint+o);return yield this.client.call("post",l,{"content-type":"application/json"},a)})}getDocument(e,i,t,n){return kt(this,void 0,void 0,function*(){if(typeof e>"u")throw new J('Missing required parameter: "databaseId"');if(typeof i>"u")throw new J('Missing required parameter: "collectionId"');if(typeof t>"u")throw new J('Missing required parameter: "documentId"');let s="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",i).replace("{documentId}",t),o={};typeof n<"u"&&(o.queries=n);let a=new URL(this.client.config.endpoint+s);return yield this.client.call("get",a,{"content-type":"application/json"},o)})}updateDocument(e,i,t,n,s){return kt(this,void 0,void 0,function*(){if(typeof e>"u")throw new J('Missing required parameter: "databaseId"');if(typeof i>"u")throw new J('Missing required parameter: "collectionId"');if(typeof t>"u")throw new J('Missing required parameter: "documentId"');let o="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",i).replace("{documentId}",t),a={};typeof n<"u"&&(a.data=n),typeof s<"u"&&(a.permissions=s);let l=new URL(this.client.config.endpoint+o);return yield this.client.call("patch",l,{"content-type":"application/json"},a)})}deleteDocument(e,i,t){return kt(this,void 0,void 0,function*(){if(typeof e>"u")throw new J('Missing required parameter: "databaseId"');if(typeof i>"u")throw new J('Missing required parameter: "collectionId"');if(typeof t>"u")throw new J('Missing required parameter: "documentId"');let n="/databases/{databaseId}/collections/{collectionId}/documents/{documentId}".replace("{databaseId}",e).replace("{collectionId}",i).replace("{documentId}",t),s={},o=new URL(this.client.config.endpoint+n);return yield this.client.call("delete",o,{"content-type":"application/json"},s)})}};var Na,Ua,_s=class r{static custom(e){return e}static unique(e=7){let i=zu(r,Na,"m",Ua).call(r),t="";for(let n=0;n<e;n++){let s=Math.floor(Math.random()*16).toString(16);t+=s}return i+t}};Na=_s,Ua=function(){let e=new Date,i=Math.floor(e.getTime()/1e3),t=e.getMilliseconds();return i.toString(16)+t.toString(16).padStart(5,"0")};var Tt=class{constructor(e,i,t,n,s){this.x=e,this.y=i,this.color=t,this.placedBy=n,this.timestamp=s}};var lt=class{constructor(e,i,t){this.x=e,this.y=i,this.color=t}};var Qa=_l(Ha());var xi={production:!0,endpointUrl:"https://openplace.azurewebsites.net/api"};var be=class extends Error{constructor(e,i){let t=new.target.prototype;super(`${e}: Status code '${i}'`),this.statusCode=i,this.__proto__=t}},Je=class extends Error{constructor(e="A timeout occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},oe=class extends Error{constructor(e="An abort occurred."){let i=new.target.prototype;super(e),this.__proto__=i}},vn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="UnsupportedTransportError",this.__proto__=t}},yn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="DisabledTransportError",this.__proto__=t}},wn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.transport=i,this.errorType="FailedToStartTransportError",this.__proto__=t}},Mi=class extends Error{constructor(e){let i=new.target.prototype;super(e),this.errorType="FailedToNegotiateWithServerError",this.__proto__=i}},bn=class extends Error{constructor(e,i){let t=new.target.prototype;super(e),this.innerErrors=i,this.__proto__=t}};var Pt=class{constructor(e,i,t){this.statusCode=e,this.statusText=i,this.content=t}},Le=class{get(e,i){return this.send(F(_({},i),{method:"GET",url:e}))}post(e,i){return this.send(F(_({},i),{method:"POST",url:e}))}delete(e,i){return this.send(F(_({},i),{method:"DELETE",url:e}))}getCookieString(e){return""}};var f=function(r){return r[r.Trace=0]="Trace",r[r.Debug=1]="Debug",r[r.Information=2]="Information",r[r.Warning=3]="Warning",r[r.Error=4]="Error",r[r.Critical=5]="Critical",r[r.None=6]="None",r}(f||{});var Ve=class{constructor(){}log(e,i){}};Ve.instance=new Ve;var Wu="8.0.7",j=class{static isRequired(e,i){if(e==null)throw new Error(`The '${i}' argument is required.`)}static isNotEmpty(e,i){if(!e||e.match(/^\s*$/))throw new Error(`The '${i}' argument should not be empty.`)}static isIn(e,i,t){if(!(e in i))throw new Error(`Unknown ${t} value: ${e}.`)}},B=class r{static get isBrowser(){return!r.isNode&&typeof window=="object"&&typeof window.document=="object"}static get isWebWorker(){return!r.isNode&&typeof self=="object"&&"importScripts"in self}static get isReactNative(){return!r.isNode&&typeof window=="object"&&typeof window.document>"u"}static get isNode(){return typeof process<"u"&&process.release&&process.release.name==="node"}};function et(r,e){let i="";return De(r)?(i=`Binary data of length ${r.byteLength}`,e&&(i+=`. Content: '${Gu(r)}'`)):typeof r=="string"&&(i=`String data of length ${r.length}`,e&&(i+=`. Content: '${r}'`)),i}function Gu(r){let e=new Uint8Array(r),i="";return e.forEach(t=>{let n=t<16?"0":"";i+=`0x${n}${t.toString(16)} `}),i.substr(0,i.length-1)}function De(r){return r&&typeof ArrayBuffer<"u"&&(r instanceof ArrayBuffer||r.constructor&&r.constructor.name==="ArrayBuffer")}function Cn(r,e,i,t,n,s){return D(this,null,function*(){let o={},[a,l]=Ne();o[a]=l,r.log(f.Trace,`(${e} transport) sending data. ${et(n,s.logMessageContent)}.`);let c=De(n)?"arraybuffer":"text",h=yield i.post(t,{content:n,headers:_(_({},o),s.headers),responseType:c,timeout:s.timeout,withCredentials:s.withCredentials});r.log(f.Trace,`(${e} transport) request complete. Response status: ${h.statusCode}.`)})}function ja(r){return r===void 0?new ct(f.Information):r===null?Ve.instance:r.log!==void 0?r:new ct(r)}var _n=class{constructor(e,i){this._subject=e,this._observer=i}dispose(){let e=this._subject.observers.indexOf(this._observer);e>-1&&this._subject.observers.splice(e,1),this._subject.observers.length===0&&this._subject.cancelCallback&&this._subject.cancelCallback().catch(i=>{})}},ct=class{constructor(e){this._minLevel=e,this.out=console}log(e,i){if(e>=this._minLevel){let t=`[${new Date().toISOString()}] ${f[e]}: ${i}`;switch(e){case f.Critical:case f.Error:this.out.error(t);break;case f.Warning:this.out.warn(t);break;case f.Information:this.out.info(t);break;default:this.out.log(t);break}}}};function Ne(){let r="X-SignalR-User-Agent";return B.isNode&&(r="User-Agent"),[r,Ku(Wu,Xu(),Qu(),Yu())]}function Ku(r,e,i,t){let n="Microsoft SignalR/",s=r.split(".");return n+=`${s[0]}.${s[1]}`,n+=` (${r}; `,e&&e!==""?n+=`${e}; `:n+="Unknown OS; ",n+=`${i}`,t?n+=`; ${t}`:n+="; Unknown Runtime Version",n+=")",n}function Xu(){if(B.isNode)switch(process.platform){case"win32":return"Windows NT";case"darwin":return"macOS";case"linux":return"Linux";default:return process.platform}else return""}function Yu(){if(B.isNode)return process.versions.node}function Qu(){return B.isNode?"NodeJS":"Browser"}function Sn(r){return r.stack?r.stack:r.message?r.message:`${r}`}function $a(){if(typeof globalThis<"u")return globalThis;if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("could not find global")}var En=class extends Le{constructor(e){if(super(),this._logger=e,typeof fetch>"u"||B.isNode){let i=typeof __webpack_require__=="function"?__non_webpack_require__:ht;this._jar=new(i("tough-cookie")).CookieJar,typeof fetch>"u"?this._fetchType=i("node-fetch"):this._fetchType=fetch,this._fetchType=i("fetch-cookie")(this._fetchType,this._jar)}else this._fetchType=fetch.bind($a());if(typeof AbortController>"u"){let i=typeof __webpack_require__=="function"?__non_webpack_require__:ht;this._abortControllerType=i("abort-controller")}else this._abortControllerType=AbortController}send(e){return D(this,null,function*(){if(e.abortSignal&&e.abortSignal.aborted)throw new oe;if(!e.method)throw new Error("No method defined.");if(!e.url)throw new Error("No url defined.");let i=new this._abortControllerType,t;e.abortSignal&&(e.abortSignal.onabort=()=>{i.abort(),t=new oe});let n=null;if(e.timeout){let l=e.timeout;n=setTimeout(()=>{i.abort(),this._logger.log(f.Warning,"Timeout from HTTP request."),t=new Je},l)}e.content===""&&(e.content=void 0),e.content&&(e.headers=e.headers||{},De(e.content)?e.headers["Content-Type"]="application/octet-stream":e.headers["Content-Type"]="text/plain;charset=UTF-8");let s;try{s=yield this._fetchType(e.url,{body:e.content,cache:"no-cache",credentials:e.withCredentials===!0?"include":"same-origin",headers:_({"X-Requested-With":"XMLHttpRequest"},e.headers),method:e.method,mode:"cors",redirect:"follow",signal:i.signal})}catch(l){throw t||(this._logger.log(f.Warning,`Error from HTTP request. ${l}.`),l)}finally{n&&clearTimeout(n),e.abortSignal&&(e.abortSignal.onabort=null)}if(!s.ok){let l=yield Ba(s,"text");throw new be(l||s.statusText,s.status)}let a=yield Ba(s,e.responseType);return new Pt(s.status,s.statusText,a)})}getCookieString(e){let i="";return B.isNode&&this._jar&&this._jar.getCookies(e,(t,n)=>i=n.join("; ")),i}};function Ba(r,e){let i;switch(e){case"arraybuffer":i=r.arrayBuffer();break;case"text":i=r.text();break;case"blob":case"document":case"json":throw new Error(`${e} is not supported.`);default:i=r.text();break}return i}var xn=class extends Le{constructor(e){super(),this._logger=e}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new oe):e.method?e.url?new Promise((i,t)=>{let n=new XMLHttpRequest;n.open(e.method,e.url,!0),n.withCredentials=e.withCredentials===void 0?!0:e.withCredentials,n.setRequestHeader("X-Requested-With","XMLHttpRequest"),e.content===""&&(e.content=void 0),e.content&&(De(e.content)?n.setRequestHeader("Content-Type","application/octet-stream"):n.setRequestHeader("Content-Type","text/plain;charset=UTF-8"));let s=e.headers;s&&Object.keys(s).forEach(o=>{n.setRequestHeader(o,s[o])}),e.responseType&&(n.responseType=e.responseType),e.abortSignal&&(e.abortSignal.onabort=()=>{n.abort(),t(new oe)}),e.timeout&&(n.timeout=e.timeout),n.onload=()=>{e.abortSignal&&(e.abortSignal.onabort=null),n.status>=200&&n.status<300?i(new Pt(n.status,n.statusText,n.response||n.responseText)):t(new be(n.response||n.responseText||n.statusText,n.status))},n.onerror=()=>{this._logger.log(f.Warning,`Error from HTTP request. ${n.status}: ${n.statusText}.`),t(new be(n.statusText,n.status))},n.ontimeout=()=>{this._logger.log(f.Warning,"Timeout from HTTP request."),t(new Je)},n.send(e.content)}):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}};var Mn=class extends Le{constructor(e){if(super(),typeof fetch<"u"||B.isNode)this._httpClient=new En(e);else if(typeof XMLHttpRequest<"u")this._httpClient=new xn(e);else throw new Error("No usable HttpClient found.")}send(e){return e.abortSignal&&e.abortSignal.aborted?Promise.reject(new oe):e.method?e.url?this._httpClient.send(e):Promise.reject(new Error("No url defined.")):Promise.reject(new Error("No method defined."))}getCookieString(e){return this._httpClient.getCookieString(e)}};var _e=class r{static write(e){return`${e}${r.RecordSeparator}`}static parse(e){if(e[e.length-1]!==r.RecordSeparator)throw new Error("Message is incomplete.");let i=e.split(r.RecordSeparator);return i.pop(),i}};_e.RecordSeparatorCode=30;_e.RecordSeparator=String.fromCharCode(_e.RecordSeparatorCode);var On=class{writeHandshakeRequest(e){return _e.write(JSON.stringify(e))}parseHandshakeResponse(e){let i,t;if(De(e)){let a=new Uint8Array(e),l=a.indexOf(_e.RecordSeparatorCode);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=String.fromCharCode.apply(null,Array.prototype.slice.call(a.slice(0,c))),t=a.byteLength>c?a.slice(c).buffer:null}else{let a=e,l=a.indexOf(_e.RecordSeparator);if(l===-1)throw new Error("Message is incomplete.");let c=l+1;i=a.substring(0,c),t=a.length>c?a.substring(c):null}let n=_e.parse(i),s=JSON.parse(n[0]);if(s.type)throw new Error("Expected a handshake response from the server.");return[t,s]}};var k=function(r){return r[r.Invocation=1]="Invocation",r[r.StreamItem=2]="StreamItem",r[r.Completion=3]="Completion",r[r.StreamInvocation=4]="StreamInvocation",r[r.CancelInvocation=5]="CancelInvocation",r[r.Ping=6]="Ping",r[r.Close=7]="Close",r[r.Ack=8]="Ack",r[r.Sequence=9]="Sequence",r}(k||{});var In=class{constructor(){this.observers=[]}next(e){for(let i of this.observers)i.next(e)}error(e){for(let i of this.observers)i.error&&i.error(e)}complete(){for(let e of this.observers)e.complete&&e.complete()}subscribe(e){return this.observers.push(e),new _n(this,e)}};var Rn=class{constructor(e,i,t){this._bufferSize=1e5,this._messages=[],this._totalMessageCount=0,this._waitForSequenceMessage=!1,this._nextReceivingSequenceId=1,this._latestReceivedSequenceId=0,this._bufferedByteCount=0,this._reconnectInProgress=!1,this._protocol=e,this._connection=i,this._bufferSize=t}_send(e){return D(this,null,function*(){let i=this._protocol.writeMessage(e),t=Promise.resolve();if(this._isInvocationMessage(e)){this._totalMessageCount++;let n=()=>{},s=()=>{};De(i)?this._bufferedByteCount+=i.byteLength:this._bufferedByteCount+=i.length,this._bufferedByteCount>=this._bufferSize&&(t=new Promise((o,a)=>{n=o,s=a})),this._messages.push(new Ss(i,this._totalMessageCount,n,s))}try{this._reconnectInProgress||(yield this._connection.send(i))}catch{this._disconnected()}yield t})}_ack(e){let i=-1;for(let t=0;t<this._messages.length;t++){let n=this._messages[t];if(n._id<=e.sequenceId)i=t,De(n._message)?this._bufferedByteCount-=n._message.byteLength:this._bufferedByteCount-=n._message.length,n._resolver();else if(this._bufferedByteCount<this._bufferSize)n._resolver();else break}i!==-1&&(this._messages=this._messages.slice(i+1))}_shouldProcessMessage(e){if(this._waitForSequenceMessage)return e.type!==k.Sequence?!1:(this._waitForSequenceMessage=!1,!0);if(!this._isInvocationMessage(e))return!0;let i=this._nextReceivingSequenceId;return this._nextReceivingSequenceId++,i<=this._latestReceivedSequenceId?(i===this._latestReceivedSequenceId&&this._ackTimer(),!1):(this._latestReceivedSequenceId=i,this._ackTimer(),!0)}_resetSequence(e){if(e.sequenceId>this._nextReceivingSequenceId){this._connection.stop(new Error("Sequence ID greater than amount of messages we've received."));return}this._nextReceivingSequenceId=e.sequenceId}_disconnected(){this._reconnectInProgress=!0,this._waitForSequenceMessage=!0}_resend(){return D(this,null,function*(){let e=this._messages.length!==0?this._messages[0]._id:this._totalMessageCount+1;yield this._connection.send(this._protocol.writeMessage({type:k.Sequence,sequenceId:e}));let i=this._messages;for(let t of i)yield this._connection.send(t._message);this._reconnectInProgress=!1})}_dispose(e){e??(e=new Error("Unable to reconnect to server."));for(let i of this._messages)i._rejector(e)}_isInvocationMessage(e){switch(e.type){case k.Invocation:case k.StreamItem:case k.Completion:case k.StreamInvocation:case k.CancelInvocation:return!0;case k.Close:case k.Sequence:case k.Ping:case k.Ack:return!1}}_ackTimer(){this._ackTimerHandle===void 0&&(this._ackTimerHandle=setTimeout(()=>D(this,null,function*(){try{this._reconnectInProgress||(yield this._connection.send(this._protocol.writeMessage({type:k.Ack,sequenceId:this._latestReceivedSequenceId})))}catch{}clearTimeout(this._ackTimerHandle),this._ackTimerHandle=void 0}),1e3))}},Ss=class{constructor(e,i,t,n){this._message=e,this._id=i,this._resolver=t,this._rejector=n}};var Zu=30*1e3,Ju=15*1e3,ed=1e5,z=function(r){return r.Disconnected="Disconnected",r.Connecting="Connecting",r.Connected="Connected",r.Disconnecting="Disconnecting",r.Reconnecting="Reconnecting",r}(z||{}),Dn=class r{static create(e,i,t,n,s,o,a){return new r(e,i,t,n,s,o,a)}constructor(e,i,t,n,s,o,a){this._nextKeepAlive=0,this._freezeEventListener=()=>{this._logger.log(f.Warning,"The page is being frozen, this will likely lead to the connection being closed and messages being lost. For more information see the docs at https://learn.microsoft.com/aspnet/core/signalr/javascript-client#bsleep")},j.isRequired(e,"connection"),j.isRequired(i,"logger"),j.isRequired(t,"protocol"),this.serverTimeoutInMilliseconds=s??Zu,this.keepAliveIntervalInMilliseconds=o??Ju,this._statefulReconnectBufferSize=a??ed,this._logger=i,this._protocol=t,this.connection=e,this._reconnectPolicy=n,this._handshakeProtocol=new On,this.connection.onreceive=l=>this._processIncomingData(l),this.connection.onclose=l=>this._connectionClosed(l),this._callbacks={},this._methods={},this._closedCallbacks=[],this._reconnectingCallbacks=[],this._reconnectedCallbacks=[],this._invocationId=0,this._receivedHandshakeResponse=!1,this._connectionState=z.Disconnected,this._connectionStarted=!1,this._cachedPingMessage=this._protocol.writeMessage({type:k.Ping})}get state(){return this._connectionState}get connectionId(){return this.connection&&this.connection.connectionId||null}get baseUrl(){return this.connection.baseUrl||""}set baseUrl(e){if(this._connectionState!==z.Disconnected&&this._connectionState!==z.Reconnecting)throw new Error("The HubConnection must be in the Disconnected or Reconnecting state to change the url.");if(!e)throw new Error("The HubConnection url must be a valid url.");this.connection.baseUrl=e}start(){return this._startPromise=this._startWithStateTransitions(),this._startPromise}_startWithStateTransitions(){return D(this,null,function*(){if(this._connectionState!==z.Disconnected)return Promise.reject(new Error("Cannot start a HubConnection that is not in the 'Disconnected' state."));this._connectionState=z.Connecting,this._logger.log(f.Debug,"Starting HubConnection.");try{yield this._startInternal(),B.isBrowser&&window.document.addEventListener("freeze",this._freezeEventListener),this._connectionState=z.Connected,this._connectionStarted=!0,this._logger.log(f.Debug,"HubConnection connected successfully.")}catch(e){return this._connectionState=z.Disconnected,this._logger.log(f.Debug,`HubConnection failed to start successfully because of error '${e}'.`),Promise.reject(e)}})}_startInternal(){return D(this,null,function*(){this._stopDuringStartError=void 0,this._receivedHandshakeResponse=!1;let e=new Promise((i,t)=>{this._handshakeResolver=i,this._handshakeRejecter=t});yield this.connection.start(this._protocol.transferFormat);try{let i=this._protocol.version;this.connection.features.reconnect||(i=1);let t={protocol:this._protocol.name,version:i};if(this._logger.log(f.Debug,"Sending handshake request."),yield this._sendMessage(this._handshakeProtocol.writeHandshakeRequest(t)),this._logger.log(f.Information,`Using HubProtocol '${this._protocol.name}'.`),this._cleanupTimeout(),this._resetTimeoutPeriod(),this._resetKeepAliveInterval(),yield e,this._stopDuringStartError)throw this._stopDuringStartError;(this.connection.features.reconnect||!1)&&(this._messageBuffer=new Rn(this._protocol,this.connection,this._statefulReconnectBufferSize),this.connection.features.disconnected=this._messageBuffer._disconnected.bind(this._messageBuffer),this.connection.features.resend=()=>{if(this._messageBuffer)return this._messageBuffer._resend()}),this.connection.features.inherentKeepAlive||(yield this._sendMessage(this._cachedPingMessage))}catch(i){throw this._logger.log(f.Debug,`Hub handshake failed with error '${i}' during start(). Stopping HubConnection.`),this._cleanupTimeout(),this._cleanupPingTimer(),yield this.connection.stop(i),i}})}stop(){return D(this,null,function*(){let e=this._startPromise;this.connection.features.reconnect=!1,this._stopPromise=this._stopInternal(),yield this._stopPromise;try{yield e}catch{}})}_stopInternal(e){if(this._connectionState===z.Disconnected)return this._logger.log(f.Debug,`Call to HubConnection.stop(${e}) ignored because it is already in the disconnected state.`),Promise.resolve();if(this._connectionState===z.Disconnecting)return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;let i=this._connectionState;return this._connectionState=z.Disconnecting,this._logger.log(f.Debug,"Stopping HubConnection."),this._reconnectDelayHandle?(this._logger.log(f.Debug,"Connection stopped during reconnect delay. Done reconnecting."),clearTimeout(this._reconnectDelayHandle),this._reconnectDelayHandle=void 0,this._completeClose(),Promise.resolve()):(i===z.Connected&&this._sendCloseMessage(),this._cleanupTimeout(),this._cleanupPingTimer(),this._stopDuringStartError=e||new oe("The connection was stopped before the hub handshake could complete."),this.connection.stop(e))}_sendCloseMessage(){return D(this,null,function*(){try{yield this._sendWithProtocol(this._createCloseMessage())}catch{}})}stream(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createStreamInvocation(e,i,n),o,a=new In;return a.cancelCallback=()=>{let l=this._createCancelInvocation(s.invocationId);return delete this._callbacks[s.invocationId],o.then(()=>this._sendWithProtocol(l))},this._callbacks[s.invocationId]=(l,c)=>{if(c){a.error(c);return}else l&&(l.type===k.Completion?l.error?a.error(new Error(l.error)):a.complete():a.next(l.item))},o=this._sendWithProtocol(s).catch(l=>{a.error(l),delete this._callbacks[s.invocationId]}),this._launchStreams(t,o),a}_sendMessage(e){return this._resetKeepAliveInterval(),this.connection.send(e)}_sendWithProtocol(e){return this._messageBuffer?this._messageBuffer._send(e):this._sendMessage(this._protocol.writeMessage(e))}send(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._sendWithProtocol(this._createInvocation(e,i,!0,n));return this._launchStreams(t,s),s}invoke(e,...i){let[t,n]=this._replaceStreamingParams(i),s=this._createInvocation(e,i,!1,n);return new Promise((a,l)=>{this._callbacks[s.invocationId]=(h,C)=>{if(C){l(C);return}else h&&(h.type===k.Completion?h.error?l(new Error(h.error)):a(h.result):l(new Error(`Unexpected message type: ${h.type}`)))};let c=this._sendWithProtocol(s).catch(h=>{l(h),delete this._callbacks[s.invocationId]});this._launchStreams(t,c)})}on(e,i){!e||!i||(e=e.toLowerCase(),this._methods[e]||(this._methods[e]=[]),this._methods[e].indexOf(i)===-1&&this._methods[e].push(i))}off(e,i){if(!e)return;e=e.toLowerCase();let t=this._methods[e];if(t)if(i){let n=t.indexOf(i);n!==-1&&(t.splice(n,1),t.length===0&&delete this._methods[e])}else delete this._methods[e]}onclose(e){e&&this._closedCallbacks.push(e)}onreconnecting(e){e&&this._reconnectingCallbacks.push(e)}onreconnected(e){e&&this._reconnectedCallbacks.push(e)}_processIncomingData(e){if(this._cleanupTimeout(),this._receivedHandshakeResponse||(e=this._processHandshakeResponse(e),this._receivedHandshakeResponse=!0),e){let i=this._protocol.parseMessages(e,this._logger);for(let t of i)if(!(this._messageBuffer&&!this._messageBuffer._shouldProcessMessage(t)))switch(t.type){case k.Invocation:this._invokeClientMethod(t).catch(n=>{this._logger.log(f.Error,`Invoke client method threw error: ${Sn(n)}`)});break;case k.StreamItem:case k.Completion:{let n=this._callbacks[t.invocationId];if(n){t.type===k.Completion&&delete this._callbacks[t.invocationId];try{n(t)}catch(s){this._logger.log(f.Error,`Stream callback threw error: ${Sn(s)}`)}}break}case k.Ping:break;case k.Close:{this._logger.log(f.Information,"Close message received from server.");let n=t.error?new Error("Server returned an error on close: "+t.error):void 0;t.allowReconnect===!0?this.connection.stop(n):this._stopPromise=this._stopInternal(n);break}case k.Ack:this._messageBuffer&&this._messageBuffer._ack(t);break;case k.Sequence:this._messageBuffer&&this._messageBuffer._resetSequence(t);break;default:this._logger.log(f.Warning,`Invalid message type: ${t.type}.`);break}}this._resetTimeoutPeriod()}_processHandshakeResponse(e){let i,t;try{[t,i]=this._handshakeProtocol.parseHandshakeResponse(e)}catch(n){let s="Error parsing handshake response: "+n;this._logger.log(f.Error,s);let o=new Error(s);throw this._handshakeRejecter(o),o}if(i.error){let n="Server returned handshake error: "+i.error;this._logger.log(f.Error,n);let s=new Error(n);throw this._handshakeRejecter(s),s}else this._logger.log(f.Debug,"Server handshake complete.");return this._handshakeResolver(),t}_resetKeepAliveInterval(){this.connection.features.inherentKeepAlive||(this._nextKeepAlive=new Date().getTime()+this.keepAliveIntervalInMilliseconds,this._cleanupPingTimer())}_resetTimeoutPeriod(){if((!this.connection.features||!this.connection.features.inherentKeepAlive)&&(this._timeoutHandle=setTimeout(()=>this.serverTimeout(),this.serverTimeoutInMilliseconds),this._pingServerHandle===void 0)){let e=this._nextKeepAlive-new Date().getTime();e<0&&(e=0),this._pingServerHandle=setTimeout(()=>D(this,null,function*(){if(this._connectionState===z.Connected)try{yield this._sendMessage(this._cachedPingMessage)}catch{this._cleanupPingTimer()}}),e)}}serverTimeout(){this.connection.stop(new Error("Server timeout elapsed without receiving a message from the server."))}_invokeClientMethod(e){return D(this,null,function*(){let i=e.target.toLowerCase(),t=this._methods[i];if(!t){this._logger.log(f.Warning,`No client method with the name '${i}' found.`),e.invocationId&&(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),yield this._sendWithProtocol(this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)));return}let n=t.slice(),s=!!e.invocationId,o,a,l;for(let c of n)try{let h=o;o=yield c.apply(this,e.arguments),s&&o&&h&&(this._logger.log(f.Error,`Multiple results provided for '${i}'. Sending error to server.`),l=this._createCompletionMessage(e.invocationId,"Client provided multiple results.",null)),a=void 0}catch(h){a=h,this._logger.log(f.Error,`A callback for the method '${i}' threw error '${h}'.`)}l?yield this._sendWithProtocol(l):s?(a?l=this._createCompletionMessage(e.invocationId,`${a}`,null):o!==void 0?l=this._createCompletionMessage(e.invocationId,null,o):(this._logger.log(f.Warning,`No result given for '${i}' method and invocation ID '${e.invocationId}'.`),l=this._createCompletionMessage(e.invocationId,"Client didn't provide a result.",null)),yield this._sendWithProtocol(l)):o&&this._logger.log(f.Error,`Result given for '${i}' method but server is not expecting a result.`)})}_connectionClosed(e){this._logger.log(f.Debug,`HubConnection.connectionClosed(${e}) called while in state ${this._connectionState}.`),this._stopDuringStartError=this._stopDuringStartError||e||new oe("The underlying connection was closed before the hub handshake could complete."),this._handshakeResolver&&this._handshakeResolver(),this._cancelCallbacksWithError(e||new Error("Invocation canceled due to the underlying connection being closed.")),this._cleanupTimeout(),this._cleanupPingTimer(),this._connectionState===z.Disconnecting?this._completeClose(e):this._connectionState===z.Connected&&this._reconnectPolicy?this._reconnect(e):this._connectionState===z.Connected&&this._completeClose(e)}_completeClose(e){if(this._connectionStarted){this._connectionState=z.Disconnected,this._connectionStarted=!1,this._messageBuffer&&(this._messageBuffer._dispose(e??new Error("Connection closed.")),this._messageBuffer=void 0),B.isBrowser&&window.document.removeEventListener("freeze",this._freezeEventListener);try{this._closedCallbacks.forEach(i=>i.apply(this,[e]))}catch(i){this._logger.log(f.Error,`An onclose callback called with error '${e}' threw error '${i}'.`)}}}_reconnect(e){return D(this,null,function*(){let i=Date.now(),t=0,n=e!==void 0?e:new Error("Attempting to reconnect due to a unknown error."),s=this._getNextRetryDelay(t++,0,n);if(s===null){this._logger.log(f.Debug,"Connection not reconnecting because the IRetryPolicy returned null on the first reconnect attempt."),this._completeClose(e);return}if(this._connectionState=z.Reconnecting,e?this._logger.log(f.Information,`Connection reconnecting because of error '${e}'.`):this._logger.log(f.Information,"Connection reconnecting."),this._reconnectingCallbacks.length!==0){try{this._reconnectingCallbacks.forEach(o=>o.apply(this,[e]))}catch(o){this._logger.log(f.Error,`An onreconnecting callback called with error '${e}' threw error '${o}'.`)}if(this._connectionState!==z.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state in onreconnecting callback. Done reconnecting.");return}}for(;s!==null;){if(this._logger.log(f.Information,`Reconnect attempt number ${t} will start in ${s} ms.`),yield new Promise(o=>{this._reconnectDelayHandle=setTimeout(o,s)}),this._reconnectDelayHandle=void 0,this._connectionState!==z.Reconnecting){this._logger.log(f.Debug,"Connection left the reconnecting state during reconnect delay. Done reconnecting.");return}try{if(yield this._startInternal(),this._connectionState=z.Connected,this._logger.log(f.Information,"HubConnection reconnected successfully."),this._reconnectedCallbacks.length!==0)try{this._reconnectedCallbacks.forEach(o=>o.apply(this,[this.connection.connectionId]))}catch(o){this._logger.log(f.Error,`An onreconnected callback called with connectionId '${this.connection.connectionId}; threw error '${o}'.`)}return}catch(o){if(this._logger.log(f.Information,`Reconnect attempt failed because of error '${o}'.`),this._connectionState!==z.Reconnecting){this._logger.log(f.Debug,`Connection moved to the '${this._connectionState}' from the reconnecting state during reconnect attempt. Done reconnecting.`),this._connectionState===z.Disconnecting&&this._completeClose();return}n=o instanceof Error?o:new Error(o.toString()),s=this._getNextRetryDelay(t++,Date.now()-i,n)}}this._logger.log(f.Information,`Reconnect retries have been exhausted after ${Date.now()-i} ms and ${t} failed attempts. Connection disconnecting.`),this._completeClose()})}_getNextRetryDelay(e,i,t){try{return this._reconnectPolicy.nextRetryDelayInMilliseconds({elapsedMilliseconds:i,previousRetryCount:e,retryReason:t})}catch(n){return this._logger.log(f.Error,`IRetryPolicy.nextRetryDelayInMilliseconds(${e}, ${i}) threw error '${n}'.`),null}}_cancelCallbacksWithError(e){let i=this._callbacks;this._callbacks={},Object.keys(i).forEach(t=>{let n=i[t];try{n(null,e)}catch(s){this._logger.log(f.Error,`Stream 'error' callback called with '${e}' threw error: ${Sn(s)}`)}})}_cleanupPingTimer(){this._pingServerHandle&&(clearTimeout(this._pingServerHandle),this._pingServerHandle=void 0)}_cleanupTimeout(){this._timeoutHandle&&clearTimeout(this._timeoutHandle)}_createInvocation(e,i,t,n){if(t)return n.length!==0?{arguments:i,streamIds:n,target:e,type:k.Invocation}:{arguments:i,target:e,type:k.Invocation};{let s=this._invocationId;return this._invocationId++,n.length!==0?{arguments:i,invocationId:s.toString(),streamIds:n,target:e,type:k.Invocation}:{arguments:i,invocationId:s.toString(),target:e,type:k.Invocation}}}_launchStreams(e,i){if(e.length!==0){i||(i=Promise.resolve());for(let t in e)e[t].subscribe({complete:()=>{i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t)))},error:n=>{let s;n instanceof Error?s=n.message:n&&n.toString?s=n.toString():s="Unknown error",i=i.then(()=>this._sendWithProtocol(this._createCompletionMessage(t,s)))},next:n=>{i=i.then(()=>this._sendWithProtocol(this._createStreamItemMessage(t,n)))}})}}_replaceStreamingParams(e){let i=[],t=[];for(let n=0;n<e.length;n++){let s=e[n];if(this._isObservable(s)){let o=this._invocationId;this._invocationId++,i[o]=s,t.push(o.toString()),e.splice(n,1)}}return[i,t]}_isObservable(e){return e&&e.subscribe&&typeof e.subscribe=="function"}_createStreamInvocation(e,i,t){let n=this._invocationId;return this._invocationId++,t.length!==0?{arguments:i,invocationId:n.toString(),streamIds:t,target:e,type:k.StreamInvocation}:{arguments:i,invocationId:n.toString(),target:e,type:k.StreamInvocation}}_createCancelInvocation(e){return{invocationId:e,type:k.CancelInvocation}}_createStreamItemMessage(e,i){return{invocationId:e,item:i,type:k.StreamItem}}_createCompletionMessage(e,i,t){return i?{error:i,invocationId:e,type:k.Completion}:{invocationId:e,result:t,type:k.Completion}}_createCloseMessage(){return{type:k.Close}}};var td=[0,2e3,1e4,3e4,null],Oi=class{constructor(e){this._retryDelays=e!==void 0?[...e,null]:td}nextRetryDelayInMilliseconds(e){return this._retryDelays[e.previousRetryCount]}};var ut=(()=>{class r{}return r.Authorization="Authorization",r.Cookie="Cookie",r})();var An=class extends Le{constructor(e,i){super(),this._innerClient=e,this._accessTokenFactory=i}send(e){return D(this,null,function*(){let i=!0;this._accessTokenFactory&&(!this._accessToken||e.url&&e.url.indexOf("/negotiate?")>0)&&(i=!1,this._accessToken=yield this._accessTokenFactory()),this._setAuthorizationHeader(e);let t=yield this._innerClient.send(e);return i&&t.statusCode===401&&this._accessTokenFactory?(this._accessToken=yield this._accessTokenFactory(),this._setAuthorizationHeader(e),yield this._innerClient.send(e)):t})}_setAuthorizationHeader(e){e.headers||(e.headers={}),this._accessToken?e.headers[ut.Authorization]=`Bearer ${this._accessToken}`:this._accessTokenFactory&&e.headers[ut.Authorization]&&delete e.headers[ut.Authorization]}getCookieString(e){return this._innerClient.getCookieString(e)}};var K=function(r){return r[r.None=0]="None",r[r.WebSockets=1]="WebSockets",r[r.ServerSentEvents=2]="ServerSentEvents",r[r.LongPolling=4]="LongPolling",r}(K||{}),X=function(r){return r[r.Text=1]="Text",r[r.Binary=2]="Binary",r}(X||{});var kn=class{constructor(){this._isAborted=!1,this.onabort=null}abort(){this._isAborted||(this._isAborted=!0,this.onabort&&this.onabort())}get signal(){return this}get aborted(){return this._isAborted}};var Ii=class{get pollAborted(){return this._pollAbort.aborted}constructor(e,i,t){this._httpClient=e,this._logger=i,this._pollAbort=new kn,this._options=t,this._running=!1,this.onreceive=null,this.onclose=null}connect(e,i){return D(this,null,function*(){if(j.isRequired(e,"url"),j.isRequired(i,"transferFormat"),j.isIn(i,X,"transferFormat"),this._url=e,this._logger.log(f.Trace,"(LongPolling transport) Connecting."),i===X.Binary&&typeof XMLHttpRequest<"u"&&typeof new XMLHttpRequest().responseType!="string")throw new Error("Binary protocols over XmlHttpRequest not implementing advanced features are not supported.");let[t,n]=Ne(),s=_({[t]:n},this._options.headers),o={abortSignal:this._pollAbort.signal,headers:s,timeout:1e5,withCredentials:this._options.withCredentials};i===X.Binary&&(o.responseType="arraybuffer");let a=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${a}.`);let l=yield this._httpClient.get(a,o);l.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${l.statusCode}.`),this._closeError=new be(l.statusText||"",l.statusCode),this._running=!1):this._running=!0,this._receiving=this._poll(this._url,o)})}_poll(e,i){return D(this,null,function*(){try{for(;this._running;)try{let t=`${e}&_=${Date.now()}`;this._logger.log(f.Trace,`(LongPolling transport) polling: ${t}.`);let n=yield this._httpClient.get(t,i);n.statusCode===204?(this._logger.log(f.Information,"(LongPolling transport) Poll terminated by server."),this._running=!1):n.statusCode!==200?(this._logger.log(f.Error,`(LongPolling transport) Unexpected response code: ${n.statusCode}.`),this._closeError=new be(n.statusText||"",n.statusCode),this._running=!1):n.content?(this._logger.log(f.Trace,`(LongPolling transport) data received. ${et(n.content,this._options.logMessageContent)}.`),this.onreceive&&this.onreceive(n.content)):this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing.")}catch(t){this._running?t instanceof Je?this._logger.log(f.Trace,"(LongPolling transport) Poll timed out, reissuing."):(this._closeError=t,this._running=!1):this._logger.log(f.Trace,`(LongPolling transport) Poll errored after shutdown: ${t.message}`)}}finally{this._logger.log(f.Trace,"(LongPolling transport) Polling complete."),this.pollAborted||this._raiseOnClose()}})}send(e){return D(this,null,function*(){return this._running?Cn(this._logger,"LongPolling",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return D(this,null,function*(){this._logger.log(f.Trace,"(LongPolling transport) Stopping polling."),this._running=!1,this._pollAbort.abort();try{yield this._receiving,this._logger.log(f.Trace,`(LongPolling transport) sending DELETE request to ${this._url}.`);let e={},[i,t]=Ne();e[i]=t;let n={headers:_(_({},e),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials},s;try{yield this._httpClient.delete(this._url,n)}catch(o){s=o}s?s instanceof be&&(s.statusCode===404?this._logger.log(f.Trace,"(LongPolling transport) A 404 response was returned from sending a DELETE request."):this._logger.log(f.Trace,`(LongPolling transport) Error sending a DELETE request: ${s}`)):this._logger.log(f.Trace,"(LongPolling transport) DELETE request accepted.")}finally{this._logger.log(f.Trace,"(LongPolling transport) Stop finished."),this._raiseOnClose()}})}_raiseOnClose(){if(this.onclose){let e="(LongPolling transport) Firing onclose event.";this._closeError&&(e+=" Error: "+this._closeError),this._logger.log(f.Trace,e),this.onclose(this._closeError)}}};var Tn=class{constructor(e,i,t,n){this._httpClient=e,this._accessToken=i,this._logger=t,this._options=n,this.onreceive=null,this.onclose=null}connect(e,i){return D(this,null,function*(){return j.isRequired(e,"url"),j.isRequired(i,"transferFormat"),j.isIn(i,X,"transferFormat"),this._logger.log(f.Trace,"(SSE transport) Connecting."),this._url=e,this._accessToken&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(this._accessToken)}`),new Promise((t,n)=>{let s=!1;if(i!==X.Text){n(new Error("The Server-Sent Events transport only supports the 'Text' transfer format"));return}let o;if(B.isBrowser||B.isWebWorker)o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials});else{let a=this._httpClient.getCookieString(e),l={};l.Cookie=a;let[c,h]=Ne();l[c]=h,o=new this._options.EventSource(e,{withCredentials:this._options.withCredentials,headers:_(_({},l),this._options.headers)})}try{o.onmessage=a=>{if(this.onreceive)try{this._logger.log(f.Trace,`(SSE transport) data received. ${et(a.data,this._options.logMessageContent)}.`),this.onreceive(a.data)}catch(l){this._close(l);return}},o.onerror=a=>{s?this._close():n(new Error("EventSource failed to connect. The connection could not be found on the server, either the connection ID is not present on the server, or a proxy is refusing/buffering the connection. If you have multiple servers check that sticky sessions are enabled."))},o.onopen=()=>{this._logger.log(f.Information,`SSE connected to ${this._url}`),this._eventSource=o,s=!0,t()}}catch(a){n(a);return}})})}send(e){return D(this,null,function*(){return this._eventSource?Cn(this._logger,"SSE",this._httpClient,this._url,e,this._options):Promise.reject(new Error("Cannot send until the transport is connected"))})}stop(){return this._close(),Promise.resolve()}_close(e){this._eventSource&&(this._eventSource.close(),this._eventSource=void 0,this.onclose&&this.onclose(e))}};var Pn=class{constructor(e,i,t,n,s,o){this._logger=t,this._accessTokenFactory=i,this._logMessageContent=n,this._webSocketConstructor=s,this._httpClient=e,this.onreceive=null,this.onclose=null,this._headers=o}connect(e,i){return D(this,null,function*(){j.isRequired(e,"url"),j.isRequired(i,"transferFormat"),j.isIn(i,X,"transferFormat"),this._logger.log(f.Trace,"(WebSockets transport) Connecting.");let t;return this._accessTokenFactory&&(t=yield this._accessTokenFactory()),new Promise((n,s)=>{e=e.replace(/^http/,"ws");let o,a=this._httpClient.getCookieString(e),l=!1;if(B.isNode||B.isReactNative){let c={},[h,C]=Ne();c[h]=C,t&&(c[ut.Authorization]=`Bearer ${t}`),a&&(c[ut.Cookie]=a),o=new this._webSocketConstructor(e,void 0,{headers:_(_({},c),this._headers)})}else t&&(e+=(e.indexOf("?")<0?"?":"&")+`access_token=${encodeURIComponent(t)}`);o||(o=new this._webSocketConstructor(e)),i===X.Binary&&(o.binaryType="arraybuffer"),o.onopen=c=>{this._logger.log(f.Information,`WebSocket connected to ${e}.`),this._webSocket=o,l=!0,n()},o.onerror=c=>{let h=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?h=c.error:h="There was an error with the transport",this._logger.log(f.Information,`(WebSockets transport) ${h}.`)},o.onmessage=c=>{if(this._logger.log(f.Trace,`(WebSockets transport) data received. ${et(c.data,this._logMessageContent)}.`),this.onreceive)try{this.onreceive(c.data)}catch(h){this._close(h);return}},o.onclose=c=>{if(l)this._close(c);else{let h=null;typeof ErrorEvent<"u"&&c instanceof ErrorEvent?h=c.error:h="WebSocket failed to connect. The connection could not be found on the server, either the endpoint may not be a SignalR endpoint, the connection ID is not present on the server, or there is a proxy blocking WebSockets. If you have multiple servers check that sticky sessions are enabled.",s(new Error(h))}}})})}send(e){return this._webSocket&&this._webSocket.readyState===this._webSocketConstructor.OPEN?(this._logger.log(f.Trace,`(WebSockets transport) sending data. ${et(e,this._logMessageContent)}.`),this._webSocket.send(e),Promise.resolve()):Promise.reject("WebSocket is not in the OPEN state")}stop(){return this._webSocket&&this._close(void 0),Promise.resolve()}_close(e){this._webSocket&&(this._webSocket.onclose=()=>{},this._webSocket.onmessage=()=>{},this._webSocket.onerror=()=>{},this._webSocket.close(),this._webSocket=void 0),this._logger.log(f.Trace,"(WebSockets transport) socket closed."),this.onclose&&(this._isCloseEvent(e)&&(e.wasClean===!1||e.code!==1e3)?this.onclose(new Error(`WebSocket closed with status code: ${e.code} (${e.reason||"no reason given"}).`)):e instanceof Error?this.onclose(e):this.onclose())}_isCloseEvent(e){return e&&typeof e.wasClean=="boolean"&&typeof e.code=="number"}};var Fa=100,Ln=class{constructor(e,i={}){if(this._stopPromiseResolver=()=>{},this.features={},this._negotiateVersion=1,j.isRequired(e,"url"),this._logger=ja(i.logger),this.baseUrl=this._resolveUrl(e),i=i||{},i.logMessageContent=i.logMessageContent===void 0?!1:i.logMessageContent,typeof i.withCredentials=="boolean"||i.withCredentials===void 0)i.withCredentials=i.withCredentials===void 0?!0:i.withCredentials;else throw new Error("withCredentials option was not a 'boolean' or 'undefined' value");i.timeout=i.timeout===void 0?100*1e3:i.timeout;let t=null,n=null;if(B.isNode&&typeof ht<"u"){let s=typeof __webpack_require__=="function"?__non_webpack_require__:ht;t=s("ws"),n=s("eventsource")}!B.isNode&&typeof WebSocket<"u"&&!i.WebSocket?i.WebSocket=WebSocket:B.isNode&&!i.WebSocket&&t&&(i.WebSocket=t),!B.isNode&&typeof EventSource<"u"&&!i.EventSource?i.EventSource=EventSource:B.isNode&&!i.EventSource&&typeof n<"u"&&(i.EventSource=n),this._httpClient=new An(i.httpClient||new Mn(this._logger),i.accessTokenFactory),this._connectionState="Disconnected",this._connectionStarted=!1,this._options=i,this.onreceive=null,this.onclose=null}start(e){return D(this,null,function*(){if(e=e||X.Binary,j.isIn(e,X,"transferFormat"),this._logger.log(f.Debug,`Starting connection with transfer format '${X[e]}'.`),this._connectionState!=="Disconnected")return Promise.reject(new Error("Cannot start an HttpConnection that is not in the 'Disconnected' state."));if(this._connectionState="Connecting",this._startInternalPromise=this._startInternal(e),yield this._startInternalPromise,this._connectionState==="Disconnecting"){let i="Failed to start the HttpConnection before stop() was called.";return this._logger.log(f.Error,i),yield this._stopPromise,Promise.reject(new oe(i))}else if(this._connectionState!=="Connected"){let i="HttpConnection.startInternal completed gracefully but didn't enter the connection into the connected state!";return this._logger.log(f.Error,i),Promise.reject(new oe(i))}this._connectionStarted=!0})}send(e){return this._connectionState!=="Connected"?Promise.reject(new Error("Cannot send data if the connection is not in the 'Connected' State.")):(this._sendQueue||(this._sendQueue=new Es(this.transport)),this._sendQueue.send(e))}stop(e){return D(this,null,function*(){if(this._connectionState==="Disconnected")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnected state.`),Promise.resolve();if(this._connectionState==="Disconnecting")return this._logger.log(f.Debug,`Call to HttpConnection.stop(${e}) ignored because the connection is already in the disconnecting state.`),this._stopPromise;this._connectionState="Disconnecting",this._stopPromise=new Promise(i=>{this._stopPromiseResolver=i}),yield this._stopInternal(e),yield this._stopPromise})}_stopInternal(e){return D(this,null,function*(){this._stopError=e;try{yield this._startInternalPromise}catch{}if(this.transport){try{yield this.transport.stop()}catch(i){this._logger.log(f.Error,`HttpConnection.transport.stop() threw error '${i}'.`),this._stopConnection()}this.transport=void 0}else this._logger.log(f.Debug,"HttpConnection.transport is undefined in HttpConnection.stop() because start() failed.")})}_startInternal(e){return D(this,null,function*(){let i=this.baseUrl;this._accessTokenFactory=this._options.accessTokenFactory,this._httpClient._accessTokenFactory=this._accessTokenFactory;try{if(this._options.skipNegotiation)if(this._options.transport===K.WebSockets)this.transport=this._constructTransport(K.WebSockets),yield this._startTransport(i,e);else throw new Error("Negotiation can only be skipped when using the WebSocket transport directly.");else{let t=null,n=0;do{if(t=yield this._getNegotiationResponse(i),this._connectionState==="Disconnecting"||this._connectionState==="Disconnected")throw new oe("The connection was stopped during negotiation.");if(t.error)throw new Error(t.error);if(t.ProtocolVersion)throw new Error("Detected a connection attempt to an ASP.NET SignalR Server. This client only supports connecting to an ASP.NET Core SignalR Server. See https://aka.ms/signalr-core-differences for details.");if(t.url&&(i=t.url),t.accessToken){let s=t.accessToken;this._accessTokenFactory=()=>s,this._httpClient._accessToken=s,this._httpClient._accessTokenFactory=void 0}n++}while(t.url&&n<Fa);if(n===Fa&&t.url)throw new Error("Negotiate redirection limit exceeded.");yield this._createTransport(i,this._options.transport,t,e)}this.transport instanceof Ii&&(this.features.inherentKeepAlive=!0),this._connectionState==="Connecting"&&(this._logger.log(f.Debug,"The HttpConnection connected successfully."),this._connectionState="Connected")}catch(t){return this._logger.log(f.Error,"Failed to start the connection: "+t),this._connectionState="Disconnected",this.transport=void 0,this._stopPromiseResolver(),Promise.reject(t)}})}_getNegotiationResponse(e){return D(this,null,function*(){let i={},[t,n]=Ne();i[t]=n;let s=this._resolveNegotiateUrl(e);this._logger.log(f.Debug,`Sending negotiation request: ${s}.`);try{let o=yield this._httpClient.post(s,{content:"",headers:_(_({},i),this._options.headers),timeout:this._options.timeout,withCredentials:this._options.withCredentials});if(o.statusCode!==200)return Promise.reject(new Error(`Unexpected status code returned from negotiate '${o.statusCode}'`));let a=JSON.parse(o.content);return(!a.negotiateVersion||a.negotiateVersion<1)&&(a.connectionToken=a.connectionId),a.useStatefulReconnect&&this._options._useStatefulReconnect!==!0?Promise.reject(new Mi("Client didn't negotiate Stateful Reconnect but the server did.")):a}catch(o){let a="Failed to complete negotiation with the server: "+o;return o instanceof be&&o.statusCode===404&&(a=a+" Either this is not a SignalR endpoint or there is a proxy blocking the connection."),this._logger.log(f.Error,a),Promise.reject(new Mi(a))}})}_createConnectUrl(e,i){return i?e+(e.indexOf("?")===-1?"?":"&")+`id=${i}`:e}_createTransport(e,i,t,n){return D(this,null,function*(){let s=this._createConnectUrl(e,t.connectionToken);if(this._isITransport(i)){this._logger.log(f.Debug,"Connection was provided an instance of ITransport, using that directly."),this.transport=i,yield this._startTransport(s,n),this.connectionId=t.connectionId;return}let o=[],a=t.availableTransports||[],l=t;for(let c of a){let h=this._resolveTransportOrError(c,i,n,l?.useStatefulReconnect===!0);if(h instanceof Error)o.push(`${c.transport} failed:`),o.push(h);else if(this._isITransport(h)){if(this.transport=h,!l){try{l=yield this._getNegotiationResponse(e)}catch(C){return Promise.reject(C)}s=this._createConnectUrl(e,l.connectionToken)}try{yield this._startTransport(s,n),this.connectionId=l.connectionId;return}catch(C){if(this._logger.log(f.Error,`Failed to start the transport '${c.transport}': ${C}`),l=void 0,o.push(new wn(`${c.transport} failed: ${C}`,K[c.transport])),this._connectionState!=="Connecting"){let M="Failed to select transport before stop() was called.";return this._logger.log(f.Debug,M),Promise.reject(new oe(M))}}}}return o.length>0?Promise.reject(new bn(`Unable to connect to the server with any of the available transports. ${o.join(" ")}`,o)):Promise.reject(new Error("None of the transports supported by the client are supported by the server."))})}_constructTransport(e){switch(e){case K.WebSockets:if(!this._options.WebSocket)throw new Error("'WebSocket' is not supported in your environment.");return new Pn(this._httpClient,this._accessTokenFactory,this._logger,this._options.logMessageContent,this._options.WebSocket,this._options.headers||{});case K.ServerSentEvents:if(!this._options.EventSource)throw new Error("'EventSource' is not supported in your environment.");return new Tn(this._httpClient,this._httpClient._accessToken,this._logger,this._options);case K.LongPolling:return new Ii(this._httpClient,this._logger,this._options);default:throw new Error(`Unknown transport: ${e}.`)}}_startTransport(e,i){return this.transport.onreceive=this.onreceive,this.features.reconnect?this.transport.onclose=t=>D(this,null,function*(){let n=!1;if(this.features.reconnect)try{this.features.disconnected(),yield this.transport.connect(e,i),yield this.features.resend()}catch{n=!0}else{this._stopConnection(t);return}n&&this._stopConnection(t)}):this.transport.onclose=t=>this._stopConnection(t),this.transport.connect(e,i)}_resolveTransportOrError(e,i,t,n){let s=K[e.transport];if(s==null)return this._logger.log(f.Debug,`Skipping transport '${e.transport}' because it is not supported by this client.`),new Error(`Skipping transport '${e.transport}' because it is not supported by this client.`);if(id(i,s))if(e.transferFormats.map(a=>X[a]).indexOf(t)>=0){if(s===K.WebSockets&&!this._options.WebSocket||s===K.ServerSentEvents&&!this._options.EventSource)return this._logger.log(f.Debug,`Skipping transport '${K[s]}' because it is not supported in your environment.'`),new vn(`'${K[s]}' is not supported in your environment.`,s);this._logger.log(f.Debug,`Selecting transport '${K[s]}'.`);try{return this.features.reconnect=s===K.WebSockets?n:void 0,this._constructTransport(s)}catch(a){return a}}else return this._logger.log(f.Debug,`Skipping transport '${K[s]}' because it does not support the requested transfer format '${X[t]}'.`),new Error(`'${K[s]}' does not support ${X[t]}.`);else return this._logger.log(f.Debug,`Skipping transport '${K[s]}' because it was disabled by the client.`),new yn(`'${K[s]}' is disabled by the client.`,s)}_isITransport(e){return e&&typeof e=="object"&&"connect"in e}_stopConnection(e){if(this._logger.log(f.Debug,`HttpConnection.stopConnection(${e}) called while in state ${this._connectionState}.`),this.transport=void 0,e=this._stopError||e,this._stopError=void 0,this._connectionState==="Disconnected"){this._logger.log(f.Debug,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is already in the disconnected state.`);return}if(this._connectionState==="Connecting")throw this._logger.log(f.Warning,`Call to HttpConnection.stopConnection(${e}) was ignored because the connection is still in the connecting state.`),new Error(`HttpConnection.stopConnection(${e}) was called while the connection is still in the connecting state.`);if(this._connectionState==="Disconnecting"&&this._stopPromiseResolver(),e?this._logger.log(f.Error,`Connection disconnected with error '${e}'.`):this._logger.log(f.Information,"Connection disconnected."),this._sendQueue&&(this._sendQueue.stop().catch(i=>{this._logger.log(f.Error,`TransportSendQueue.stop() threw error '${i}'.`)}),this._sendQueue=void 0),this.connectionId=void 0,this._connectionState="Disconnected",this._connectionStarted){this._connectionStarted=!1;try{this.onclose&&this.onclose(e)}catch(i){this._logger.log(f.Error,`HttpConnection.onclose(${e}) threw error '${i}'.`)}}}_resolveUrl(e){if(e.lastIndexOf("https://",0)===0||e.lastIndexOf("http://",0)===0)return e;if(!B.isBrowser)throw new Error(`Cannot resolve '${e}'.`);let i=window.document.createElement("a");return i.href=e,this._logger.log(f.Information,`Normalizing '${e}' to '${i.href}'.`),i.href}_resolveNegotiateUrl(e){let i=new URL(e);i.pathname.endsWith("/")?i.pathname+="negotiate":i.pathname+="/negotiate";let t=new URLSearchParams(i.searchParams);return t.has("negotiateVersion")||t.append("negotiateVersion",this._negotiateVersion.toString()),t.has("useStatefulReconnect")?t.get("useStatefulReconnect")==="true"&&(this._options._useStatefulReconnect=!0):this._options._useStatefulReconnect===!0&&t.append("useStatefulReconnect","true"),i.search=t.toString(),i.toString()}};function id(r,e){return!r||(e&r)!==0}var Es=class r{constructor(e){this._transport=e,this._buffer=[],this._executing=!0,this._sendBufferedData=new Lt,this._transportResult=new Lt,this._sendLoopPromise=this._sendLoop()}send(e){return this._bufferData(e),this._transportResult||(this._transportResult=new Lt),this._transportResult.promise}stop(){return this._executing=!1,this._sendBufferedData.resolve(),this._sendLoopPromise}_bufferData(e){if(this._buffer.length&&typeof this._buffer[0]!=typeof e)throw new Error(`Expected data to be of type ${typeof this._buffer} but was of type ${typeof e}`);this._buffer.push(e),this._sendBufferedData.resolve()}_sendLoop(){return D(this,null,function*(){for(;;){if(yield this._sendBufferedData.promise,!this._executing){this._transportResult&&this._transportResult.reject("Connection stopped.");break}this._sendBufferedData=new Lt;let e=this._transportResult;this._transportResult=void 0;let i=typeof this._buffer[0]=="string"?this._buffer.join(""):r._concatBuffers(this._buffer);this._buffer.length=0;try{yield this._transport.send(i),e.resolve()}catch(t){e.reject(t)}}})}static _concatBuffers(e){let i=e.map(s=>s.byteLength).reduce((s,o)=>s+o),t=new Uint8Array(i),n=0;for(let s of e)t.set(new Uint8Array(s),n),n+=s.byteLength;return t.buffer}},Lt=class{constructor(){this.promise=new Promise((e,i)=>[this._resolver,this._rejecter]=[e,i])}resolve(){this._resolver()}reject(e){this._rejecter(e)}};var nd="json",Vn=class{constructor(){this.name=nd,this.version=2,this.transferFormat=X.Text}parseMessages(e,i){if(typeof e!="string")throw new Error("Invalid input for JSON hub protocol. Expected a string.");if(!e)return[];i===null&&(i=Ve.instance);let t=_e.parse(e),n=[];for(let s of t){let o=JSON.parse(s);if(typeof o.type!="number")throw new Error("Invalid payload.");switch(o.type){case k.Invocation:this._isInvocationMessage(o);break;case k.StreamItem:this._isStreamItemMessage(o);break;case k.Completion:this._isCompletionMessage(o);break;case k.Ping:break;case k.Close:break;case k.Ack:this._isAckMessage(o);break;case k.Sequence:this._isSequenceMessage(o);break;default:i.log(f.Information,"Unknown message type '"+o.type+"' ignored.");continue}n.push(o)}return n}writeMessage(e){return _e.write(JSON.stringify(e))}_isInvocationMessage(e){this._assertNotEmptyString(e.target,"Invalid payload for Invocation message."),e.invocationId!==void 0&&this._assertNotEmptyString(e.invocationId,"Invalid payload for Invocation message.")}_isStreamItemMessage(e){if(this._assertNotEmptyString(e.invocationId,"Invalid payload for StreamItem message."),e.item===void 0)throw new Error("Invalid payload for StreamItem message.")}_isCompletionMessage(e){if(e.result&&e.error)throw new Error("Invalid payload for Completion message.");!e.result&&e.error&&this._assertNotEmptyString(e.error,"Invalid payload for Completion message."),this._assertNotEmptyString(e.invocationId,"Invalid payload for Completion message.")}_isAckMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Ack message.")}_isSequenceMessage(e){if(typeof e.sequenceId!="number")throw new Error("Invalid SequenceId for Sequence message.")}_assertNotEmptyString(e,i){if(typeof e!="string"||e==="")throw new Error(i)}};var rd={trace:f.Trace,debug:f.Debug,info:f.Information,information:f.Information,warn:f.Warning,warning:f.Warning,error:f.Error,critical:f.Critical,none:f.None};function sd(r){let e=rd[r.toLowerCase()];if(typeof e<"u")return e;throw new Error(`Unknown log level: ${r}`)}var Ri=class{configureLogging(e){if(j.isRequired(e,"logging"),od(e))this.logger=e;else if(typeof e=="string"){let i=sd(e);this.logger=new ct(i)}else this.logger=new ct(e);return this}withUrl(e,i){return j.isRequired(e,"url"),j.isNotEmpty(e,"url"),this.url=e,typeof i=="object"?this.httpConnectionOptions=_(_({},this.httpConnectionOptions),i):this.httpConnectionOptions=F(_({},this.httpConnectionOptions),{transport:i}),this}withHubProtocol(e){return j.isRequired(e,"protocol"),this.protocol=e,this}withAutomaticReconnect(e){if(this.reconnectPolicy)throw new Error("A reconnectPolicy has already been set.");return e?Array.isArray(e)?this.reconnectPolicy=new Oi(e):this.reconnectPolicy=e:this.reconnectPolicy=new Oi,this}withServerTimeout(e){return j.isRequired(e,"milliseconds"),this._serverTimeoutInMilliseconds=e,this}withKeepAliveInterval(e){return j.isRequired(e,"milliseconds"),this._keepAliveIntervalInMilliseconds=e,this}withStatefulReconnect(e){return this.httpConnectionOptions===void 0&&(this.httpConnectionOptions={}),this.httpConnectionOptions._useStatefulReconnect=!0,this._statefulReconnectBufferSize=e?.bufferSize,this}build(){let e=this.httpConnectionOptions||{};if(e.logger===void 0&&(e.logger=this.logger),!this.url)throw new Error("The 'HubConnectionBuilder.withUrl' method must be called before building the connection.");let i=new Ln(this.url,e);return Dn.create(i,this.logger||Ve.instance,this.protocol||new Vn,this.reconnectPolicy,this._serverTimeoutInMilliseconds,this._keepAliveIntervalInMilliseconds,this._statefulReconnectBufferSize)}};function od(r){return r.log!==void 0}var qa=(()=>{let e=class e{constructor(){this.hubConnection=new Ri().withUrl(xi.endpointUrl+"/hub",{skipNegotiation:!0,transport:K.WebSockets}).build()}startConnection(){return new Zn(t=>{this.hubConnection.start().then(()=>{console.log("Connection established with SignalR hub"),t.next(),t.complete()}).catch(n=>{console.error("Error connecting to SignalR hub:",n),t.error(n)})})}receiveMessage(){return new Zn(t=>{this.hubConnection.on("RM",n=>{t.next(n)})})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let r=e;return r})();var za=new Y("");var cd={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Yf=F(_({},cd),{"[class.ng-submitted]":"isSubmitted"});var Ce=typeof window<"u"?window:{screen:{},navigator:{}},Vt=(Ce.matchMedia||function(){return{matches:!1}}).bind(Ce),Wa=!1,ud={get passive(){return Wa=!0}},Ga=function(){};Ce.addEventListener&&Ce.addEventListener("p",Ga,ud);Ce.removeEventListener&&Ce.removeEventListener("p",Ga,!1);var Nn=Wa,Jf="PointerEvent"in Ce,xs="ontouchstart"in Ce,dd="TouchEvent"in Ce,hd=xs||dd&&Vt("(any-pointer: coarse)").matches,eg=(Ce.navigator.maxTouchPoints||0)>0||hd,Ka=Ce.navigator.userAgent||"",pd=Vt("(pointer: coarse)").matches&&/iPad|Macintosh/.test(Ka)&&Math.min(Ce.screen.width||0,Ce.screen.height||0)>=768,tg=(Vt("(pointer: coarse)").matches||!Vt("(pointer: fine)").matches&&xs)&&!/Windows.*Firefox/.test(Ka),ig=Vt("(any-pointer: fine)").matches||Vt("(any-hover: hover)").matches||pd||!xs;var gd=(r,e,i)=>({tooltip:r,placement:e,content:i});function md(r,e){}function vd(r,e){r&1&&Ke(0,md,0,0,"ng-template")}function yd(r,e){if(r&1&&(yr(0),Ke(1,vd,1,0,null,1),wr()),r&2){let i=he();te(),Q("ngTemplateOutlet",i.template)("ngTemplateOutletContext",mo(2,gd,i.tooltip,i.placement,i.content))}}function wd(r,e){if(r&1&&(yr(0),re(1,"div",2),Zt(2),ce(),wr()),r&2){let i=he();te(),Qt("title",i.tooltip)("data-tooltip-placement",i.placement),te(),lo(" ",i.content," ")}}var bd=["tooltipTemplate"],_d=["leftOuterSelectionBar"],Cd=["rightOuterSelectionBar"],Sd=["fullBar"],Ed=["selectionBar"],xd=["minHandle"],Md=["maxHandle"],Od=["floorLabel"],Id=["ceilLabel"],Rd=["minHandleLabel"],Dd=["maxHandleLabel"],Ad=["combinedLabel"],kd=["ticksElement"],Td=r=>({"ngx-slider-selected":r});function Pd(r,e){if(r&1&&Z(0,"ngx-slider-tooltip-wrapper",32),r&2){let i=he().$implicit,t=he();Q("template",t.tooltipTemplate)("tooltip",i.valueTooltip)("placement",i.valueTooltipPlacement)("content",i.value)}}function Ld(r,e){if(r&1&&Z(0,"span",33),r&2){let i=he().$implicit;Q("innerText",i.legend)}}function Vd(r,e){if(r&1&&Z(0,"span",34),r&2){let i=he().$implicit;Q("innerHTML",i.legend,Zs)}}function Nd(r,e){if(r&1&&(re(0,"span",27),Z(1,"ngx-slider-tooltip-wrapper",28),Ke(2,Pd,1,4,"ngx-slider-tooltip-wrapper",29)(3,Ld,1,1,"span",30)(4,Vd,1,1,"span",31),ce()),r&2){let i=e.$implicit,t=he();Q("ngClass",go(8,Td,i.selected))("ngStyle",i.style),te(),Q("template",t.tooltipTemplate)("tooltip",i.tooltip)("placement",i.tooltipPlacement),te(),Q("ngIf",i.value!==null&&i.value!==void 0),te(),Q("ngIf",i.legend!==null&&i.legend!==void 0&&t.allowUnsafeHtmlInSlider===!1),te(),Q("ngIf",i.legend!==null&&i.legend!==void 0&&(t.allowUnsafeHtmlInSlider===null||t.allowUnsafeHtmlInSlider===void 0||t.allowUnsafeHtmlInSlider))}}var Ue=function(r){return r[r.Low=0]="Low",r[r.High=1]="High",r[r.Floor=2]="Floor",r[r.Ceil=3]="Ceil",r[r.TickValue=4]="TickValue",r}(Ue||{}),Ut=class{floor=0;ceil=null;step=1;minRange=null;maxRange=null;pushRange=!1;minLimit=null;maxLimit=null;translate=null;combineLabels=null;getLegend=null;getStepLegend=null;stepsArray=null;bindIndexForStepsArray=!1;draggableRange=!1;draggableRangeOnly=!1;showSelectionBar=!1;showSelectionBarEnd=!1;showSelectionBarFromValue=null;showOuterSelectionBars=!1;hidePointerLabels=!1;hideLimitLabels=!1;autoHideLimitLabels=!0;readOnly=!1;disabled=!1;showTicks=!1;showTicksValues=!1;tickStep=null;tickValueStep=null;ticksArray=null;ticksTooltip=null;ticksValuesTooltip=null;vertical=!1;getSelectionBarColor=null;getTickColor=null;getPointerColor=null;keyboardSupport=!0;scale=1;rotate=0;enforceStep=!0;enforceRange=!0;enforceStepsArray=!0;noSwitching=!1;onlyBindHandles=!1;rightToLeft=!1;reversedControls=!1;boundPointerLabels=!0;logScale=!1;customValueToPosition=null;customPositionToValue=null;precisionLimit=12;selectionBarGradient=null;ariaLabel="ngx-slider";ariaLabelledBy=null;ariaLabelHigh="ngx-slider-max";ariaLabelledByHigh=null;handleDimension=null;barDimension=null;animate=!0;animateOnMove=!1},Xa=new Y("AllowUnsafeHtmlInSlider"),x=function(r){return r[r.Min=0]="Min",r[r.Max=1]="Max",r}(x||{}),Os=class{value;highValue;pointerType},v=class{static isNullOrUndefined(e){return e==null}static areArraysEqual(e,i){if(e.length!==i.length)return!1;for(let t=0;t<e.length;++t)if(e[t]!==i[t])return!1;return!0}static linearValueToPosition(e,i,t){let n=t-i;return(e-i)/n}static logValueToPosition(e,i,t){e=Math.log(e),i=Math.log(i),t=Math.log(t);let n=t-i;return(e-i)/n}static linearPositionToValue(e,i,t){return e*(t-i)+i}static logPositionToValue(e,i,t){i=Math.log(i),t=Math.log(t);let n=e*(t-i)+i;return Math.exp(n)}static findStepIndex(e,i){let t=i.map(s=>Math.abs(e-s.value)),n=0;for(let s=0;s<i.length;s++)t[s]!==t[n]&&t[s]<t[n]&&(n=s);return n}},He=class{static isTouchEvent(e){return window.TouchEvent!==void 0?e instanceof TouchEvent:e.touches!==void 0}static isResizeObserverAvailable(){return window.ResizeObserver!==void 0}},W=class{static roundToPrecisionLimit(e,i){return+e.toPrecision(i)}static isModuloWithinPrecisionLimit(e,i,t){let n=Math.pow(10,-t);return Math.abs(e%i)<=n||Math.abs(Math.abs(e%i)-i)<=n}static clampToRange(e,i,t){return Math.min(Math.max(e,i),t)}},Un=class{eventName=null;events=null;eventsSubscription=null;teardownCallback=null},Hn=class{renderer;constructor(e){this.renderer=e}attachPassiveEventListener(e,i,t,n){if(Nn!==!0)return this.attachEventListener(e,i,t,n);let s=new Un;s.eventName=i,s.events=new Ee;let o=a=>{s.events.next(a)};return e.addEventListener(i,o,{passive:!0,capture:!1}),s.teardownCallback=()=>{e.removeEventListener(i,o,{passive:!0,capture:!1})},s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?ee(()=>{}):or(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}detachEventListener(e){v.isNullOrUndefined(e.eventsSubscription)||(e.eventsSubscription.unsubscribe(),e.eventsSubscription=null),v.isNullOrUndefined(e.events)||(e.events.complete(),e.events=null),v.isNullOrUndefined(e.teardownCallback)||(e.teardownCallback(),e.teardownCallback=null)}attachEventListener(e,i,t,n){let s=new Un;s.eventName=i,s.events=new Ee;let o=a=>{s.events.next(a)};return s.teardownCallback=this.renderer.listen(e,i,o),s.eventsSubscription=s.events.pipe(v.isNullOrUndefined(n)?ee(()=>{}):or(n,void 0,{leading:!0,trailing:!0})).subscribe(a=>{t(a)}),s}},tt=(()=>{class r{elemRef;renderer;changeDetectionRef;_position=0;get position(){return this._position}_dimension=0;get dimension(){return this._dimension}_alwaysHide=!1;get alwaysHide(){return this._alwaysHide}_vertical=!1;get vertical(){return this._vertical}_scale=1;get scale(){return this._scale}_rotate=0;get rotate(){return this._rotate}opacity=1;visibility="visible";left="";bottom="";height="";width="";transform="";eventListenerHelper;eventListeners=[];constructor(i,t,n){this.elemRef=i,this.renderer=t,this.changeDetectionRef=n,this.eventListenerHelper=new Hn(this.renderer)}setAlwaysHide(i){this._alwaysHide=i,i?this.visibility="hidden":this.visibility="visible"}hide(){this.opacity=0}show(){this.alwaysHide||(this.opacity=1)}isVisible(){return this.alwaysHide?!1:this.opacity!==0}setVertical(i){this._vertical=i,this._vertical?(this.left="",this.width=""):(this.bottom="",this.height="")}setScale(i){this._scale=i}setRotate(i){this._rotate=i,this.transform="rotate("+i+"deg)"}getRotate(){return this._rotate}setPosition(i){this._position!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._position=i,this._vertical?this.bottom=Math.round(i)+"px":this.left=Math.round(i)+"px"}calculateDimension(){let i=this.getBoundingClientRect();this.vertical?this._dimension=(i.bottom-i.top)*this.scale:this._dimension=(i.right-i.left)*this.scale}setDimension(i){this._dimension!==i&&!this.isRefDestroyed()&&this.changeDetectionRef.markForCheck(),this._dimension=i,this._vertical?this.height=Math.round(i)+"px":this.width=Math.round(i)+"px"}getBoundingClientRect(){return this.elemRef.nativeElement.getBoundingClientRect()}on(i,t,n){let s=this.eventListenerHelper.attachEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}onPassive(i,t,n){let s=this.eventListenerHelper.attachPassiveEventListener(this.elemRef.nativeElement,i,t,n);this.eventListeners.push(s)}off(i){let t,n;v.isNullOrUndefined(i)?(t=[],n=this.eventListeners):(t=this.eventListeners.filter(s=>s.eventName!==i),n=this.eventListeners.filter(s=>s.eventName===i));for(let s of n)this.eventListenerHelper.detachEventListener(s);this.eventListeners=t}isRefDestroyed(){return v.isNullOrUndefined(this.changeDetectionRef)||this.changeDetectionRef.destroyed}static \u0275fac=function(t){return new(t||r)(ie(yt),ie(wt),ie(Be))};static \u0275dir=mt({type:r,selectors:[["","ngxSliderElement",""]],hostVars:14,hostBindings:function(t,n){t&2&&vr("opacity",n.opacity)("visibility",n.visibility)("left",n.left)("bottom",n.bottom)("height",n.height)("width",n.width)("transform",n.transform)}})}return r})(),Ms=(()=>{class r extends tt{active=!1;role="";tabindex="";ariaOrientation="";ariaLabel="";ariaLabelledBy="";ariaValueNow="";ariaValueText="";ariaValueMin="";ariaValueMax="";focus(){this.elemRef.nativeElement.focus()}focusIfNeeded(){document.activeElement!==this.elemRef.nativeElement&&this.elemRef.nativeElement.focus()}constructor(i,t,n){super(i,t,n)}static \u0275fac=function(t){return new(t||r)(ie(yt),ie(wt),ie(Be))};static \u0275dir=mt({type:r,selectors:[["","ngxSliderHandle",""]],hostVars:11,hostBindings:function(t,n){t&2&&(Qt("role",n.role)("tabindex",n.tabindex)("aria-orientation",n.ariaOrientation)("aria-label",n.ariaLabel)("aria-labelledby",n.ariaLabelledBy)("aria-valuenow",n.ariaValueNow)("aria-valuetext",n.ariaValueText)("aria-valuemin",n.ariaValueMin)("aria-valuemax",n.ariaValueMax),bt("ngx-slider-active",n.active))},features:[gr]})}return r})(),Nt=(()=>{class r extends tt{allowUnsafeHtmlInSlider;_value=null;get value(){return this._value}constructor(i,t,n,s){super(i,t,n),this.allowUnsafeHtmlInSlider=s}setValue(i){let t=!1;!this.alwaysHide&&(v.isNullOrUndefined(this.value)||this.value.length!==i.length||this.value.length>0&&this.dimension===0)&&(t=!0),this._value=i,this.allowUnsafeHtmlInSlider===!1?this.elemRef.nativeElement.innerText=i:this.elemRef.nativeElement.innerHTML=i,t&&this.calculateDimension()}static \u0275fac=function(t){return new(t||r)(ie(yt),ie(wt),ie(Be),ie(Xa,8))};static \u0275dir=mt({type:r,selectors:[["","ngxSliderLabel",""]],features:[gr]})}return r})(),Ud=(()=>{class r{template;tooltip;placement;content;static \u0275fac=function(t){return new(t||r)};static \u0275cmp=nt({type:r,selectors:[["ngx-slider-tooltip-wrapper"]],inputs:{template:"template",tooltip:"tooltip",placement:"placement",content:"content"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"ngx-slider-inner-tooltip"]],template:function(t,n){t&1&&Ke(0,yd,2,6,"ng-container",0)(1,wd,3,3,"ng-container",0),t&2&&(Q("ngIf",n.template),te(),Q("ngIf",!n.template))},dependencies:[ei,ko],styles:[".ngx-slider-inner-tooltip[_ngcontent-%COMP%]{height:100%}"]})}return r})(),Is=class{selected=!1;style={};tooltip=null;tooltipPlacement=null;value=null;valueTooltip=null;valueTooltipPlacement=null;legend=null},jn=class{active=!1;value=0;difference=0;position=0;lowLimit=0;highLimit=0},Ht=class{value;highValue;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue}},$n=class extends Ht{forceChange;static compare(e,i){return v.isNullOrUndefined(e)&&v.isNullOrUndefined(i)||v.isNullOrUndefined(e)!==v.isNullOrUndefined(i)?!1:e.value===i.value&&e.highValue===i.highValue&&e.forceChange===i.forceChange}};var Hd={provide:za,useExisting:ar(()=>Rs),multi:!0},Rs=(()=>{class r{renderer;elementRef;changeDetectionRef;zone;allowUnsafeHtmlInSlider;sliderElementNgxSliderClass=!0;value=null;valueChange=new Me;highValue=null;highValueChange=new Me;options=new Ut;userChangeStart=new Me;userChange=new Me;userChangeEnd=new Me;manualRefreshSubscription;set manualRefresh(i){this.unsubscribeManualRefresh(),this.manualRefreshSubscription=i.subscribe(()=>{setTimeout(()=>this.calculateViewDimensionsAndDetectChanges())})}triggerFocusSubscription;set triggerFocus(i){this.unsubscribeTriggerFocus(),this.triggerFocusSubscription=i.subscribe(t=>{this.focusPointer(t)})}get range(){return!v.isNullOrUndefined(this.value)&&!v.isNullOrUndefined(this.highValue)}initHasRun=!1;inputModelChangeSubject=new Ee;inputModelChangeSubscription=null;outputModelChangeSubject=new Ee;outputModelChangeSubscription=null;viewLowValue=null;viewHighValue=null;viewOptions=new Ut;handleHalfDimension=0;maxHandlePosition=0;currentTrackingPointer=null;currentFocusPointer=null;firstKeyDown=!1;touchId=null;dragging=new jn;leftOuterSelectionBarElement;rightOuterSelectionBarElement;fullBarElement;selectionBarElement;minHandleElement;maxHandleElement;floorLabelElement;ceilLabelElement;minHandleLabelElement;maxHandleLabelElement;combinedLabelElement;ticksElement;tooltipTemplate;sliderElementVerticalClass=!1;sliderElementAnimateClass=!1;sliderElementWithLegendClass=!1;sliderElementDisabledAttr=null;sliderElementAriaLabel="ngx-slider";barStyle={};minPointerStyle={};maxPointerStyle={};fullBarTransparentClass=!1;selectionBarDraggableClass=!1;ticksUnderValuesClass=!1;get showTicks(){return this.viewOptions.showTicks}intermediateTicks=!1;ticks=[];eventListenerHelper=null;onMoveEventListener=null;onEndEventListener=null;moving=!1;resizeObserver=null;onTouchedCallback=null;onChangeCallback=null;constructor(i,t,n,s,o){this.renderer=i,this.elementRef=t,this.changeDetectionRef=n,this.zone=s,this.allowUnsafeHtmlInSlider=o,this.eventListenerHelper=new Hn(this.renderer)}ngOnInit(){this.viewOptions=new Ut,Object.assign(this.viewOptions,this.options),this.updateDisabledState(),this.updateVerticalState(),this.updateAriaLabel()}ngAfterViewInit(){this.applyOptions(),this.subscribeInputModelChangeSubject(),this.subscribeOutputModelChangeSubject(),this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.updateVerticalState(),this.manageElementsStyle(),this.updateDisabledState(),this.calculateViewDimensions(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),this.initHandles(),this.manageEventsBindings(),this.updateAriaLabel(),this.subscribeResizeObserver(),this.initHasRun=!0,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}ngOnChanges(i){!v.isNullOrUndefined(i.options)&&JSON.stringify(i.options.previousValue)!==JSON.stringify(i.options.currentValue)&&this.onChangeOptions(),(!v.isNullOrUndefined(i.value)||!v.isNullOrUndefined(i.highValue))&&this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}ngOnDestroy(){this.unbindEvents(),this.unsubscribeResizeObserver(),this.unsubscribeInputModelChangeSubject(),this.unsubscribeOutputModelChangeSubject(),this.unsubscribeManualRefresh(),this.unsubscribeTriggerFocus()}writeValue(i){i instanceof Array?(this.value=i[0],this.highValue=i[1]):this.value=i,this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!1})}registerOnChange(i){this.onChangeCallback=i}registerOnTouched(i){this.onTouchedCallback=i}setDisabledState(i){this.viewOptions.disabled=i,this.updateDisabledState()}setAriaLabel(i){this.viewOptions.ariaLabel=i,this.updateAriaLabel()}onResize(i){this.calculateViewDimensionsAndDetectChanges()}subscribeInputModelChangeSubject(){this.inputModelChangeSubscription=this.inputModelChangeSubject.pipe(rr($n.compare),$e(i=>!i.forceChange&&!i.internalChange)).subscribe(i=>this.applyInputModelChange(i))}subscribeOutputModelChangeSubject(){this.outputModelChangeSubscription=this.outputModelChangeSubject.pipe(rr($n.compare)).subscribe(i=>this.publishOutputModelChange(i))}subscribeResizeObserver(){He.isResizeObserverAvailable()&&(this.resizeObserver=new ResizeObserver(()=>this.calculateViewDimensionsAndDetectChanges()),this.resizeObserver.observe(this.elementRef.nativeElement))}unsubscribeResizeObserver(){He.isResizeObserverAvailable()&&this.resizeObserver!==null&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}unsubscribeOnMove(){v.isNullOrUndefined(this.onMoveEventListener)||(this.eventListenerHelper.detachEventListener(this.onMoveEventListener),this.onMoveEventListener=null)}unsubscribeOnEnd(){v.isNullOrUndefined(this.onEndEventListener)||(this.eventListenerHelper.detachEventListener(this.onEndEventListener),this.onEndEventListener=null)}unsubscribeInputModelChangeSubject(){v.isNullOrUndefined(this.inputModelChangeSubscription)||(this.inputModelChangeSubscription.unsubscribe(),this.inputModelChangeSubscription=null)}unsubscribeOutputModelChangeSubject(){v.isNullOrUndefined(this.outputModelChangeSubscription)||(this.outputModelChangeSubscription.unsubscribe(),this.outputModelChangeSubscription=null)}unsubscribeManualRefresh(){v.isNullOrUndefined(this.manualRefreshSubscription)||(this.manualRefreshSubscription.unsubscribe(),this.manualRefreshSubscription=null)}unsubscribeTriggerFocus(){v.isNullOrUndefined(this.triggerFocusSubscription)||(this.triggerFocusSubscription.unsubscribe(),this.triggerFocusSubscription=null)}getPointerElement(i){return i===x.Min?this.minHandleElement:i===x.Max?this.maxHandleElement:null}getCurrentTrackingValue(){return this.currentTrackingPointer===x.Min?this.viewLowValue:this.currentTrackingPointer===x.Max?this.viewHighValue:null}modelValueToViewValue(i){return v.isNullOrUndefined(i)?NaN:!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?v.findStepIndex(+i,this.viewOptions.stepsArray):+i}viewValueToModelValue(i){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray?this.getStepValue(i):i}getStepValue(i){let t=this.viewOptions.stepsArray[i];return v.isNullOrUndefined(t)?NaN:t.value}applyViewChange(){this.value=this.viewValueToModelValue(this.viewLowValue),this.range&&(this.highValue=this.viewValueToModelValue(this.viewHighValue)),this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,userEventInitiated:!0,forceChange:!1}),this.inputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!1,internalChange:!0})}applyInputModelChange(i){let t=this.normaliseModelValues(i),n=!Ht.compare(i,t);n&&(this.value=t.value,this.highValue=t.highValue),this.viewLowValue=this.modelValueToViewValue(t.value),this.range?this.viewHighValue=this.modelValueToViewValue(t.highValue):this.viewHighValue=null,this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.updateTicksScale(),this.updateAriaAttributes(),this.range&&this.updateCombinedLabel(),this.outputModelChangeSubject.next({value:t.value,highValue:t.highValue,forceChange:n,userEventInitiated:!1})}publishOutputModelChange(i){let t=()=>{this.valueChange.emit(i.value),this.range&&this.highValueChange.emit(i.highValue),v.isNullOrUndefined(this.onChangeCallback)||(this.range?this.onChangeCallback([i.value,i.highValue]):this.onChangeCallback(i.value)),v.isNullOrUndefined(this.onTouchedCallback)||(this.range?this.onTouchedCallback([i.value,i.highValue]):this.onTouchedCallback(i.value))};i.userEventInitiated?(t(),this.userChange.emit(this.getChangeContext())):setTimeout(()=>{t()})}normaliseModelValues(i){let t=new Ht;if(t.value=i.value,t.highValue=i.highValue,!v.isNullOrUndefined(this.viewOptions.stepsArray)){if(this.viewOptions.enforceStepsArray){let n=v.findStepIndex(t.value,this.viewOptions.stepsArray);if(t.value=this.viewOptions.stepsArray[n].value,this.range){let s=v.findStepIndex(t.highValue,this.viewOptions.stepsArray);t.highValue=this.viewOptions.stepsArray[s].value}}return t}if(this.viewOptions.enforceStep&&(t.value=this.roundStep(t.value),this.range&&(t.highValue=this.roundStep(t.highValue))),this.viewOptions.enforceRange&&(t.value=W.clampToRange(t.value,this.viewOptions.floor,this.viewOptions.ceil),this.range&&(t.highValue=W.clampToRange(t.highValue,this.viewOptions.floor,this.viewOptions.ceil)),this.range&&i.value>i.highValue))if(this.viewOptions.noSwitching)t.value=t.highValue;else{let n=i.value;t.value=i.highValue,t.highValue=n}return t}renormaliseModelValues(){let i={value:this.value,highValue:this.highValue},t=this.normaliseModelValues(i);Ht.compare(t,i)||(this.value=t.value,this.highValue=t.highValue,this.outputModelChangeSubject.next({value:this.value,highValue:this.highValue,forceChange:!0,userEventInitiated:!1}))}onChangeOptions(){if(!this.initHasRun)return;let i=this.getOptionsInfluencingEventBindings(this.viewOptions);this.applyOptions();let t=this.getOptionsInfluencingEventBindings(this.viewOptions),n=!v.areArraysEqual(i,t);this.renormaliseModelValues(),this.viewLowValue=this.modelValueToViewValue(this.value),this.range?this.viewHighValue=this.modelValueToViewValue(this.highValue):this.viewHighValue=null,this.resetSlider(n)}applyOptions(){if(this.viewOptions=new Ut,Object.assign(this.viewOptions,this.options),this.viewOptions.draggableRange=this.range&&this.viewOptions.draggableRange,this.viewOptions.draggableRangeOnly=this.range&&this.viewOptions.draggableRangeOnly,this.viewOptions.draggableRangeOnly&&(this.viewOptions.draggableRange=!0),this.viewOptions.showTicks=this.viewOptions.showTicks||this.viewOptions.showTicksValues||!v.isNullOrUndefined(this.viewOptions.ticksArray),this.viewOptions.showTicks&&(!v.isNullOrUndefined(this.viewOptions.tickStep)||!v.isNullOrUndefined(this.viewOptions.ticksArray))&&(this.intermediateTicks=!0),this.viewOptions.showSelectionBar=this.viewOptions.showSelectionBar||this.viewOptions.showSelectionBarEnd||!v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue),v.isNullOrUndefined(this.viewOptions.stepsArray)?this.applyFloorCeilOptions():this.applyStepsArrayOptions(),v.isNullOrUndefined(this.viewOptions.combineLabels)&&(this.viewOptions.combineLabels=(i,t)=>i+" - "+t),this.viewOptions.logScale&&this.viewOptions.floor===0)throw Error("Can't use floor=0 with logarithmic scale")}applyStepsArrayOptions(){this.viewOptions.floor=0,this.viewOptions.ceil=this.viewOptions.stepsArray.length-1,this.viewOptions.step=1,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>this.viewOptions.bindIndexForStepsArray?String(this.getStepValue(i)):String(i))}applyFloorCeilOptions(){if(v.isNullOrUndefined(this.viewOptions.step)?this.viewOptions.step=1:(this.viewOptions.step=+this.viewOptions.step,this.viewOptions.step<=0&&(this.viewOptions.step=1)),v.isNullOrUndefined(this.viewOptions.ceil)||v.isNullOrUndefined(this.viewOptions.floor))throw Error("floor and ceil options must be supplied");this.viewOptions.ceil=+this.viewOptions.ceil,this.viewOptions.floor=+this.viewOptions.floor,v.isNullOrUndefined(this.viewOptions.translate)&&(this.viewOptions.translate=i=>String(i))}resetSlider(i=!0){this.manageElementsStyle(),this.addAccessibility(),this.updateCeilLabel(),this.updateFloorLabel(),i&&(this.unbindEvents(),this.manageEventsBindings()),this.updateDisabledState(),this.updateAriaLabel(),this.calculateViewDimensions(),this.refocusPointerIfNeeded()}focusPointer(i){i!==x.Min&&i!==x.Max&&(i=x.Min),i===x.Min?this.minHandleElement.focus():this.range&&i===x.Max&&this.maxHandleElement.focus()}refocusPointerIfNeeded(){v.isNullOrUndefined(this.currentFocusPointer)||this.getPointerElement(this.currentFocusPointer).focusIfNeeded()}manageElementsStyle(){this.updateScale(),this.floorLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels),this.ceilLabelElement.setAlwaysHide(this.viewOptions.showTicksValues||this.viewOptions.hideLimitLabels);let i=this.viewOptions.showTicksValues&&!this.intermediateTicks;this.minHandleLabelElement.setAlwaysHide(i||this.viewOptions.hidePointerLabels),this.maxHandleLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.combinedLabelElement.setAlwaysHide(i||!this.range||this.viewOptions.hidePointerLabels),this.selectionBarElement.setAlwaysHide(!this.range&&!this.viewOptions.showSelectionBar),this.leftOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.rightOuterSelectionBarElement.setAlwaysHide(!this.range||!this.viewOptions.showOuterSelectionBars),this.fullBarTransparentClass=this.range&&this.viewOptions.showOuterSelectionBars,this.selectionBarDraggableClass=this.viewOptions.draggableRange&&!this.viewOptions.onlyBindHandles,this.ticksUnderValuesClass=this.intermediateTicks&&this.options.showTicksValues,this.sliderElementVerticalClass!==this.viewOptions.vertical&&(this.updateVerticalState(),setTimeout(()=>{this.resetSlider()})),this.sliderElementAnimateClass!==this.viewOptions.animate&&setTimeout(()=>{this.sliderElementAnimateClass=this.viewOptions.animate}),this.updateRotate()}manageEventsBindings(){this.viewOptions.disabled||this.viewOptions.readOnly?this.unbindEvents():this.bindEvents()}updateDisabledState(){this.sliderElementDisabledAttr=this.viewOptions.disabled?"disabled":null}updateAriaLabel(){this.sliderElementAriaLabel=this.viewOptions.ariaLabel||"nxg-slider"}updateVerticalState(){this.sliderElementVerticalClass=this.viewOptions.vertical;for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.setVertical(this.viewOptions.vertical)}updateScale(){for(let i of this.getAllSliderElements())i.setScale(this.viewOptions.scale)}updateRotate(){for(let i of this.getAllSliderElements())i.setRotate(this.viewOptions.rotate)}getAllSliderElements(){return[this.leftOuterSelectionBarElement,this.rightOuterSelectionBarElement,this.fullBarElement,this.selectionBarElement,this.minHandleElement,this.maxHandleElement,this.floorLabelElement,this.ceilLabelElement,this.minHandleLabelElement,this.maxHandleLabelElement,this.combinedLabelElement,this.ticksElement]}initHandles(){this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.range&&this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateSelectionBar(),this.range&&this.updateCombinedLabel(),this.updateTicksScale()}addAccessibility(){this.updateAriaAttributes(),this.minHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.minHandleElement.tabindex="0":this.minHandleElement.tabindex="",this.minHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabel)?v.isNullOrUndefined(this.viewOptions.ariaLabelledBy)||(this.minHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledBy):this.minHandleElement.ariaLabel=this.viewOptions.ariaLabel,this.range&&(this.maxHandleElement.role="slider",this.viewOptions.keyboardSupport&&!(this.viewOptions.readOnly||this.viewOptions.disabled)?this.maxHandleElement.tabindex="0":this.maxHandleElement.tabindex="",this.maxHandleElement.ariaOrientation=this.viewOptions.vertical||this.viewOptions.rotate!==0?"vertical":"horizontal",v.isNullOrUndefined(this.viewOptions.ariaLabelHigh)?v.isNullOrUndefined(this.viewOptions.ariaLabelledByHigh)||(this.maxHandleElement.ariaLabelledBy=this.viewOptions.ariaLabelledByHigh):this.maxHandleElement.ariaLabel=this.viewOptions.ariaLabelHigh)}updateAriaAttributes(){this.minHandleElement.ariaValueNow=(+this.value).toString(),this.minHandleElement.ariaValueText=this.viewOptions.translate(+this.value,Ue.Low),this.minHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.minHandleElement.ariaValueMax=this.viewOptions.ceil.toString(),this.range&&(this.maxHandleElement.ariaValueNow=(+this.highValue).toString(),this.maxHandleElement.ariaValueText=this.viewOptions.translate(+this.highValue,Ue.High),this.maxHandleElement.ariaValueMin=this.viewOptions.floor.toString(),this.maxHandleElement.ariaValueMax=this.viewOptions.ceil.toString())}calculateViewDimensions(){v.isNullOrUndefined(this.viewOptions.handleDimension)?this.minHandleElement.calculateDimension():this.minHandleElement.setDimension(this.viewOptions.handleDimension);let i=this.minHandleElement.dimension;this.handleHalfDimension=i/2,v.isNullOrUndefined(this.viewOptions.barDimension)?this.fullBarElement.calculateDimension():this.fullBarElement.setDimension(this.viewOptions.barDimension),this.maxHandlePosition=this.fullBarElement.dimension-i,this.initHasRun&&(this.updateFloorLabel(),this.updateCeilLabel(),this.initHandles())}calculateViewDimensionsAndDetectChanges(){this.calculateViewDimensions(),this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}isRefDestroyed(){return this.changeDetectionRef.destroyed}updateTicksScale(){if(!this.viewOptions.showTicks&&this.sliderElementWithLegendClass){setTimeout(()=>{this.sliderElementWithLegendClass=!1});return}let i=v.isNullOrUndefined(this.viewOptions.ticksArray)?this.getTicksArray():this.viewOptions.ticksArray,t=this.viewOptions.vertical?"translateY":"translateX";this.viewOptions.rightToLeft&&i.reverse();let n=v.isNullOrUndefined(this.viewOptions.tickValueStep)?v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep:this.viewOptions.tickValueStep,s=!1,o=i.map(a=>{let l=this.valueToPosition(a);this.viewOptions.vertical&&(l=this.maxHandlePosition-l);let c=t+"("+Math.round(l)+"px)",h=new Is;h.selected=this.isTickSelected(a),h.style={"-webkit-transform":c,"-moz-transform":c,"-o-transform":c,"-ms-transform":c,transform:c},h.selected&&!v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)&&(h.style["background-color"]=this.getSelectionBarColor()),!h.selected&&!v.isNullOrUndefined(this.viewOptions.getTickColor)&&(h.style["background-color"]=this.getTickColor(a)),v.isNullOrUndefined(this.viewOptions.ticksTooltip)||(h.tooltip=this.viewOptions.ticksTooltip(a),h.tooltipPlacement=this.viewOptions.vertical?"right":"top"),this.viewOptions.showTicksValues&&!v.isNullOrUndefined(n)&&W.isModuloWithinPrecisionLimit(a,n,this.viewOptions.precisionLimit)&&(h.value=this.getDisplayValue(a,Ue.TickValue),v.isNullOrUndefined(this.viewOptions.ticksValuesTooltip)||(h.valueTooltip=this.viewOptions.ticksValuesTooltip(a),h.valueTooltipPlacement=this.viewOptions.vertical?"right":"top"));let C=null;if(v.isNullOrUndefined(this.viewOptions.stepsArray))v.isNullOrUndefined(this.viewOptions.getLegend)||(C=this.viewOptions.getLegend(a));else{let M=this.viewOptions.stepsArray[a];v.isNullOrUndefined(this.viewOptions.getStepLegend)?v.isNullOrUndefined(M)||(C=M.legend):C=this.viewOptions.getStepLegend(M)}return v.isNullOrUndefined(C)||(h.legend=C,s=!0),h});if(this.sliderElementWithLegendClass!==s&&setTimeout(()=>{this.sliderElementWithLegendClass=s}),!v.isNullOrUndefined(this.ticks)&&this.ticks.length===o.length)for(let a=0;a<o.length;++a)Object.assign(this.ticks[a],o[a]);else this.ticks=o,this.isRefDestroyed()||this.changeDetectionRef.detectChanges()}getTicksArray(){if(!this.viewOptions.showTicks)return[];let i=v.isNullOrUndefined(this.viewOptions.tickStep)?this.viewOptions.step:this.viewOptions.tickStep,t=[],n=1+Math.floor(W.roundToPrecisionLimit(Math.abs(this.viewOptions.ceil-this.viewOptions.floor)/i,this.viewOptions.precisionLimit));for(let s=0;s<n;++s)t.push(W.roundToPrecisionLimit(this.viewOptions.floor+i*s,this.viewOptions.precisionLimit));return t}isTickSelected(i){if(!this.range)if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)){if(this.viewOptions.showSelectionBarEnd){if(i>=this.viewLowValue)return!0}else if(this.viewOptions.showSelectionBar&&i<=this.viewLowValue)return!0}else{let t=this.viewOptions.showSelectionBarFromValue;if(this.viewLowValue>t&&i>=t&&i<=this.viewLowValue)return!0;if(this.viewLowValue<t&&i<=t&&i>=this.viewLowValue)return!0}return!!(this.range&&i>=this.viewLowValue&&i<=this.viewHighValue)}updateFloorLabel(){if(!this.floorLabelElement.alwaysHide){this.floorLabelElement.setValue(this.getDisplayValue(this.viewOptions.floor,Ue.Floor)),this.floorLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?this.fullBarElement.dimension-this.floorLabelElement.dimension:0;this.floorLabelElement.setPosition(i)}}updateCeilLabel(){if(!this.ceilLabelElement.alwaysHide){this.ceilLabelElement.setValue(this.getDisplayValue(this.viewOptions.ceil,Ue.Ceil)),this.ceilLabelElement.calculateDimension();let i=this.viewOptions.rightToLeft?0:this.fullBarElement.dimension-this.ceilLabelElement.dimension;this.ceilLabelElement.setPosition(i)}}updateHandles(i,t){i===x.Min?this.updateLowHandle(t):i===x.Max&&this.updateHighHandle(t),this.updateSelectionBar(),this.updateTicksScale(),this.range&&this.updateCombinedLabel()}getHandleLabelPos(i,t){let n=i===x.Min?this.minHandleLabelElement.dimension:this.maxHandleLabelElement.dimension,s=t-n/2+this.handleHalfDimension,o=this.fullBarElement.dimension-n;return this.viewOptions.boundPointerLabels?this.viewOptions.rightToLeft&&i===x.Min||!this.viewOptions.rightToLeft&&i===x.Max?Math.min(s,o):Math.min(Math.max(s,0),o):s}updateLowHandle(i){this.minHandleElement.setPosition(i),this.minHandleLabelElement.setValue(this.getDisplayValue(this.viewLowValue,Ue.Low)),this.minHandleLabelElement.setPosition(this.getHandleLabelPos(x.Min,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.minPointerStyle={backgroundColor:this.getPointerColor(x.Min)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateHighHandle(i){this.maxHandleElement.setPosition(i),this.maxHandleLabelElement.setValue(this.getDisplayValue(this.viewHighValue,Ue.High)),this.maxHandleLabelElement.setPosition(this.getHandleLabelPos(x.Max,i)),v.isNullOrUndefined(this.viewOptions.getPointerColor)||(this.maxPointerStyle={backgroundColor:this.getPointerColor(x.Max)}),this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}updateFloorAndCeilLabelsVisibility(){if(this.viewOptions.hidePointerLabels)return;let i=!1,t=!1,n=this.isLabelBelowFloorLabel(this.minHandleLabelElement),s=this.isLabelAboveCeilLabel(this.minHandleLabelElement),o=this.isLabelAboveCeilLabel(this.maxHandleLabelElement),a=this.isLabelBelowFloorLabel(this.combinedLabelElement),l=this.isLabelAboveCeilLabel(this.combinedLabelElement);if(n?(i=!0,this.floorLabelElement.hide()):(i=!1,this.floorLabelElement.show()),s?(t=!0,this.ceilLabelElement.hide()):(t=!1,this.ceilLabelElement.show()),this.range){let c=this.combinedLabelElement.isVisible()?l:o,h=this.combinedLabelElement.isVisible()?a:n;c?this.ceilLabelElement.hide():t||this.ceilLabelElement.show(),h?this.floorLabelElement.hide():i||this.floorLabelElement.show()}}isLabelBelowFloorLabel(i){let t=i.position,n=i.dimension,s=this.floorLabelElement.position,o=this.floorLabelElement.dimension;return this.viewOptions.rightToLeft?t+n>=s-2:t<=s+o+2}isLabelAboveCeilLabel(i){let t=i.position,n=i.dimension,s=this.ceilLabelElement.position,o=this.ceilLabelElement.dimension;return this.viewOptions.rightToLeft?t<=s+o+2:t+n>=s-2}updateSelectionBar(){let i=0,t=0,n=this.viewOptions.rightToLeft?!this.viewOptions.showSelectionBarEnd:this.viewOptions.showSelectionBarEnd,s=this.viewOptions.rightToLeft?this.maxHandleElement.position+this.handleHalfDimension:this.minHandleElement.position+this.handleHalfDimension;if(this.range)t=Math.abs(this.maxHandleElement.position-this.minHandleElement.position),i=s;else if(v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue))n?(t=Math.ceil(Math.abs(this.maxHandlePosition-this.minHandleElement.position)+this.handleHalfDimension),i=Math.floor(this.minHandleElement.position+this.handleHalfDimension)):(t=this.minHandleElement.position+this.handleHalfDimension,i=0);else{let o=this.viewOptions.showSelectionBarFromValue,a=this.valueToPosition(o);(this.viewOptions.rightToLeft?this.viewLowValue<=o:this.viewLowValue>o)?(t=this.minHandleElement.position-a,i=a+this.handleHalfDimension):(t=a-this.minHandleElement.position,i=this.minHandleElement.position+this.handleHalfDimension)}if(this.selectionBarElement.setDimension(t),this.selectionBarElement.setPosition(i),this.range&&this.viewOptions.showOuterSelectionBars&&(this.viewOptions.rightToLeft?(this.rightOuterSelectionBarElement.setDimension(i),this.rightOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.leftOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.leftOuterSelectionBarElement.setPosition(i+t)):(this.leftOuterSelectionBarElement.setDimension(i),this.leftOuterSelectionBarElement.setPosition(0),this.fullBarElement.calculateDimension(),this.rightOuterSelectionBarElement.setDimension(this.fullBarElement.dimension-(i+t)),this.rightOuterSelectionBarElement.setPosition(i+t))),v.isNullOrUndefined(this.viewOptions.getSelectionBarColor)){if(!v.isNullOrUndefined(this.viewOptions.selectionBarGradient)){let o=v.isNullOrUndefined(this.viewOptions.showSelectionBarFromValue)?0:this.valueToPosition(this.viewOptions.showSelectionBarFromValue),a=o-i>0&&!n||o-i<=0&&n,l=this.viewOptions.vertical?a?"bottom":"top":a?"left":"right";this.barStyle={backgroundImage:"linear-gradient(to "+l+", "+this.viewOptions.selectionBarGradient.from+" 0%,"+this.viewOptions.selectionBarGradient.to+" 100%)"},this.viewOptions.vertical?(this.barStyle.backgroundPosition="center "+(o+t+i+(a?-this.handleHalfDimension:0))+"px",this.barStyle.backgroundSize="100% "+(this.fullBarElement.dimension-this.handleHalfDimension)+"px"):(this.barStyle.backgroundPosition=o-i+(a?this.handleHalfDimension:0)+"px center",this.barStyle.backgroundSize=this.fullBarElement.dimension-this.handleHalfDimension+"px 100%")}}else{let o=this.getSelectionBarColor();this.barStyle={backgroundColor:o}}}getSelectionBarColor(){return this.range?this.viewOptions.getSelectionBarColor(this.value,this.highValue):this.viewOptions.getSelectionBarColor(this.value)}getPointerColor(i){return i===x.Max?this.viewOptions.getPointerColor(this.highValue,i):this.viewOptions.getPointerColor(this.value,i)}getTickColor(i){return this.viewOptions.getTickColor(i)}updateCombinedLabel(){let i=null;if(this.viewOptions.rightToLeft?i=this.minHandleLabelElement.position-this.minHandleLabelElement.dimension-10<=this.maxHandleLabelElement.position:i=this.minHandleLabelElement.position+this.minHandleLabelElement.dimension+10>=this.maxHandleLabelElement.position,i){let t=this.getDisplayValue(this.viewLowValue,Ue.Low),n=this.getDisplayValue(this.viewHighValue,Ue.High),s=this.viewOptions.rightToLeft?this.viewOptions.combineLabels(n,t):this.viewOptions.combineLabels(t,n);this.combinedLabelElement.setValue(s);let o=this.viewOptions.boundPointerLabels?Math.min(Math.max(this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2,0),this.fullBarElement.dimension-this.combinedLabelElement.dimension):this.selectionBarElement.position+this.selectionBarElement.dimension/2-this.combinedLabelElement.dimension/2;this.combinedLabelElement.setPosition(o),this.minHandleLabelElement.hide(),this.maxHandleLabelElement.hide(),this.combinedLabelElement.show()}else this.updateHighHandle(this.valueToPosition(this.viewHighValue)),this.updateLowHandle(this.valueToPosition(this.viewLowValue)),this.maxHandleLabelElement.show(),this.minHandleLabelElement.show(),this.combinedLabelElement.hide();this.viewOptions.autoHideLimitLabels&&this.updateFloorAndCeilLabelsVisibility()}getDisplayValue(i,t){return!v.isNullOrUndefined(this.viewOptions.stepsArray)&&!this.viewOptions.bindIndexForStepsArray&&(i=this.getStepValue(i)),this.viewOptions.translate(i,t)}roundStep(i,t){let n=v.isNullOrUndefined(t)?this.viewOptions.step:t,s=W.roundToPrecisionLimit((i-this.viewOptions.floor)/n,this.viewOptions.precisionLimit);return s=Math.round(s)*n,W.roundToPrecisionLimit(this.viewOptions.floor+s,this.viewOptions.precisionLimit)}valueToPosition(i){let t=v.linearValueToPosition;v.isNullOrUndefined(this.viewOptions.customValueToPosition)?this.viewOptions.logScale&&(t=v.logValueToPosition):t=this.viewOptions.customValueToPosition,i=W.clampToRange(i,this.viewOptions.floor,this.viewOptions.ceil);let n=t(i,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(n)&&(n=0),this.viewOptions.rightToLeft&&(n=1-n),n*this.maxHandlePosition}positionToValue(i){let t=i/this.maxHandlePosition;this.viewOptions.rightToLeft&&(t=1-t);let n=v.linearPositionToValue;v.isNullOrUndefined(this.viewOptions.customPositionToValue)?this.viewOptions.logScale&&(n=v.logPositionToValue):n=this.viewOptions.customPositionToValue;let s=n(t,this.viewOptions.floor,this.viewOptions.ceil);return v.isNullOrUndefined(s)?0:s}getEventXY(i,t){if(i instanceof MouseEvent)return this.viewOptions.vertical||this.viewOptions.rotate!==0?i.clientY:i.clientX;let n=0,s=i.touches;if(!v.isNullOrUndefined(t)){for(let o=0;o<s.length;o++)if(s[o].identifier===t){n=o;break}}return this.viewOptions.vertical||this.viewOptions.rotate!==0?s[n].clientY:s[n].clientX}getEventPosition(i,t){let n=this.elementRef.nativeElement.getBoundingClientRect(),s=this.viewOptions.vertical||this.viewOptions.rotate!==0?n.bottom:n.left,o=0;return this.viewOptions.vertical||this.viewOptions.rotate!==0?o=-this.getEventXY(i,t)+s:o=this.getEventXY(i,t)-s,o*this.viewOptions.scale-this.handleHalfDimension}getNearestHandle(i){if(!this.range)return x.Min;let t=this.getEventPosition(i),n=Math.abs(t-this.minHandleElement.position),s=Math.abs(t-this.maxHandleElement.position);return n<s?x.Min:n>s?x.Max:this.viewOptions.rightToLeft?t>this.minHandleElement.position?x.Min:x.Max:t<this.minHandleElement.position?x.Min:x.Max}bindEvents(){let i=this.viewOptions.draggableRange;this.viewOptions.onlyBindHandles||this.selectionBarElement.on("mousedown",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.on("mousedown",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.on("mousedown",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.on("mousedown",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.on("mousedown",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.on("mousedown",t=>this.onStart(null,t,!0,!0,!0,!0)))),this.viewOptions.onlyBindHandles||this.selectionBarElement.onPassive("touchstart",t=>this.onBarStart(null,i,t,!0,!0,!0)),this.viewOptions.draggableRangeOnly?(this.minHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Min,i,t,!0,!0)),this.maxHandleElement.onPassive("touchstart",t=>this.onBarStart(x.Max,i,t,!0,!0))):(this.minHandleElement.onPassive("touchstart",t=>this.onStart(x.Min,t,!0,!0)),this.range&&this.maxHandleElement.onPassive("touchstart",t=>this.onStart(x.Max,t,!0,!0)),this.viewOptions.onlyBindHandles||(this.fullBarElement.onPassive("touchstart",t=>this.onStart(null,t,!0,!0,!0)),this.ticksElement.onPassive("touchstart",t=>this.onStart(null,t,!1,!1,!0,!0)))),this.viewOptions.keyboardSupport&&(this.minHandleElement.on("focus",()=>this.onPointerFocus(x.Min)),this.range&&this.maxHandleElement.on("focus",()=>this.onPointerFocus(x.Max)))}getOptionsInfluencingEventBindings(i){return[i.disabled,i.readOnly,i.draggableRange,i.draggableRangeOnly,i.onlyBindHandles,i.keyboardSupport]}unbindEvents(){this.unsubscribeOnMove(),this.unsubscribeOnEnd();for(let i of this.getAllSliderElements())v.isNullOrUndefined(i)||i.off()}onBarStart(i,t,n,s,o,a,l){t?this.onDragStart(i,n,s,o):this.onStart(i,n,s,o,a,l)}onStart(i,t,n,s,o,a){t.stopPropagation(),!He.isTouchEvent(t)&&!Nn&&t.preventDefault(),this.moving=!1,this.calculateViewDimensions(),v.isNullOrUndefined(i)&&(i=this.getNearestHandle(t)),this.currentTrackingPointer=i;let l=this.getPointerElement(i);if(l.active=!0,this.viewOptions.keyboardSupport&&l.focus(),n){this.unsubscribeOnMove();let c=h=>this.dragging.active?this.onDragMove(h):this.onMove(h);He.isTouchEvent(t)?this.onMoveEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchmove",c):this.onMoveEventListener=this.eventListenerHelper.attachEventListener(document,"mousemove",c)}if(s){this.unsubscribeOnEnd();let c=h=>this.onEnd(h);He.isTouchEvent(t)?this.onEndEventListener=this.eventListenerHelper.attachPassiveEventListener(document,"touchend",c):this.onEndEventListener=this.eventListenerHelper.attachEventListener(document,"mouseup",c)}this.userChangeStart.emit(this.getChangeContext()),He.isTouchEvent(t)&&!v.isNullOrUndefined(t.changedTouches)&&v.isNullOrUndefined(this.touchId)&&(this.touchId=t.changedTouches[0].identifier),o&&this.onMove(t,!0),a&&this.onEnd(t)}onMove(i,t){let n=null;if(He.isTouchEvent(i)){let c=i.changedTouches;for(let h=0;h<c.length;h++)if(c[h].identifier===this.touchId){n=c[h];break}if(v.isNullOrUndefined(n))return}this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let s=v.isNullOrUndefined(n)?this.getEventPosition(i):this.getEventPosition(i,n.identifier),o,a=this.viewOptions.rightToLeft?this.viewOptions.floor:this.viewOptions.ceil,l=this.viewOptions.rightToLeft?this.viewOptions.ceil:this.viewOptions.floor;s<=0?o=l:s>=this.maxHandlePosition?o=a:(o=this.positionToValue(s),t&&!v.isNullOrUndefined(this.viewOptions.tickStep)?o=this.roundStep(o,this.viewOptions.tickStep):o=this.roundStep(o)),this.positionTrackingHandle(o)}onEnd(i){He.isTouchEvent(i)&&i.changedTouches[0].identifier!==this.touchId||(this.moving=!1,this.viewOptions.animate&&(this.sliderElementAnimateClass=!0),this.touchId=null,this.viewOptions.keyboardSupport||(this.minHandleElement.active=!1,this.maxHandleElement.active=!1,this.currentTrackingPointer=null),this.dragging.active=!1,this.unsubscribeOnMove(),this.unsubscribeOnEnd(),this.userChangeEnd.emit(this.getChangeContext()))}onPointerFocus(i){let t=this.getPointerElement(i);t.on("blur",()=>this.onPointerBlur(t)),t.on("keydown",n=>this.onKeyboardEvent(n)),t.on("keyup",()=>this.onKeyUp()),t.active=!0,this.currentTrackingPointer=i,this.currentFocusPointer=i,this.firstKeyDown=!0}onKeyUp(){this.firstKeyDown=!0,this.userChangeEnd.emit(this.getChangeContext())}onPointerBlur(i){i.off("blur"),i.off("keydown"),i.off("keyup"),i.active=!1,v.isNullOrUndefined(this.touchId)&&(this.currentTrackingPointer=null,this.currentFocusPointer=null)}getKeyActions(i){let t=this.viewOptions.ceil-this.viewOptions.floor,n=i+this.viewOptions.step,s=i-this.viewOptions.step,o=i+t/10,a=i-t/10;this.viewOptions.reversedControls&&(n=i-this.viewOptions.step,s=i+this.viewOptions.step,o=i-t/10,a=i+t/10);let l={UP:n,DOWN:s,LEFT:s,RIGHT:n,PAGEUP:o,PAGEDOWN:a,HOME:this.viewOptions.reversedControls?this.viewOptions.ceil:this.viewOptions.floor,END:this.viewOptions.reversedControls?this.viewOptions.floor:this.viewOptions.ceil};return this.viewOptions.rightToLeft&&(l.LEFT=n,l.RIGHT=s,(this.viewOptions.vertical||this.viewOptions.rotate!==0)&&(l.UP=s,l.DOWN=n)),l}onKeyboardEvent(i){let t=this.getCurrentTrackingValue(),n=v.isNullOrUndefined(i.keyCode)?i.which:i.keyCode,s={38:"UP",40:"DOWN",37:"LEFT",39:"RIGHT",33:"PAGEUP",34:"PAGEDOWN",36:"HOME",35:"END"},o=this.getKeyActions(t),a=s[n],l=o[a];if(v.isNullOrUndefined(l)||v.isNullOrUndefined(this.currentTrackingPointer))return;i.preventDefault(),this.firstKeyDown&&(this.firstKeyDown=!1,this.userChangeStart.emit(this.getChangeContext()));let c=W.clampToRange(l,this.viewOptions.floor,this.viewOptions.ceil),h=this.roundStep(c);if(!this.viewOptions.draggableRangeOnly)this.positionTrackingHandle(h);else{let C=this.viewHighValue-this.viewLowValue,M,L;this.currentTrackingPointer===x.Min?(M=h,L=h+C,L>this.viewOptions.ceil&&(L=this.viewOptions.ceil,M=L-C)):this.currentTrackingPointer===x.Max&&(L=h,M=h-C,M<this.viewOptions.floor&&(M=this.viewOptions.floor,L=M+C)),this.positionTrackingBar(M,L)}}onDragStart(i,t,n,s){let o=this.getEventPosition(t);this.dragging=new jn,this.dragging.active=!0,this.dragging.value=this.positionToValue(o),this.dragging.difference=this.viewHighValue-this.viewLowValue,this.dragging.lowLimit=this.viewOptions.rightToLeft?this.minHandleElement.position-o:o-this.minHandleElement.position,this.dragging.highLimit=this.viewOptions.rightToLeft?o-this.maxHandleElement.position:this.maxHandleElement.position-o,this.onStart(i,t,n,s)}getMinValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor:this.viewOptions.ceil-this.dragging.difference:o=s?this.viewOptions.ceil-this.dragging.difference:this.viewOptions.floor:o=s?this.positionToValue(i+this.dragging.lowLimit):this.positionToValue(i-this.dragging.lowLimit),this.roundStep(o)}getMaxValue(i,t,n){let s=this.viewOptions.rightToLeft,o=null;return t?n?o=s?this.viewOptions.floor+this.dragging.difference:this.viewOptions.ceil:o=s?this.viewOptions.ceil:this.viewOptions.floor+this.dragging.difference:s?o=this.positionToValue(i+this.dragging.lowLimit)+this.dragging.difference:o=this.positionToValue(i-this.dragging.lowLimit)+this.dragging.difference,this.roundStep(o)}onDragMove(i){let t=this.getEventPosition(i);this.viewOptions.animate&&!this.viewOptions.animateOnMove&&this.moving&&(this.sliderElementAnimateClass=!1),this.moving=!0;let n,s,o,a;this.viewOptions.rightToLeft?(n=this.dragging.lowLimit,s=this.dragging.highLimit,o=this.maxHandleElement,a=this.minHandleElement):(n=this.dragging.highLimit,s=this.dragging.lowLimit,o=this.minHandleElement,a=this.maxHandleElement);let l=t<=s,c=t>=this.maxHandlePosition-n,h,C;if(l){if(o.position===0)return;h=this.getMinValue(t,!0,!1),C=this.getMaxValue(t,!0,!1)}else if(c){if(a.position===this.maxHandlePosition)return;C=this.getMaxValue(t,!0,!0),h=this.getMinValue(t,!0,!0)}else h=this.getMinValue(t,!1,!1),C=this.getMaxValue(t,!1,!1);this.positionTrackingBar(h,C)}positionTrackingBar(i,t){!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit&&(i=this.viewOptions.minLimit,t=W.roundToPrecisionLimit(i+this.dragging.difference,this.viewOptions.precisionLimit)),!v.isNullOrUndefined(this.viewOptions.maxLimit)&&t>this.viewOptions.maxLimit&&(t=this.viewOptions.maxLimit,i=W.roundToPrecisionLimit(t-this.dragging.difference,this.viewOptions.precisionLimit)),this.viewLowValue=i,this.viewHighValue=t,this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(i)),this.updateHandles(x.Max,this.valueToPosition(t))}positionTrackingHandle(i){i=this.applyMinMaxLimit(i),this.range&&(this.viewOptions.pushRange?i=this.applyPushRange(i):(this.viewOptions.noSwitching&&(this.currentTrackingPointer===x.Min&&i>this.viewHighValue?i=this.applyMinMaxRange(this.viewHighValue):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(i=this.applyMinMaxRange(this.viewLowValue))),i=this.applyMinMaxRange(i),this.currentTrackingPointer===x.Min&&i>this.viewHighValue?(this.viewLowValue=this.viewHighValue,this.applyViewChange(),this.updateHandles(x.Min,this.maxHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Max,this.minHandleElement.active=!1,this.maxHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.maxHandleElement.focus()):this.currentTrackingPointer===x.Max&&i<this.viewLowValue&&(this.viewHighValue=this.viewLowValue,this.applyViewChange(),this.updateHandles(x.Max,this.minHandleElement.position),this.updateAriaAttributes(),this.currentTrackingPointer=x.Min,this.maxHandleElement.active=!1,this.minHandleElement.active=!0,this.viewOptions.keyboardSupport&&this.minHandleElement.focus()))),this.getCurrentTrackingValue()!==i&&(this.currentTrackingPointer===x.Min?(this.viewLowValue=i,this.applyViewChange()):this.currentTrackingPointer===x.Max&&(this.viewHighValue=i,this.applyViewChange()),this.updateHandles(this.currentTrackingPointer,this.valueToPosition(i)),this.updateAriaAttributes())}applyMinMaxLimit(i){return!v.isNullOrUndefined(this.viewOptions.minLimit)&&i<this.viewOptions.minLimit?this.viewOptions.minLimit:!v.isNullOrUndefined(this.viewOptions.maxLimit)&&i>this.viewOptions.maxLimit?this.viewOptions.maxLimit:i}applyMinMaxRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue:this.viewLowValue,n=Math.abs(i-t);if(!v.isNullOrUndefined(this.viewOptions.minRange)&&n<this.viewOptions.minRange){if(this.currentTrackingPointer===x.Min)return W.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.minRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return W.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.minRange,this.viewOptions.precisionLimit)}if(!v.isNullOrUndefined(this.viewOptions.maxRange)&&n>this.viewOptions.maxRange){if(this.currentTrackingPointer===x.Min)return W.roundToPrecisionLimit(this.viewHighValue-this.viewOptions.maxRange,this.viewOptions.precisionLimit);if(this.currentTrackingPointer===x.Max)return W.roundToPrecisionLimit(this.viewLowValue+this.viewOptions.maxRange,this.viewOptions.precisionLimit)}return i}applyPushRange(i){let t=this.currentTrackingPointer===x.Min?this.viewHighValue-i:i-this.viewLowValue,n=v.isNullOrUndefined(this.viewOptions.minRange)?this.viewOptions.step:this.viewOptions.minRange,s=this.viewOptions.maxRange;return t<n?(this.currentTrackingPointer===x.Min?(this.viewHighValue=W.roundToPrecisionLimit(Math.min(i+n,this.viewOptions.ceil),this.viewOptions.precisionLimit),i=W.roundToPrecisionLimit(this.viewHighValue-n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=W.roundToPrecisionLimit(Math.max(i-n,this.viewOptions.floor),this.viewOptions.precisionLimit),i=W.roundToPrecisionLimit(this.viewLowValue+n,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()):!v.isNullOrUndefined(s)&&t>s&&(this.currentTrackingPointer===x.Min?(this.viewHighValue=W.roundToPrecisionLimit(i+s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Max,this.valueToPosition(this.viewHighValue))):this.currentTrackingPointer===x.Max&&(this.viewLowValue=W.roundToPrecisionLimit(i-s,this.viewOptions.precisionLimit),this.applyViewChange(),this.updateHandles(x.Min,this.valueToPosition(this.viewLowValue))),this.updateAriaAttributes()),i}getChangeContext(){let i=new Os;return i.pointerType=this.currentTrackingPointer,i.value=+this.value,this.range&&(i.highValue=+this.highValue),i}static \u0275fac=function(t){return new(t||r)(ie(wt),ie(yt),ie(Be),ie(le),ie(Xa,8))};static \u0275cmp=nt({type:r,selectors:[["ngx-slider"]],contentQueries:function(t,n,s){if(t&1&&br(s,bd,5),t&2){let o;ue(o=de())&&(n.tooltipTemplate=o.first)}},viewQuery:function(t,n){if(t&1&&(me(_d,5,tt),me(Cd,5,tt),me(Sd,5,tt),me(Ed,5,tt),me(xd,5,Ms),me(Md,5,Ms),me(Od,5,Nt),me(Id,5,Nt),me(Rd,5,Nt),me(Dd,5,Nt),me(Ad,5,Nt),me(kd,5,tt)),t&2){let s;ue(s=de())&&(n.leftOuterSelectionBarElement=s.first),ue(s=de())&&(n.rightOuterSelectionBarElement=s.first),ue(s=de())&&(n.fullBarElement=s.first),ue(s=de())&&(n.selectionBarElement=s.first),ue(s=de())&&(n.minHandleElement=s.first),ue(s=de())&&(n.maxHandleElement=s.first),ue(s=de())&&(n.floorLabelElement=s.first),ue(s=de())&&(n.ceilLabelElement=s.first),ue(s=de())&&(n.minHandleLabelElement=s.first),ue(s=de())&&(n.maxHandleLabelElement=s.first),ue(s=de())&&(n.combinedLabelElement=s.first),ue(s=de())&&(n.ticksElement=s.first)}},hostVars:10,hostBindings:function(t,n){t&1&&_t("resize",function(o){return n.onResize(o)},!1,eo),t&2&&(Qt("disabled",n.sliderElementDisabledAttr)("aria-label",n.sliderElementAriaLabel),bt("ngx-slider",n.sliderElementNgxSliderClass)("vertical",n.sliderElementVerticalClass)("animate",n.sliderElementAnimateClass)("with-legend",n.sliderElementWithLegendClass))},inputs:{value:"value",highValue:"highValue",options:"options",manualRefresh:"manualRefresh",triggerFocus:"triggerFocus"},outputs:{valueChange:"valueChange",highValueChange:"highValueChange",userChangeStart:"userChangeStart",userChange:"userChange",userChangeEnd:"userChangeEnd"},features:[po([Hd]),Li],decls:29,vars:13,consts:[["leftOuterSelectionBar",""],["rightOuterSelectionBar",""],["fullBar",""],["selectionBar",""],["minHandle",""],["maxHandle",""],["floorLabel",""],["ceilLabel",""],["minHandleLabel",""],["maxHandleLabel",""],["combinedLabel",""],["ticksElement",""],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-left-out-selection"],[1,"ngx-slider-span","ngx-slider-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-right-out-selection"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-full-bar"],["ngxSliderElement","",1,"ngx-slider-span","ngx-slider-bar-wrapper","ngx-slider-selection-bar"],[1,"ngx-slider-span","ngx-slider-bar","ngx-slider-selection",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-min",3,"ngStyle"],["ngxSliderHandle","",1,"ngx-slider-span","ngx-slider-pointer","ngx-slider-pointer-max",3,"ngStyle"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-floor"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-limit","ngx-slider-ceil"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-value"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-model-high"],["ngxSliderLabel","",1,"ngx-slider-span","ngx-slider-bubble","ngx-slider-combined"],["ngxSliderElement","",1,"ngx-slider-ticks",3,"hidden"],["class","ngx-slider-tick",3,"ngClass","ngStyle",4,"ngFor","ngForOf"],[1,"ngx-slider-tick",3,"ngClass","ngStyle"],[3,"template","tooltip","placement"],["class","ngx-slider-span ngx-slider-tick-value",3,"template","tooltip","placement","content",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerText",4,"ngIf"],["class","ngx-slider-span ngx-slider-tick-legend",3,"innerHTML",4,"ngIf"],[1,"ngx-slider-span","ngx-slider-tick-value",3,"template","tooltip","placement","content"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerText"],[1,"ngx-slider-span","ngx-slider-tick-legend",3,"innerHTML"]],template:function(t,n){t&1&&(re(0,"span",12,0),Z(2,"span",13),ce(),re(3,"span",14,1),Z(5,"span",13),ce(),re(6,"span",15,2),Z(8,"span",13),ce(),re(9,"span",16,3),Z(11,"span",17),ce(),Z(12,"span",18,4)(14,"span",19,5)(16,"span",20,6)(18,"span",21,7)(20,"span",22,8)(22,"span",23,9)(24,"span",24,10),re(26,"span",25,11),Ke(28,Nd,5,10,"span",26),ce()),t&2&&(te(6),bt("ngx-slider-transparent",n.fullBarTransparentClass),te(3),bt("ngx-slider-draggable",n.selectionBarDraggableClass),te(2),Q("ngStyle",n.barStyle),te(),Q("ngStyle",n.minPointerStyle),te(2),vr("display",n.range?"inherit":"none"),Q("ngStyle",n.maxPointerStyle),te(12),bt("ngx-slider-ticks-values-under",n.ticksUnderValuesClass),Q("hidden",!n.showTicks),te(2),Q("ngForOf",n.ticks))},dependencies:[Ro,Do,ei,Ao,tt,Ms,Nt,Ud],styles:['.ngx-slider{display:inline-block;position:relative;height:4px;width:100%;margin:35px 0 15px;vertical-align:middle;-webkit-user-select:none;user-select:none;touch-action:pan-y}  .ngx-slider.with-legend{margin-bottom:40px}  .ngx-slider[disabled]{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-pointer{cursor:not-allowed;background-color:#d8e0f3}  .ngx-slider[disabled] .ngx-slider-draggable{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-selection{background:#8b91a2}  .ngx-slider[disabled] .ngx-slider-tick{cursor:not-allowed}  .ngx-slider[disabled] .ngx-slider-tick.ngx-slider-selected{background:#8b91a2}  .ngx-slider .ngx-slider-span{white-space:nowrap;position:absolute;display:inline-block}  .ngx-slider .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider .ngx-slider-bar-wrapper{left:0;box-sizing:border-box;margin-top:-16px;padding-top:16px;width:100%;height:32px;z-index:1}  .ngx-slider .ngx-slider-draggable{cursor:move}  .ngx-slider .ngx-slider-bar{left:0;width:100%;height:4px;z-index:1;background:#d8e0f3;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-transparent .ngx-slider-bar{background:transparent}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-left-out-selection .ngx-slider-bar{background:#df002d}  .ngx-slider .ngx-slider-bar-wrapper.ngx-slider-right-out-selection .ngx-slider-bar{background:#03a688}  .ngx-slider .ngx-slider-selection{z-index:2;background:#0db9f0;-webkit-border-radius:2px;-moz-border-radius:2px;border-radius:2px}  .ngx-slider .ngx-slider-pointer{cursor:pointer;width:32px;height:32px;top:-14px;background-color:#0db9f0;z-index:3;-webkit-border-radius:16px;-moz-border-radius:16px;border-radius:16px}  .ngx-slider .ngx-slider-pointer:after{content:"";width:8px;height:8px;position:absolute;top:12px;left:12px;-webkit-border-radius:4px;-moz-border-radius:4px;border-radius:4px;background:#fff}  .ngx-slider .ngx-slider-pointer:hover:after{background-color:#fff}  .ngx-slider .ngx-slider-pointer.ngx-slider-active{z-index:4}  .ngx-slider .ngx-slider-pointer.ngx-slider-active:after{background-color:#451aff}  .ngx-slider .ngx-slider-bubble{cursor:default;bottom:16px;padding:1px 3px;color:#55637d;font-size:16px}  .ngx-slider .ngx-slider-bubble.ngx-slider-limit{color:#55637d}  .ngx-slider .ngx-slider-ticks{box-sizing:border-box;width:100%;height:0;position:absolute;left:0;top:-3px;margin:0;z-index:1;list-style:none}  .ngx-slider .ngx-slider-ticks-values-under .ngx-slider-tick-value{top:auto;bottom:-36px}  .ngx-slider .ngx-slider-tick{text-align:center;cursor:pointer;width:10px;height:10px;background:#d8e0f3;border-radius:50%;position:absolute;top:0;left:0;margin-left:11px}  .ngx-slider .ngx-slider-tick.ngx-slider-selected{background:#0db9f0}  .ngx-slider .ngx-slider-tick-value{position:absolute;top:-34px;transform:translate(-50%)}  .ngx-slider .ngx-slider-tick-legend{position:absolute;top:24px;transform:translate(-50%);max-width:50px;white-space:normal}  .ngx-slider.vertical{position:relative;width:4px;height:100%;margin:0 20px;padding:0;vertical-align:baseline;touch-action:pan-x}  .ngx-slider.vertical .ngx-slider-base{width:100%;height:100%;padding:0}  .ngx-slider.vertical .ngx-slider-bar-wrapper{top:auto;left:0;margin:0 0 0 -16px;padding:0 0 0 16px;height:100%;width:32px}  .ngx-slider.vertical .ngx-slider-bar{bottom:0;left:auto;width:4px;height:100%}  .ngx-slider.vertical .ngx-slider-pointer{left:-14px!important;top:auto;bottom:0}  .ngx-slider.vertical .ngx-slider-bubble{left:16px!important;bottom:0}  .ngx-slider.vertical .ngx-slider-ticks{height:100%;width:0;left:-3px;top:0;z-index:1}  .ngx-slider.vertical .ngx-slider-tick{vertical-align:middle;margin-left:auto;margin-top:11px}  .ngx-slider.vertical .ngx-slider-tick-value{left:24px;top:auto;transform:translateY(-28%)}  .ngx-slider.vertical .ngx-slider-tick-legend{top:auto;right:24px;transform:translateY(-28%);max-width:none;white-space:nowrap}  .ngx-slider.vertical .ngx-slider-ticks-values-under .ngx-slider-tick-value{bottom:auto;left:auto;right:24px}  .ngx-slider *{transition:none}  .ngx-slider.animate .ngx-slider-bar-wrapper{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-selection{transition:background-color linear .3s}  .ngx-slider.animate .ngx-slider-pointer{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-pointer:after{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble{transition:all linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-limit{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-bubble.ngx-slider-combined{transition:opacity linear .3s}  .ngx-slider.animate .ngx-slider-tick{transition:background-color linear .3s}']})}return r})(),Ya=(()=>{class r{static \u0275fac=function(t){return new(t||r)};static \u0275mod=ke({type:r});static \u0275inj=Ae({imports:[qi]})}return r})();function $d(r,e){if(r&1){let i=oo();re(0,"ngx-slider",18),ho("valueChange",function(n){Gt(i);let s=he();return uo(s.sliderValue,n)||(s.sliderValue=n),Kt(n)}),_t("userChange",function(){Gt(i);let n=he();return Kt(n.onSliderChange())})("userChangeStart",function(){Gt(i);let n=he();return Kt(n.onSliderStart())})("userChangeEnd",function(){Gt(i);let n=he();return Kt(n.onSliderEnd())}),ce()}if(r&2){let i=he();co("value",i.sliderValue),Q("options",i.sliderOptions)}}var Za=(()=>{let e=class e{constructor(t){this.signalRService=t,this.title="Open Place",this.colorPalette=["000000","000000","FFFFFF","0000FF","00FFFF","FF0000","00FF00","FFFF00","FF00FF","7c4dff"],this.defaultColor="FFFFFF",this.username=localStorage.getItem("username"),this.timeoutId=null,this.zoomLevel=1,this.audio=new Audio("assets/sfx/place.mp3"),this.pickr=null,this.hoverPixel=new lt(-1,-1,""),this.boardArr=[],this.pixelQueue=[],this.dimensions={width:256,height:256},this.minZoom=1,this.maxZoom=Math.min(this.dimensions.width,this.dimensions.height)/10,this.originX=0,this.originY=0,this.selectedColor=1,this.sliderValue=0,this.sliderDragState=!1,this.isSliderVisible=!1,this.sliderOptions={ceil:0,vertical:!0,showSelectionBar:!0,rightToLeft:!0},this.client=new fn,this.databases=new gn(this.client)}ngOnInit(){return D(this,null,function*(){this.init(),this.initCanvasEvents(),this.initWindowResizeEvent(),this.initSignalR(),this.initDocumentEvents(),this.initPaletteContainer(),this.initColorPicker()})}initColorPicker(){this.pickr=Qa.default.create({el:".color-picker",theme:"monolith",useAsButton:!0,position:"top-middle",autoReposition:!0,default:this.colorPalette[0],swatches:["rgb(244, 67, 54)","rgb(233, 30, 99)","rgb(156, 39, 176)","rgb(103, 58, 183)","rgb(63, 81, 181)","rgb(33, 150, 243)","rgb(3, 169, 244","rgb(0, 188, 212)","rgb(0, 150, 136)","rgb(76, 175, 80)","rgb(139, 195, 74)","rgb(205, 220, 57)","rgb(255, 235, 59)","rgb(255, 193, 7)"],components:{preview:!0,opacity:!1,hue:!0,interaction:{hex:!0,rgba:!0,cancel:!1,input:!0,clear:!1,save:!1}}}),this.pickr.on("hide",()=>{this.pickr?.applyColor()}),this.pickr.on("change",t=>{let n=t.toHEXA();this.colorPalette[0]=n[0]+n[1]+n[2];let s="#"+this.colorPalette[0],o=document.getElementById("0-color");o.style.backgroundColor=s,localStorage.setItem("customColor",this.colorPalette[0])})}init(){return D(this,null,function*(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.canvas.setAttribute("tabindex","0"),yield this.loadBoard()})}initCanvasEvents(){this.resizeCanvas(),this.canvas.addEventListener("keydown",t=>this.handleMovement(t)),this.canvas.addEventListener("contextmenu",t=>t.preventDefault()),this.canvas.addEventListener("wheel",this.zoom.bind(this)),this.canvas.addEventListener("click",t=>this.handleCanvasClick(t)),this.canvas.addEventListener("mousedown",t=>this.getColor(t)),this.canvas.addEventListener("mousemove",this.onHover.bind(this)),this.canvas.addEventListener("mouseleave",this.onLeave.bind(this)),this.canvas.addEventListener("mouseover",t=>{!this.pickr?.isOpen()&&t.buttons==0&&this.sliderDragState==!1&&this.canvas.focus()})}initPaletteContainer(){let t=localStorage.getItem("customColor");t!==null&&(this.colorPalette[0]=t);let n=document.getElementById("palette-container");n&&this.colorPalette.forEach((s,o)=>{let a=document.createElement("div");a.style.width="40px",a.style.height="40px",a.style.backgroundColor=`#${s}`,a.style.borderRadius="50%",a.style.cursor="pointer",a.style.transition="transform 0.2s ease",a.style.border="2px solid #ffffff",a.style.display="inline-block",a.id=o.toString()+"-color",o==this.selectedColor&&(a.style.transform="scale(1.3)",a.style.border="3px solid #0080FF"),a.addEventListener("click",()=>this.handleColorDivClick(a)),a.addEventListener("mouseover",()=>a.style.transform="scale(1.3)"),a.addEventListener("mouseout",()=>a.style.transform="scale(1)"),n.appendChild(a)})}handleColorDivClick(t){this.selectedColor=parseInt(t.id.at(0)),document.querySelectorAll(".palette-container div").forEach(n=>{n.style.border="2px solid #ffffff",n.style.transform="scale(1.0)"}),t.style.border="3px solid #0080FF",t.style.transform="scale(1.3)",this.selectedColor==0&&this.pickr?.show()}initWindowResizeEvent(){window.addEventListener("resize",()=>{this.zoomLevel=1,this.resizeCanvas(),this.drawBoard()})}initSignalR(){this.signalRService.startConnection().subscribe(()=>{this.signalRService.receiveMessage().subscribe(t=>{let n=JSON.parse(t);n.placedBy==""&&(n.placedBy="Anonymous"),this.boardArr.push(n),this.sliderValue+1==this.boardArr.length?(this.drawPixel(n.x,n.y,n.color),this.isSliderVisible&&this.setSliderToMax()):this.sliderOptions=F(_({},this.sliderOptions),{ceil:this.boardArr.length}),this.updateLeaderboard()})})}initDocumentEvents(){document.addEventListener("wheel",t=>t.preventDefault(),{passive:!1}),document.addEventListener("keydown",t=>this.handleColorSelection(t)),document.addEventListener("selectionchange",()=>{document.activeElement?.id=="canvas"&&window.getSelection().removeAllRanges()})}getColor(t){if(t.button!=2)return;let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(!a)if(s<this.dimensions.width&&o<this.dimensions.height)a=new Tt(s,o,this.defaultColor,"","");else return;let l=this.colorPalette.indexOf(a.color);l==-1&&(l=0,localStorage.setItem("customColor",a.color),this.pickr?.setColor("#"+a.color,!1),this.colorPalette[0]=a.color),this.selectedColor=l;let c=document.getElementById(l+"-color");document.querySelectorAll(".palette-container div").forEach(h=>{h.style.border="2px solid #ffffff",h.style.transform="scale(1.0)"}),c.style.border="3px solid #0080FF",c.style.transform="scale(1.3)",this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel?.color??this.defaultColor,!0)}handleColorSelection(t){if(!this.pickr?.isOpen()&&t.code.startsWith("Digit")){let n=t.code.slice(5),s=9;n!="0"&&(s=parseInt(n)-1),this.selectedColor=s,this.drawHoverPixel(this.hoverPixel?.x??0,this.hoverPixel?.y??0,this.hoverPixel?.color??this.defaultColor,!0),document.querySelectorAll(".palette-container div").forEach(a=>{a.style.border="2px solid #ffffff",a.style.transform="scale(1.0)"});let o=document.getElementById(s.toString()+"-color");o.style.border="3px solid #0080FF",o.style.transform="scale(1.3)",this.pickr?.hide()}}handleMovement(t){switch(t.preventDefault(),t.key.toLocaleLowerCase()){case"w":case"arrowup":this.moveAndRedraw(0,-5);break;case"a":case"arrowleft":this.moveAndRedraw(-5,0);break;case"s":case"arrowdown":this.moveAndRedraw(0,5);break;case"d":case"arrowright":this.moveAndRedraw(5,0);break}}moveAndRedraw(t,n){this.resizeCanvas(),this.originX=Math.min(Math.max(this.originX+t,0),this.dimensions.width),this.originY=Math.min(Math.max(this.originY+n,0),this.dimensions.height),this.applyTransformations(),this.drawBoard()}handleCanvasClick(t){if(this.sliderValue!=this.sliderOptions.ceil){this.setSliderToMax(),this.drawBoard(),this.hoverPixel=this.findLatestPixel(this.hoverPixel.x,this.hoverPixel.y)||this.hoverPixel;return}let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.getValidPixelOrNull(s,o,this.colorPalette[this.selectedColor],this.username,new Date);a&&(this.hoverPixel=a,this.drawPixel(a.x,a.y,a.color),this.sendPixel(a.x,a.y,a.color,t))}increaseCounter(){let t=localStorage.getItem("placedPixels"),n=1;t&&(n=parseInt(t)+1),localStorage.setItem("placedPixels",n.toString())}playSound(){return D(this,null,function*(){this.audio.paused||(this.audio.pause(),this.audio.currentTime=0),this.audio.play()})}onHover(t){let n=this.canvas.getBoundingClientRect(),s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n),a=this.findLatestPixel(s,o);if(this.drawHoverPixel(s,o,a?.color,!1),a){let l={year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"},c=`(${a.x}, ${a.y}) ${a.placedBy||"Anonymous"}<br/>${new Date(a.timestamp).toLocaleDateString(void 0,l)}`;this.showBubble(c,t.clientX,t.clientY)}else this.hideBubble(!0)}findLatestPixel(t,n){let s=this.boardArr.length;this.isSliderVisible&&(s=this.sliderValue);for(let o=s-1;o>=0;o--){let a=this.boardArr[o];if(a.x===t&&a.y===n)return a}return null}calculateXPosition(t,n){return Math.floor((t-n.left)/n.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX)}calculateYPosition(t,n){return Math.floor((t-n.top)/n.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}hideBubble(t){let n=document.getElementById("bubble");t&&n?.innerText.startsWith("Wait")||n&&(n.style.visibility="hidden",n.style.opacity="0")}onLeave(){this.hoverPixel&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new lt(-1,-1,"")),this.hideBubble(!1)}drawHoverPixel(t,n,s,o){this.hoverPixel?(this.hoverPixel.x!==t||this.hoverPixel.y!==n||o)&&(this.drawPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color),this.hoverPixel=new lt(t,n,s||this.defaultColor),this.drawPixel(t,n,this.colorPalette[this.selectedColor])):this.hoverPixel=new lt(t,n,s||this.defaultColor)}showBubble(t,n,s){let o=document.getElementById("bubble"),a=this.canvas.getBoundingClientRect();o.innerHTML=t;let l=o.clientHeight*1.3;s-a.top<l&&(l=-20);let c=o.clientWidth*1.15;n-a.left<a.width-c&&(c=-30),o.style.visibility="visible",o.style.opacity="1",o.style.left=`${n-c}px`,o.style.top=`${s-l}px`,this.timeoutId&&clearTimeout(this.timeoutId),this.timeoutId=setTimeout(this.hideBubble,2e3)}loadBoard(){return D(this,null,function*(){let n=0,s;do{let o=yield fetch(xi.endpointUrl+`/GetRange?offset=${n}&limit=10000`);s||this.restoreViewSettings(),s=yield o.json(),s.forEach(a=>{a.placedBy==""&&(a.placedBy="Anonymous"),this.boardArr.push(a)}),this.drawBoard(),this.drawHoverPixel(this.hoverPixel.x,this.hoverPixel.y,this.hoverPixel.color,!0),this.updateLeaderboard(),n+=1e4}while(s.length==1e4);this.isSliderVisible=!0,this.setSliderToMax();try{let o=localStorage.getItem("board");if(o&&JSON.parse(o).length>=this.boardArr.length)return;localStorage.setItem("board",JSON.stringify(this.boardArr))}catch{console.log("Could not save board array.")}})}setSliderToMax(){this.sliderOptions=F(_({},this.sliderOptions),{ceil:this.boardArr.length}),this.sliderValue=this.sliderOptions.ceil}updateLeaderboard(){let t=[];for(let s of this.boardArr){let o=t.find(a=>a.name===s.placedBy);o?o.placedPixels++:t.push({name:s.placedBy,placedPixels:1})}let n=document.getElementById("leaderboard-list");n.innerHTML="",t.sort((s,o)=>o.placedPixels-s.placedPixels);for(let s=0;s<Math.min(10,t.length);s++){let o=s+1,a=document.createElement("li");a.className="leaderboard-item",a.innerHTML=`
        <span class="position">${o}.</span>
        <span class="name">${t[s].name}</span>
        <span class="score">${t[s].placedPixels}</span>
        `,n.appendChild(a)}}onSliderChange(){this.drawBoard()}onSliderStart(){this.sliderDragState=!0}onSliderEnd(){this.sliderDragState=!1}getValidPixelOrNull(t,n,s,o,a){return t<0||t>=this.dimensions.width||n<0||n>=this.dimensions.height?null:((!s||!/^[0-9A-F]{6}$/i.test(s))&&(s=this.defaultColor),new Tt(t,n,s,o,a))}sendPixel(t,n,s,o){return D(this,null,function*(){let a=this.findLatestPixel(t,n);if(a&&a.color===s&&a.placedBy===this.username||(a=new Tt(t,n,s,this.username,""),this.pixelQueue.includes(a)))return;this.pixelQueue.push(a),this.playSound();let l=yield fetch(xi.endpointUrl+"/SendPixel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(l.ok){let c=this.pixelQueue.indexOf(a);c>-1&&this.pixelQueue.splice(c,1),this.increaseCounter(),console.log("Success.")}else if(l.status===429)this.showBubble(`Wait ${l.headers.get("retry-after")} seconds.`,o.clientX,o.clientY),this.drawBoard();else if(l.status===400){let c=yield l.text();this.drawBoard(),console.log(c)}else console.error("HTTP Error:",l.status)})}drawBoard(){let t=this.boardArr.length;this.isSliderVisible&&(t=this.sliderValue),this.ctx.clearRect(0,0,this.dimensions.width,this.dimensions.height);for(let n=0;n<t;n++){let s=this.boardArr[n];this.drawPixel(s.x,s.y,s.color)}}drawPixel(t,n,s){this.getValidPixelOrNull(t,n,s,null,null)!=null&&(this.ctx.fillStyle="#"+s,this.ctx.fillRect(t,n,1,1))}resizeCanvas(){this.canvas.width=this.dimensions.width,this.canvas.height=this.dimensions.height;let t=Math.min(window.innerWidth,window.innerHeight/1.15);this.canvas.style.width=t+"px",this.canvas.style.height=t+"px";let n=document.getElementById("palette-container");n.style.width=t+"px"}usernameChange(t){let n=t.target.value;if(n.length>16){t.target.value=this.username||"",alert("Username cannot be longer than 16 characters.");return}this.username=n,localStorage.setItem("username",n)}zoom(t){this.updateZoomLevel(t.deltaY),this.resizeCanvas();let n=this.canvas.getBoundingClientRect();t.deltaY<0&&this.calculateOrigin(n,t.clientX,t.clientY),this.applyTransformations(),this.drawBoardAndHoverPixel(t,n)}drawBoardAndHoverPixel(t,n){this.drawBoard();let s=this.calculateXPosition(t.clientX,n),o=this.calculateYPosition(t.clientY,n);this.drawHoverPixel(s,o,this.findLatestPixel(s,o)?.color,!1)}updateZoomLevel(t){t<0?this.zoomLevel<this.maxZoom&&(this.zoomLevel=Math.ceil(this.zoomLevel*1.5)):this.zoomLevel>this.minZoom&&(this.zoomLevel=Math.floor(this.zoomLevel/1.5))}calculateOrigin(t,n,s){this.originX=Math.floor((n-t.left)/t.width*this.dimensions.width/this.zoomLevel+(1-1/this.zoomLevel)*this.originX),this.originY=Math.floor((s-t.top)/t.height*this.dimensions.height/this.zoomLevel+(1-1/this.zoomLevel)*this.originY)}applyTransformations(){this.ctx.translate(this.originX,this.originY),this.ctx.scale(this.zoomLevel,this.zoomLevel),this.ctx.translate(-this.originX,-this.originY),this.saveViewSettings()}saveViewSettings(){let t={originX:this.originX,originY:this.originY,zoom:this.zoomLevel};localStorage.setItem("canvasViewSettings",JSON.stringify(t))}restoreViewSettings(){let t=localStorage.getItem("canvasViewSettings");if(!t)return;let n=JSON.parse(t);this.originX=n.originX,this.originY=n.originY,this.zoomLevel=n.zoom,this.resizeCanvas(),this.applyTransformations()}};e.\u0275fac=function(n){return new(n||e)(ie(qa))},e.\u0275cmp=nt({type:e,selectors:[["app-root"]],decls:22,vars:2,consts:[["rel","stylesheet","href",Js`https://cdn.jsdelivr.net/npm/@simonwep/pickr/dist/themes/monolith.min.css`],[1,"min-h-screen","body","p-4"],[1,"container"],[1,"color-picker",2,"margin-right","30px"],["id","div"],["id","palette-container",1,"palette-container"],[2,"display","flex"],["id","canvas",1,"canvas",2,"flex","1"],[2,"flex","1"],["style","margin-left: 3vw","id","slider",3,"value","options","valueChange","userChange","userChangeStart","userChangeEnd",4,"ngIf"],["id","bubble",1,"text-center","bg-red-400","font-bold","text-white","rounded","transition","py-1","px-2","animate-[showoff_100ms_ease-in]",2,"position","absolute","white-space","nowrap","touch-action","manipulation","visibility","hidden"],[2,"height","50%"],[1,"w-full","max-w-sm","p-6","bg-white","rounded-lg","shadow-md","username-input-container"],["for","username",1,"block","text-gray-700","text-sm","font-medium","mb-2"],["id","username","type","text","placeholder","Enter your username",1,"w-full","px-4","py-2","border","border-gray-300","rounded-lg","shadow-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-transparent","transition","duration-300","ease-in-out",3,"change","value"],[1,"leaderboard"],[1,"leaderboard-header"],["id","leaderboard-list",1,"leaderboard-list"],["id","slider",2,"margin-left","3vw",3,"valueChange","userChange","userChangeStart","userChangeEnd","value","options"]],template:function(n,s){n&1&&(re(0,"head"),Z(1,"link",0),ce(),re(2,"body",1)(3,"div",2),Z(4,"div",3),re(5,"div",4),Z(6,"div",5),re(7,"div",6),Z(8,"canvas",7),re(9,"div",8),Ke(10,$d,1,2,"ngx-slider",9),ce()(),Z(11,"span",10),ce(),re(12,"div",11)(13,"div",12)(14,"label",13),Zt(15,"Username"),ce(),re(16,"input",14),_t("change",function(a){return s.usernameChange(a)}),ce()(),re(17,"div",15)(18,"div",16),Zt(19," Leaderboard "),ce(),Z(20,"ul",17),ce()()()(),Z(21,"router-outlet")),n&2&&(te(10),Q("ngIf",s.isSliderVisible),te(6),ao("value",s.username))},dependencies:[ei,ps,Rs],styles:[".canvas[_ngcontent-%COMP%]{display:block;background-color:#fff;image-rendering:pixelated;touch-action:manipulation;outline:none;border-radius:10px}.body[_ngcontent-%COMP%]{display:flex;justify-content:center;height:98vh;margin:0}@media (min-width: 1200px){.container[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:flex-start}.username-input-container[_ngcontent-%COMP%]{flex-shrink:0;margin-top:12vh;width:280px}}@media (max-width: 1199px){.container[_ngcontent-%COMP%]{display:block;text-align:center}#div[_ngcontent-%COMP%]{margin-bottom:1rem}}.palette-container[_ngcontent-%COMP%]{background-color:#223a70;border-radius:20px;padding:8px;margin-bottom:20px;display:flex;justify-content:space-evenly}.rounded[_ngcontent-%COMP%]{border-radius:.5rem}.transition[_ngcontent-%COMP%]{transition:opacity .3s ease-in-out,visibility .3s ease-in-out}.leaderboard[_ngcontent-%COMP%]{margin-top:4vh;width:100%;max-width:600px;background-color:#fff;border-radius:10px;overflow:hidden}.leaderboard-header[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;padding:20px;text-align:center;font-size:1.5rem;font-weight:700}.leaderboard-list[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}"]});let r=e;return r})();var Bd="@",Fd=(()=>{let e=class e{constructor(t,n,s,o,a){this.doc=t,this.delegate=n,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=R(to,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-SC4DKJLP.js")).catch(n=>{throw new G(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:s})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(t,n){let s=this.delegate.createRenderer(t,n);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Ds(s);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(t,n);o.use(l)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(n){Ni()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let r=e;return r})(),Ds=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let i of this.replay)i(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,i){return this.delegate.createElement(e,i)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,i){this.delegate.appendChild(e,i)}insertBefore(e,i,t,n){this.delegate.insertBefore(e,i,t,n)}removeChild(e,i,t){this.delegate.removeChild(e,i,t)}selectRootElement(e,i){return this.delegate.selectRootElement(e,i)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,i,t,n){this.delegate.setAttribute(e,i,t,n)}removeAttribute(e,i,t){this.delegate.removeAttribute(e,i,t)}addClass(e,i){this.delegate.addClass(e,i)}removeClass(e,i){this.delegate.removeClass(e,i)}setStyle(e,i,t,n){this.delegate.setStyle(e,i,t,n)}removeStyle(e,i,t){this.delegate.removeStyle(e,i,t)}setProperty(e,i,t){this.shouldReplay(i)&&this.replay.push(n=>n.setProperty(e,i,t)),this.delegate.setProperty(e,i,t)}setValue(e,i){this.delegate.setValue(e,i)}listen(e,i,t){return this.shouldReplay(i)&&this.replay.push(n=>n.listen(e,i,t)),this.delegate.listen(e,i,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(Bd)}};function Ja(r="animations"){return io("NgAsyncAnimations"),Pi([{provide:Ui,useFactory:(e,i,t)=>new Fd(e,i,t,r),deps:[ve,Wi,le]},{provide:Qs,useValue:r==="noop"?"NoopAnimations":"BrowserAnimations"}])}var el=(()=>{let e=class e{};e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=ke({type:e,bootstrap:[Za]}),e.\u0275inj=Ae({providers:[Ja()],imports:[qo,La,Ya]});let r=e;return r})();Fo().bootstrapModule(el).catch(r=>console.error(r));
